!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("_")):"function"==typeof define&&define.amd?define("app",["_"],t):"object"==typeof exports?exports.app=t(require("_")):e.app=t(e._)}("undefined"!=typeof self?self:this,(function(e){return function(){var t,r,n={9025:function(e,t,r){e.exports={ITEM_TYPES:r(8834).iB}},8834:function(e,t){"use strict";t.iB=t._5=void 0,t._5="STATIC_PAGE_V2",t.iB={DEFAULT:"DEFAULT",STATIC_PAGE:"STATIC_PAGE",STATIC_PAGE_V2:t._5,STORES_PRODUCT:"STORES_PRODUCT",FORUM_POST:"FORUM_POST",FORUM_CATEGORY:"FORUM_CATEGORY",PRO_GALLERY_ITEM:"PRO_GALLERY_ITEM",BLOG_POST:"BLOG_POST",BLOG_CATEGORY:"BLOG_CATEGORY",BLOG_TAGS:"BLOG_TAGS",BLOG_ARCHIVE:"BLOG_ARCHIVE",GROUPS_PAGE:"GROUPS_PAGE",GROUPS_POST:"GROUPS_POST",EVENTS_PAGE:"EVENTS_PAGE",CHALLENGES_PAGE:"CHALLENGES_PAGE",SEARCH_PAGE:"SEARCH_PAGE",BOOKINGS_SERVICE:"BOOKINGS_SERVICE",BOOKINGS_CALENDAR:"BOOKINGS_CALENDAR",BOOKINGS_FORM:"BOOKINGS_FORM",BREADCRUMBS_COMPONENT:"BREADCRUMBS_COMPONENT",BLOG_HASHTAGS:"BLOG_HASHTAGS",RESTAURANTS_ORDER_PAGE:"RESTAURANTS_ORDER_PAGE",MEMBERS_AREA_PROFILE:"MEMBERS_AREA_PROFILE",VIDEO_COMPONENT:"VIDEO_COMPONENT",PORTFOLIO_COLLECTIONS:"PORTFOLIO_COLLECTIONS",PORTFOLIO_PROJECTS:"PORTFOLIO_PROJECTS",GIFT_CARD:"GIFT_CARD",SCHEDULE_PAGE:"SCHEDULE_PAGE",WIX_DATA_PAGE_ITEM:"WIX_DATA_PAGE_ITEM",REVIEWS_COMPONENT:"REVIEWS_COMPONENT",STORES_CATEGORY:"STORES_CATEGORY"}},5965:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RICH_CONTENT=t.WIX_GROUPS=t.WIX_CHALLENGES=t.WIX_FORMS=t.WIX_FAQ=t.WIX_SITE_SEARCH=t.WIX_MUSIC=t.BANDSINTOWN=t.WIX_PORTFOLIO=t.WIX_PRO_GALLERY=t.WIX_PHOTO_ALBUMS=t.WIX_HOTELS_RUNNER=t.WIX_VIDEO=t.WIX_GET_SUBSCRIBERS=t.INSTAGRAM_FEED=t.DEVIANTART_FEED=t.WIX_CHAT=t.WIX_RESTAURANTS_MENUS=t.WIX_RESTAURANTS_ORDERS=t.WIX_RESERVATIONS=t.NOTIFICATIONS=t.META_SITE=t.MEMBERS=t.MEMBERS_AREA=t.WIX_NEW_STORES=t.WIX_STORES=t.WIX_ECOM=t.PRICING_PLANS=t.WIX_FORUM=t.WIX_BOOKINGS=t.WIX_EVENTS=t.WIX_BLOG=t.WIX_HOTELS=t.ADMIN_PAGES=t.DASHBOARD_SALES=t.DASHBOARD_SUGGESTIONS=t.DASHBOARD_SETUP=t.BUSINESS_DASHBOARD=t.WIX_CODE_PLATFORM_VISIBILITY=t.WIX_ACCESSIBILITY_WIZARD=t.WIX_CODE_SITE_MONITORING=t.WIX_CODE_SECRETS_MANAGER=t.WIX_CODE_RELEASE_MANAGER=t.CLOUD_DATA_SCHEMA_NOTIFIER=t.OLD_BLOG=t.SITE_MEMBERS=t.DATA_BINDING=t.WIX_CODE_DUPLEXER=t.WIX_CODE_SITE_EXTENSION=t.WIX_CODE=void 0,t.getAppDependencies=t.RESTAURANTS=t.WIX_FILE_SHARE=void 0,t.WIX_CODE="wix-code",t.WIX_CODE_SITE_EXTENSION="CloudSiteExtension",t.WIX_CODE_DUPLEXER="af6d536e-0fc6-428b-a7f9-1d8cd6aa3703",t.DATA_BINDING="dataBinding",t.SITE_MEMBERS="SiteMembers",t.OLD_BLOG="79f391eb-7dfc-4adf-be6e-64434c4838d9",t.CLOUD_DATA_SCHEMA_NOTIFIER="f1fbeff1-05c3-4121-bdb5-75e74b6e9e51",t.WIX_CODE_RELEASE_MANAGER="8c41f3a6-47f7-40be-ad77-02a72cb2ddb3",t.WIX_CODE_SECRETS_MANAGER="4b10fcce-732d-4be3-9d46-801d271acda9",t.WIX_CODE_SITE_MONITORING="675bbcef-18d8-41f5-800e-131ec9e08762",t.WIX_ACCESSIBILITY_WIZARD="9699c03d-5c19-4a7c-a454-e8109a6e43fc",t.WIX_CODE_PLATFORM_VISIBILITY="8048f115-449b-4dab-b0e6-e09d5ffc8199",t.BUSINESS_DASHBOARD="a7597ab5-1ed4-458f-a5c1-5884d5e14281",t.DASHBOARD_SETUP="0750d046-d599-4cfc-9f6b-e9f4af169aa9",t.DASHBOARD_SUGGESTIONS="cead4297-02ee-4c0f-ae07-461f4ba71b3b",t.DASHBOARD_SALES="f95c72b1-84de-48ec-a61b-d96d61315ffe",t.ADMIN_PAGES="1514b01b-cb08-41b4-8582-0a88551ac769",t.WIX_HOTELS="135aad86-9125-6074-7346-29dc6a3c9bcf",t.WIX_BLOG="14bcded7-0066-7c35-14d7-466cb3f09103",t.WIX_EVENTS="140603ad-af8d-84a5-2c80-a0f60cb47351",t.WIX_BOOKINGS="13d21c63-b5ec-5912-8397-c3a5ddb27a97",t.WIX_FORUM="14724f35-6794-cd1a-0244-25fd138f9242",t.PRICING_PLANS="1522827f-c56c-a5c9-2ac9-00f9e6ae12d3",t.WIX_ECOM="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_STORES="1380b703-ce81-ff05-f115-39571d94dfcd",t.WIX_NEW_STORES="215238eb-22a5-4c36-9e7b-e7c08025e04e",t.MEMBERS_AREA="14cc59bc-f0b7-15b8-e1c7-89ce41d0e0c9",t.MEMBERS="14dbefd2-01b4-fb61-32a7-3abd44da4908",t.META_SITE="22bef345-3c5b-4c18-b782-74d4085112ff",t.NOTIFICATIONS="14f25924-5664-31b2-9568-f9c5ed98c9b1",t.WIX_RESERVATIONS="1475ab65-206b-d79a-856d-fa10bdb479ea",t.WIX_RESTAURANTS_ORDERS="13e8d036-5516-6104-b456-c8466db39542",t.WIX_RESTAURANTS_MENUS="13c1402c-27f2-d4ab-7463-ee7c89e07578",t.WIX_CHAT="14517e1a-3ff0-af98-408e-2bd6953c36a2",t.DEVIANTART_FEED="7d297b79-baed-46d7-ac58-4bd68dcb70d0",t.INSTAGRAM_FEED="14635256-b183-1c71-a4d2-f55179b80e8a",t.WIX_GET_SUBSCRIBERS="1375baa8-8eca-5659-ce9d-455b2009250d",t.WIX_VIDEO="14409595-f076-4753-8303-9a86f9f71469",t.WIX_HOTELS_RUNNER="826670ba-3a6b-4157-ac72-7c4fca9ce220",t.WIX_PHOTO_ALBUMS="13ff8629-c1fc-e289-e81f-bc8c8968e9d6",t.WIX_PRO_GALLERY="14271d6f-ba62-d045-549b-ab972ae1f70e",t.WIX_PORTFOLIO="d90652a2-f5a1-4c7c-84c4-d4cdcc41f130",t.BANDSINTOWN="1405ef82-0ee0-65fb-88a1-2f172aa3573c",t.WIX_MUSIC="13bb5d67-1add-e770-a71f-001277e17c57",t.WIX_SITE_SEARCH="1484cb44-49cd-5b39-9681-75188ab429de",t.WIX_FAQ="14c92d28-031e-7910-c9a8-a670011e062d",t.WIX_FORMS="14ce1214-b278-a7e4-1373-00cebd1bef7c",t.WIX_CHALLENGES="2936472a-a1ed-4ae5-9f71-614313a9f4e7",t.WIX_GROUPS="148c2287-c669-d849-d153-463c7486a694",t.RICH_CONTENT="949cfcc9-2a3f-4a96-bd6c-11d9d82763a4",t.WIX_FILE_SHARE="1537b24e-29d1-6d8f-b8e1-d6860f2f70b9",t.RESTAURANTS="9142e27e-2e30-4948-ad8f-7e128939efc4";var r={};t.getAppDependencies=function(e){return r[e]||[]}},9540:function(e){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}var r="User",n="Error",o="EDM",a=function(e,r){e&&"object"===t(e)&&(e.errorGroup=r)};e.exports={markUserError:function(e){return a(e,r)},isUserError:function(e){return e&&e.errorGroup===r},markAppError:function(e){return a(e,n)},isAppError:function(e){return e&&e.errorGroup===n},markEdmError:function(e){return a(e,o)},isEdmError:function(e){return e&&e.errorGroup===o},markError:a,isMarked:function(e){return!!e&&void 0!==e.errorGroup},USER_ERROR_GROUP:r,APP_ERROR_GROUP:n,EDM_ERROR_GROUP:o,UNKNOWN_ERROR_GROUP:"Unknown"}},3164:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var d=r(9540),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(u,e);var t,r,n,c=s(u);function u(){var e;a(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e=c.call.apply(c,[this].concat(r)),Error.captureStackTrace&&Error.captureStackTrace(l(e),e.constructor),e.name=u.name,d.markUserError(l(e)),e}return t=u,r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));e.exports={UserCodeError:p}},3065:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(9540),s=r(3164);e.exports=o(o({},s),i)},5882:function(e,t,r){"use strict";t.PL=t.ah=void 0;var n=r(4725);Object.defineProperty(t,"ah",{enumerable:!0,get:function(){return n.convertToCustomFormat}}),Object.defineProperty(t,"PL",{enumerable:!0,get:function(){return n.convertFromCustomFormat}});var o=r(6658)},4455:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertersComposer=void 0;var n=r(1561),o=function(e){return null!==e&&"object"==typeof e},a=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._converters=e}return e.prototype.convertToCustomFormat=function(e,t,r){var n;if(void 0===t&&(t=new Set),void 0===r&&(r=!1),o(e)){if(t.has(e))throw new TypeError("Converting circular structure to JSON");t.add(e)}if(Array.isArray(e))return this._convertArray(e,t);var a=null===(n=this._findConverterToCustomFormat(e))||void 0===n?void 0:n.convertToCustomFormat(e,r);return o(e)?this._convertObject(a,e,t):a},e.prototype.convertFromCustomFormat=function(e){var t,r=this,a=e;return Array.isArray(e)?a=e.map((function(e){return r.convertFromCustomFormat(e)})):o(e)&&(a=(0,n.mapValues)(e,this.convertFromCustomFormat.bind(this))),null===(t=this._findConverterFromCustomFormat(a))||void 0===t?void 0:t.convertFromCustomFormat(a)},e.prototype._convertObject=function(e,t,r){var o,a=this;return o="function"==typeof e.toJSON?(0,n.mapValues)(e.toJSON(),(function(e){return a.convertToCustomFormat(e,r)})):(0,n.mapValues)(e,(function(e){return a.convertToCustomFormat(e,r)})),r.delete(t),o},e.prototype._convertArray=function(e,t){var r=this,n=e.map((function(e){return r.convertToCustomFormat(e,t,!0)}));return t.delete(e),n},e.prototype._findConverterFromCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertFromCustomFormat(e)}))},e.prototype._findConverterToCustomFormat=function(e){return this._converters.find((function(t){return t.canConvertToCustomFormat(e)}))},e}();t.ConvertersComposer=a},5362:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(e){return e instanceof Date},e.prototype.convertToCustomFormat=function(e){return{$date:e.toISOString()}},e.prototype.canConvertFromCustomFormat=function(e){return this._isObjectWith$Date(e)&&"string"==typeof e.$date&&(t=e.$date,!Number.isNaN(Date.parse(t)));var t},e.prototype.convertFromCustomFormat=function(e){return new Date(e.$date)},e.prototype._isObjectWith$Date=function(e){return!!e&&"object"==typeof e&&"$date"in e},e}();t.DateConverter=r},5574:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConverter=void 0;var r=function(){function e(){}return e.prototype.canConvertToCustomFormat=function(){return!0},e.prototype.convertToCustomFormat=function(e,t){return t&&void 0===e?null:e},e.prototype.canConvertFromCustomFormat=function(){return!0},e.prototype.convertFromCustomFormat=function(e){return e},e}();t.DefaultConverter=r},4725:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFromCustomFormat=t.convertToCustomFormat=void 0;var n=r(4455),o=r(5362),a=r(5574),i=new n.ConvertersComposer(new o.DateConverter,new a.DefaultConverter);t.convertToCustomFormat=function(e){return i.convertToCustomFormat(e)};t.convertFromCustomFormat=function(e){return i.convertFromCustomFormat(e)}},1561:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapValues=void 0,t.mapValues=function(e,t){var r={};return Object.keys(e).forEach((function(n){var o=t(e[n]);void 0!==o&&(r[n]=o)})),r}},6658:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackendPackageNameFromImportName=t.generateBackendPackageWebMethodUrl=t.generatePackageWebMethodUrl=t.exceptionToWebMethodPayload=t.resultToWebMethodPayload=void 0;var n=r(4725);t.resultToWebMethodPayload=function(e,t){var r=t?JSON.parse(JSON.stringify(e,t)):(0,n.convertToCustomFormat)(e);return void 0===r?{}:{result:r}};t.exceptionToWebMethodPayload=function(e,t,r){return void 0===t&&(t=function(e){return e}),void 0===r&&(r=function(e){return""}),{result:e instanceof Error?{message:t(e.message),name:e.name,stack:r(e.stack),code:e.code,_elementoryError:!0}:e,exception:!0}};var o=function(e,t){return"/_webMethods/packages/".concat(encodeURIComponent(e),"/").concat(t,".ajax")};t.generatePackageWebMethodUrl=o;t.generateBackendPackageWebMethodUrl=function(e,t){return o("".concat(e,"-backend"),t)};t.getBackendPackageNameFromImportName=function(e){return"".concat(e,"-backend")}},4479:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="currentUser";e.exports.X=e=>n(e)&&e[o]===a},8031:function(e,t,r){"use strict";const n=r(7030),{DATA_BINDING:o}=r(5965),a=r(1290),i=o;e.exports.X=e=>n(e)&&e[a]===i},1290:function(e){"use strict";e.exports="@resolver"},3878:function(e,t,r){"use strict";const n=r(7030),o=r(1290),a="userInput";e.exports.X=e=>n(e)&&e[o]===a},8582:function(e){"use strict";e.exports=(e,t)=>t.reduce(((e,t)=>e.chain((e=>t.map((t=>Array.isArray(t)?e.concat([t]):e.concat(t)))))),e.of([]))},7538:function(e){e.exports.l={COMPONENT:"COMPONENT_SCOPE",GLOBAL:"GLOBAL_SCOPE"}},477:function(e,t,r){const n=r(4169),o=r(3297),a=r(6939);e.exports={union:n,Result:o,Maybe:a}},6939:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,orElse:()=>t(e),filter:n=>n(e)?t(e):r()}),r=()=>({map:()=>r(),chain:()=>r(),fold:e=>e(),getOrElse:e=>e,orElse:e=>e(),filter:()=>r()}),n={Just:t,Nothing:r,fromNullable:e=>null!=e?t(e):r(),of:e=>t(e)};e.exports=n},3297:function(e){"use strict";const t=e=>({map:r=>t(r(e)),chain:t=>t(e),fold:(t,r)=>r(e),getOrElse:()=>e,merge:()=>e}),r=e=>({map:()=>r(e),chain:()=>r(e),fold:t=>t(e),getOrElse:e=>e,merge:()=>e}),n={Ok:t,Error:r,try:e=>{try{return t(e())}catch(e){return r(e)}},fromNullable:(e,n)=>null!=e?t(e):r(n),fromMaybe:(e,n)=>e.fold((()=>r(n)),(e=>t(e))),of:e=>t(e)};e.exports=n},4169:function(e){const t=Symbol.for("union-type-any-symbol"),r=e=>r=>{const n=Object.keys(r);for(const t of n)if(t===e.name)return r[t](e.payload);if(r[t])return r[t]();throw new Error(`Variant "${e.name}" not covered in pattern with keys [${n}].\nThis could mean you did not include all variants in your Union's matchWith function.`)},n=(e,t,n={})=>Object.keys(t).reduce(((o,a)=>(o[a]=((e,t,n,o)=>{const a=Symbol(`[${e}:${t}]`),i=(...e)=>{const i=n(...e),s={matchWith:r({name:t,payload:i}),toString:()=>t,[a]:!0};return Object.keys(o).forEach((e=>{s[e]=o[e](s)})),s};return i.hasInstance=e=>e&&!0===e[a],i})(e,a,t[a],n),o)),{});n.any=t,e.exports=n},3121:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultMaxPageSize=void 0;const n=r(3810);t.DefaultMaxPageSize={[n.PagingMode.Offset]:1e3,[n.PagingMode.Cursor]:100}},2295:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AllowedFilterOperator=t.FieldType=void 0,function(e){e.number="number",e.text="text",e.image="image",e.boolean="boolean",e.document="document",e.url="url",e.richText="richtext",e.date="date",e.dateTime="datetime",e.video="video",e.reference="reference",e.multiReference="multi-reference",e.pageLink="pagelink",e.object="object",e.mediaGallery="media-gallery",e.address="address",e.stringArray="array<string>",e.color="color",e.audio="audio",e.time="time",e.array="array",e.richContent="rich-content",e.language="language",e.documentArray="array<document>",e.any="any"}(t.FieldType||(t.FieldType={})),function(e){e.eq="eq",e.ne="ne",e.lt="lt",e.lte="lte",e.gt="gt",e.gte="gte",e.hasSome="hasSome",e.hasAll="hasAll",e.contains="contains",e.startsWith="startsWith",e.endsWith="endsWith",e.urlized="urlized"}(t.AllowedFilterOperator||(t.AllowedFilterOperator={}))},2722:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Operator=void 0,function(e){e.and="$and",e.or="$or",e.not="$not",e.eq="$eq",e.ne="$ne",e.lt="$lt",e.lte="$lte",e.gt="$gt",e.gte="$gte",e.hasSome="$hasSome",e.hasAll="$hasAll",e.contains="$contains",e.startsWith="$startsWith",e.endsWith="$endsWith",e.urlized="$urlized"}(t.Operator||(t.Operator={}))},4361:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(9166),t),o(r(2722),t),o(r(2295),t),o(r(3530),t),o(r(3810),t),o(r(47),t),o(r(3121),t)},9166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Direction=void 0,function(e){e.asc="asc",e.desc="desc"}(t.Direction||(t.Direction={}))},3810:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagingMode=void 0,function(e){e.Offset="OFFSET",e.Cursor="CURSOR"}(t.PagingMode||(t.PagingMode={}))},47:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlizedFormat=t.URLIZED_PLUGIN_ID=t.SINGLE_ITEM_ID=t.SINGLES_PLUGIN_ID=t.GRID_APPLESS_PLUGIN_ID=t.PublishingStatus=t.DRAFT_DATE_FIELD_KEY=t.PUBLISH_DATE_FIELD_KEY=t.PUBLISH_STATUS_FIELD_KEY=t.PUBLISHING_PLUGIN_ID=void 0,t.PUBLISHING_PLUGIN_ID="publishing",t.PUBLISH_STATUS_FIELD_KEY="_publishStatus",t.PUBLISH_DATE_FIELD_KEY="_publishDate",t.DRAFT_DATE_FIELD_KEY="_draftDate",function(e){e.DRAFT="DRAFT",e.PUBLISHED="PUBLISHED"}(t.PublishingStatus||(t.PublishingStatus={})),t.GRID_APPLESS_PLUGIN_ID="gridAppless",t.SINGLES_PLUGIN_ID="singleItem",t.SINGLE_ITEM_ID="SINGLE_ITEM_ID",t.URLIZED_PLUGIN_ID="urlized",function(e){e.PLAIN="plain",e.ORIGINAL="original"}(t.UrlizedFormat||(t.UrlizedFormat={}))},3530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=t.PermissionRole=t.DataOperation=void 0,function(e){e.aggregate="aggregate",e.bulkInsert="bulkInsert",e.bulkRemove="bulkRemove",e.bulkSave="bulkSave",e.bulkUpdate="bulkUpdate",e.count="count",e.distinct="distinct",e.find="find",e.get="get",e.insert="insert",e.insertReference="insertReference",e.isReferenced="isReferenced",e.queryReferenced="queryReferenced",e.remove="remove",e.removeReference="removeReference",e.replaceReferences="replaceReferences",e.save="save",e.truncate="truncate",e.update="update"}(t.DataOperation||(t.DataOperation={})),function(e){e.anyone="anyone",e.siteMember="siteMember",e.siteMemberAuthor="siteMemberAuthor",e.admin="admin"}(t.PermissionRole||(t.PermissionRole={})),function(e){e.driver="driver",e.docstore="docstore",e.app="app",e.external="external",e.dynamicApplication="dynamicApplication",e.staticAppSchema="staticAppSchema"}(t.Storage||(t.Storage={}))},5675:function(e){var t=Object.prototype.toString;e.exports=function(e){var r=typeof e;return"undefined"===r?"undefined":null===e?"null":!0===e||!1===e||e instanceof Boolean?"boolean":"string"===r||e instanceof String?"string":"number"===r||e instanceof Number?"number":"function"===r||e instanceof Function?void 0!==e.constructor.name&&"Generator"===e.constructor.name.slice(0,9)?"generatorfunction":"function":void 0!==Array.isArray&&Array.isArray(e)?"array":e instanceof RegExp?"regexp":e instanceof Date?"date":"[object RegExp]"===(r=t.call(e))?"regexp":"[object Date]"===r?"date":"[object Arguments]"===r?"arguments":"[object Error]"===r?"error":"[object Promise]"===r?"promise":function(e){return e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}(e)?"buffer":"[object Set]"===r?"set":"[object WeakSet]"===r?"weakset":"[object Map]"===r?"map":"[object WeakMap]"===r?"weakmap":"[object Symbol]"===r?"symbol":"[object Map Iterator]"===r?"mapiterator":"[object Set Iterator]"===r?"setiterator":"[object String Iterator]"===r?"stringiterator":"[object Array Iterator]"===r?"arrayiterator":"[object Int8Array]"===r?"int8array":"[object Uint8Array]"===r?"uint8array":"[object Uint8ClampedArray]"===r?"uint8clampedarray":"[object Int16Array]"===r?"int16array":"[object Uint16Array]"===r?"uint16array":"[object Int32Array]"===r?"int32array":"[object Uint32Array]"===r?"uint32array":"[object Float32Array]"===r?"float32array":"[object Float64Array]"===r?"float64array":"object"}},5909:function(){if("function"!=typeof self.queueMicrotask&&(self.queueMicrotask=function(e){Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}),"function"!=typeof Array.prototype.at){const e=Reflect.getPrototypeOf(Int8Array);for(const t of[Array,String,e])Object.defineProperty(t.prototype,"at",{value:function(e){if((e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this[e]},writable:!0,enumerable:!1,configurable:!0})}},5554:function(e){"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],o(r),o(n))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var o=a(r[0]);o!==r[0]&&(t[r[0]]=o)}r=n.exec(e)}t["%C2"]="\ufffd";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},857:function(e,t,r){var n=r(7772).Symbol;e.exports=n},3366:function(e,t,r){var n=r(857),o=r(2107),a=r(7157),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?o(e):a(e)}},1242:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},7353:function(e,t,r){var n=r(241)(Object.getPrototypeOf,Object);e.exports=n},2107:function(e,t,r){var n=r(857),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var n=r(1242),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},7030:function(e,t,r){var n=r(3366),o=r(7353),a=r(5125),i=Function.prototype,s=Object.prototype,c=i.toString,l=s.hasOwnProperty,u=c.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=o(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&c.call(r)==u}},7320:function(e){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var i,s,c=o(e),l=1;l<arguments.length;l++){for(var u in i=Object(arguments[l]))r.call(i,u)&&(c[u]=i[u]);if(t){s=t(i);for(var d=0;d<s.length;d++)n.call(i,s[d])&&(c[s[d]]=i[s[d]])}}return c}},4126:function(e,t,r){"use strict";var n=r(2938),o=r(7320),a=r(5554);function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function c(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function l(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=o({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:a(i),r(a(o),i,n)})),Object.keys(n).sort().reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))):n}t.extract=c,t.parse=l,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:l(c(e),t)}}},2938:function(e){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},7375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,a,i=[];for(a in"string"!=typeof t&&(t="?"),e)if(r.call(e,a)){if((n=e[a])||null!=n&&!isNaN(n)||(n=""),a=o(a),n=o(n),null===a||null===n)continue;i.push(a+"="+n)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,o={};t=r.exec(e);){var a=n(t[1]),i=n(t[2]);null===a||null===i||a in o||(o[a]=i)}return o}},4438:function(e){"use strict";var t=function(e){return null!=e&&"function"==typeof e.run&&"boolean"==typeof e.isQueued&&(!e.resultActionCreator||"function"==typeof e.resultActionCreator)};e.exports={isEffect:t,isImmediateEffect:function(e){return t(e)&&!e.isQueued},isQueuedEffect:function(e){return t(e)&&e.isQueued}}},6286:function(e,t,r){"use strict";var n=r(6356);e.exports={createMiddleware:n}},6356:function(e,t,r){"use strict";var n=r(4520).isPromise,o=r(8620),a=o.sequence,i=o.try_,s=r(5676),c=r(4438),l=c.isEffect,u=c.isImmediateEffect,d=c.isQueuedEffect,p=function(e){return function(t){return e.push(t),function(){var r=e.indexOf(t);r>=0&&e.splice(r,1)}}};e.exports=function(){var e=[],t=[],r=Promise.resolve();return{middleware:function(o){return function(c){return function(p){var f=function(e){var t=i((function(){return e.run()}));return t.fold((function(r){var n=e.resultActionCreator?o.dispatch(e.resultActionCreator(!0,r)):Promise.resolve();return[t,n]}),(function(r){if(n(r)){var a=r.then((function(t){return e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,t)):Promise.resolve()}),(function(t){throw e.resultActionCreator&&o.dispatch(e.resultActionCreator(!0,t)).catch((function(){})),t}));return[t,a]}var i=e.resultActionCreator?o.dispatch(e.resultActionCreator(!1,r)):Promise.resolve();return[t,i]}))},h=function(){var e=void 0,n=new Promise((function(t){return e=t})),o=new Promise((function(e,o){var a=r=r.then((function(){return n})).then(function(e,t){return function(r){if(r.length>0){var n=r.filter(d).map(f);return Promise.all(n.map((function(e){return e[1]}))).then((function(){return e()}),t),Promise.all(n.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){return Promise.reject(e)}),(function(e){return e}))}))).catch(t)}return e(),Promise.resolve()}}(e,o),o).catch(o).then((function(){a===r&&t.slice().forEach((function(e){return e()}))}))}));return{promise:o,trigger:e}},m=function(e){var t=h(),r=t.promise,n=t.trigger;return i((function(){return function(e){var t=e.filter(u).map(f);return t.map((function(e){return e[0]})).map((function(e){return e.fold((function(e){throw e}),(function(e){return e}))})),t.map((function(e){return e[1]})).map((function(e){return e.catch((function(){}))})),e.filter(d)}(e)})).fold((function(e){throw n([]),e}),(function(e){return n(e),r}))},g=o.getState(),y=c(p),v=o.getState();if(g!==v){var I=s(g,v);return a(e.slice().map((function(e){return i((function(){return e(I)||[]}))}))).fold((function(e){throw e}),(function(e){return m(e.filter(l))}))}return Promise.resolve(y)}}},subscribe:p(e),onIdle:p(t)}}},8620:function(e){"use strict";var t=function(){},r=function(e,r){return e.fold(r.Error||t,r.Ok||t)},n=function(e){return{map:function(e){return this},fold:function(t,r){return t(e)},chain:function(e){return this},match:function(e){return r(this,e)},value:e}},o=function e(t){return{map:function(r){return e(r(t))},fold:function(e,r){return r(t)},chain:function(e){return e(t)},match:function(e){return r(this,e)},value:t}},a={Left:n,Right:o};e.exports={Either:a,sequence:function(e){return e.reduce((function(e,t){return e.chain((function(e){return t.map((function(t){return e.concat(t)}))}))}),o([]))},try_:function(e){try{return o(e())}catch(e){return n(e)}}}},4520:function(e){"use strict";e.exports.isPromise=function(e){return null!=e&&"function"==typeof e.then}},5676:function(e){"use strict";e.exports=function(e,t){var r={from:e,to:t,hasChanged:function(r){return r(e)!==r(t)},hasChangedToMatch:function(e,n){return r.hasChanged(e)&&n(e(t))},hasChangedToTrue:function(e){return r.hasChangedToMatch(e,(function(e){return!0===e}))},hasChangedToFalse:function(e){return r.hasChangedToMatch(e,(function(e){return!1===e}))},hasChangedToNull:function(e){return r.hasChangedToMatch(e,(function(e){return null===e}))},hasChangedToNotNull:function(e){return r.hasChangedToMatch(e,(function(e){return null!==e}))}};return r}},7245:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},5174:function(e){var t=Object.prototype.hasOwnProperty;function r(e){return"[Throws: "+(e?e.message:"?")+"]"}function n(e){var n=[];return function e(o){if(null===o||"object"!=typeof o)return o;if(-1!==n.indexOf(o))return"[Circular]";if(n.push(o),"function"==typeof o.toJSON)try{var a=e(o.toJSON());return n.pop(),a}catch(e){return r(e)}if(Array.isArray(o)){var i=o.map(e);return n.pop(),i}var s=Object.keys(o).reduce((function(n,a){return n[a]=e(function(e,n){if(t.call(e,n))try{return e[n]}catch(e){return r(e)}return e[n]}(o,a)),n}),{});return n.pop(),s}(e)}e.exports=function(e,t,r){return JSON.stringify(n(e),t,r)},e.exports.ensureProperties=n},7288:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}}),e=r.hmd(e);var n=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r.g?r.g:e)},4846:function(e,t,r){"use strict";var n=r(7245),o=r(7375),a=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,i=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(a,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},o={},a=typeof(e=e||n);if("blob:"===e.protocol)o=new y(unescape(e.pathname),{});else if("string"===a)for(t in o=new y(e,{}),f)delete o[t];else if("object"===a){for(t in e)t in f||(o[t]=e[t]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(i,""),t=t||{};var r,n=l.exec(e),o=n[1]?n[1].toLowerCase():"",a=!!n[2],s=!!n[3],c=0;return a?s?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):s?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===o?c>=2&&(r=r.slice(2)):m(o)?r=n[4]:o?a&&(r=r.slice(2)):c>=2&&m(t.protocol)&&(r=n[4]),{protocol:o,slashes:a||m(o),slashesCount:c,rest:r}}function y(e,t,r){if(e=(e=d(e)).replace(i,""),!(this instanceof y))return new y(e,t,r);var a,s,c,l,f,v,I=p.slice(),w=typeof t,E=this,_=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),a=!(s=g(e||"",t=h(t))).protocol&&!s.slashes,E.slashes=s.slashes||a&&t.slashes,E.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||u.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(E.protocol)))&&(I[3]=[/(.*)/,"pathname"]);_<I.length;_++)"function"!=typeof(l=I[_])?(c=l[0],v=l[1],c!=c?E[v]=e:"string"==typeof c?~(f="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof l[2]?(E[v]=e.slice(0,f),e=e.slice(f+l[2])):(E[v]=e.slice(f),e=e.slice(0,f))):(f=c.exec(e))&&(E[v]=f[1],e=e.slice(0,f.index)),E[v]=E[v]||a&&l[3]&&t[v]||"",l[4]&&(E[v]=E[v].toLowerCase())):e=l(e,E);r&&(E.query=r(E.query)),a&&t.slashes&&"/"!==E.pathname.charAt(0)&&(""!==E.pathname||""!==t.pathname)&&(E.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],a=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(a=!0),r.splice(n,1),i--);return a&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(E.pathname,t.pathname)),"/"!==E.pathname.charAt(0)&&m(E.protocol)&&(E.pathname="/"+E.pathname),n(E.port,E.protocol)||(E.host=E.hostname,E.port=""),E.username=E.password="",E.auth&&(~(f=E.auth.indexOf(":"))?(E.username=E.auth.slice(0,f),E.username=encodeURIComponent(decodeURIComponent(E.username)),E.password=E.auth.slice(f+1),E.password=encodeURIComponent(decodeURIComponent(E.password))):E.username=encodeURIComponent(decodeURIComponent(E.auth)),E.auth=E.password?E.username+":"+E.password:E.username),E.origin="file:"!==E.protocol&&m(E.protocol)&&E.host?E.protocol+"//"+E.host:"null",E.href=E.toString()}y.prototype={set:function(e,t,r){var a=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),a[e]=t;break;case"port":a[e]=t,n(t,a.protocol)?t&&(a.host=a.hostname+":"+t):(a.host=a.hostname,a[e]="");break;case"hostname":a[e]=t,a.port&&(t+=":"+a.port),a.host=t;break;case"host":a[e]=t,c.test(t)?(t=t.split(":"),a.port=t.pop(),a.hostname=t.join(":")):(a.hostname=t,a.port="");break;case"protocol":a.protocol=t.toLowerCase(),a.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";a[e]=t.charAt(0)!==i?i+t:t}else a[e]=t;break;case"username":case"password":a[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(a.username=t.slice(0,s),a.username=encodeURIComponent(decodeURIComponent(a.username)),a.password=t.slice(s+1),a.password=encodeURIComponent(decodeURIComponent(a.password))):a.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<p.length;l++){var u=p[l];u[4]&&(a[u[1]]=a[u[1]].toLowerCase())}return a.auth=a.password?a.username+":"+a.password:a.username,a.origin="file:"!==a.protocol&&m(a.protocol)&&a.host?a.protocol+"//"+a.host:"null",a.href=a.toString(),a},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.host,a=r.protocol;a&&":"!==a.charAt(a.length-1)&&(a+=":");var i=a+(r.protocol&&r.slashes||m(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):"file:"!==r.protocol&&m(r.protocol)&&!n&&"/"!==r.pathname&&(i+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(i+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(i+=r.hash),i}},y.extractProtocol=g,y.location=h,y.trimLeft=d,y.qs=o,e.exports=y},8022:function(e,t,r){var n=r(4481),o=r(6426),a=o;a.v1=n,a.v4=o,e.exports=a},8725:function(e){for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},9157:function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},4481:function(e,t,r){var n,o,a=r(9157),i=r(8725),s=0,c=0;e.exports=function(e,t,r){var l=t&&r||0,u=t||[],d=(e=e||{}).node||n,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=a();null==d&&(d=n=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),m=void 0!==e.nsecs?e.nsecs:c+1,g=h-s+(m-c)/1e4;if(g<0&&void 0===e.clockseq&&(p=p+1&16383),(g<0||h>s)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,c=m,o=p;var y=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;u[l++]=y>>>24&255,u[l++]=y>>>16&255,u[l++]=y>>>8&255,u[l++]=255&y;var v=h/4294967296*1e4&268435455;u[l++]=v>>>8&255,u[l++]=255&v,u[l++]=v>>>24&15|16,u[l++]=v>>>16&255,u[l++]=p>>>8|128,u[l++]=255&p;for(var I=0;I<6;++I)u[l+I]=d[I];return t||i(u)}},6426:function(e,t,r){var n=r(9157),o=r(8725);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}},9479:function(t){"use strict";t.exports=e},7544:function(e){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.__esModule=!0,e.exports.default=e.exports},2440:function(e){e.exports=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}},e.exports.__esModule=!0,e.exports.default=e.exports},2132:function(e){e.exports=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7481:function(e,t,r){var n=r(7544),o=r(2132);e.exports=function(e,t){var r=o(e,t,"get");return n(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports},4070:function(e,t,r){var n=r(2440),o=r(2132);e.exports=function(e,t,r){var a=o(e,t,"set");return n(e,a,r),r},e.exports.__esModule=!0,e.exports.default=e.exports},6290:function(e,t,r){var n=r(7739);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},8064:function(e,t,r){var n=r(7425).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},7739:function(e,t,r){var n=r(7425).default,o=r(8064);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},7425:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},r=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,r({}),r([]),r(r)];for(var s=2&n&&e;"object"==typeof s&&!~t.indexOf(s);s=r(s))Object.getOwnPropertyNames(s).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},a.d(o,i),o},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return function(){"use strict";a.r(i),a.d(i,{createControllers:function(){return am},initAppForPage:function(){return om}});var e={};a.r(e),a.d(e,{READ:function(){return Ye},READ_WRITE:function(){return Xe},WRITE:function(){return Je}});var t={};a.r(t),a.d(t,{DATASET:function(){return jr},ROUTER_DATASET:function(){return Vr}});var r={};a.r(r),a.d(r,{CMEditor:function(){return zo},CMMyAccount:function(){return $o},DBSMEditor:function(){return Ho},DBSMEditorNext:function(){return Qo},DBSMViewer:function(){return Xo},UserErrors:function(){return Yo},WixData:function(){return Jo}});var n=a(6290),o=a.n(n),s=a(7481),c=a.n(s),l=a(4070),u=a.n(l),d=a(5965);const p={"tpa/addVariantToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(d.WIX_STORES),s="Mobile"===n.formFactor;if(t.managedVariant)await i.cart.addProducts([{productId:t.productId,quantity:1,options:{choices:t.choices}}]),s?await i.navigate.toCart():i.cart.showMinicart();else if(s){const e=await i.product.getRelativeProductUrl({id:t.productId});null===(r=o.to)||void 0===r||r.call(o,e)}else await i.product.openQuickView(t.productId)},"tpa/addProductToCart":async({wixSdk:e,currentItem:t})=>{var r;const{window:n,location:o,site:a}=e,i=await a.getPublicAPI(d.WIX_STORES),s="Mobile"===n.formFactor;var c;(c=t).customFields&&c.customFields.length>0||Object.keys(c.productOptions||{}).length>0?s?null===(r=o.to)||void 0===r||r.call(o,t.productPageUrl):await i.product.openQuickView(t._id):(await i.cart.addProducts([{productId:t._id,quantity:1}]),s?await i.navigate.toCart():i.cart.showMinicart())},"tpa/quicklyViewProduct":async({wixSdk:e,currentItem:t})=>{const r=await e.site.getPublicAPI(d.WIX_STORES);await r.product.openQuickView(t._id)},"tpa/purchasePricingPlan":async({wixSdk:e,currentItem:t})=>{await e["pricing-plans"].checkout.startOnlinePurchase(t._id)}};a(5909);var f=a(4846),h=a.n(f);var m=a(4361);const{text:g,boolean:y,number:v,dateTime:I,date:w,richText:E,url:_,reference:T,stringArray:S}=m.FieldType,R=[g,E,y,I,w,T,v,_,S];var b=a(8022),O=a.n(b);const C=({httpClient:e})=>({reportFormEventToAutomationCreator:()=>async({detailedEventPayload:t,eventUTCTime:r})=>{const n={eventIdentifier:{eventUniqueId:O().v4(),eventType:"form/form/code",sourceUniqueId:"675bbcef-18d8-41f5-800e-131ec9e08762"},eventUTCTime:r,detailedEventPayload:t};await e.post("/_api/action-triggers-server/v1/report-event",n)}});class D extends Error{static withMessage(e){return class extends(this){constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];super(e,...r)}}}static with(e){let{message:t,options:r}=e;return class extends(this){constructor(e){super(t||e instanceof String&&e,{...r,...e instanceof Object?e:{}})}}}constructor(e,t,r){void 0===r&&(r="DataBindingError"),super(e,t);const{cause:n,...o}=t||{};this.name=r,this.options=o,this.cause||(this.cause=n)}toString(){return this.cause?super.toString()+"\nCaused by "+this.cause.toString():super.toString()}}o()(D,"scopes",{USER_SCOPE:"userCodeZone",APPLICATION_SCOPE:"applicationCodeZone",SERVER_SCOPE:"wixDataCodeZone"});class P extends D{constructor(e,t){super(e,t,"AppError"),this.scope=D.scopes.APPLICATION_SCOPE}}class N extends D{constructor(e,t,r){void 0===r&&(r="UserError"),super(e,t,r),this.scope=D.scopes.USER_SCOPE}}class A extends N{constructor(e,t){const{code:r,...n}=t;super(e,n,"DatasetError"),this.code=r}}class x extends N{constructor(e,t){super(e,t,"ServerValidationError")}}o()(x,"codes",["WD_SITE_IN_TEMPLATE_MODE","WD_PERMISSION_DENIED","WD_COLLECTION_DELETED","WD_VALIDATION_FAILED"]);class M extends D{constructor(e,t){const{code:r,...n}=t;super(e,n,"ServerError"),this.scope=D.scopes.SERVER_SCOPE,this.code=r}}class F extends D{constructor(e){super("Async operation error wasn't handled",e,"UnhandledPromiseRejection")}}function L(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var U=new WeakMap;const k=new class{constructor(){L(this,U,{writable:!0,value:new Proxy({},{get(e,t){if(e[t])return e[t];throw new ReferenceError("There is no "+t+" in context. Check if the context has been already set")}})})}set(e){Object.entries(e).forEach((e=>{let[t,r]=e;c()(this,U)[t]=r}))}get(){return c()(this,U)}},j=k.get(),V=k.set.bind(k);function W(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var G=new WeakMap,B=new WeakMap;class q{constructor(e){W(this,G,{writable:!0,value:void 0}),W(this,B,{writable:!0,value:new X}),u()(this,G,e)}dispatch(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return c()(this,B).has(e)?c()(this,B).get(e).reduce(((t,n)=>[...t,j.errorReporting(n,P.with({message:e+" listener failed",options:{extra:c()(this,G)}}))(c()(this,G),...r)]),[]):void 0}subscribe(e,t){return e.constructor===Object?Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return[...e,this.subscribe(r,n)]}),[]):(c()(this,B).getOrDefault(e,new Y).add(t),()=>this.unsubscribe(e,t))}unsubscribe(e,t){return c()(this,B).has(e)&&c()(this,B).get(e).delete(t)}}class z{constructor(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=function(){return t(...arguments),e.promise},e.reject=function(){return r(...arguments),e.promise}})),e}}const $=(e,t)=>function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];try{const r=e(...n);return(null==r?void 0:r.catch)instanceof Function?r.catch((e=>t(e,...n))):r}catch(e){return t(e,...n)}};class H{constructor(e){return null!=e&&e.then?e:{then:t=>t(e)}}}class X extends Map{getOrDefault(e,t){return this.has(e)?this.get(e):this.set(e,t).get(e)}find(e){const[,t]=Array.from(this).find((t=>{let[r,n]=t;return e(n,r,this)}))||[];return t}}class Y extends Set{reduce(e,t){return Array.from(this).reduce(((t,r,n)=>e(t,r,n,this)),t)}}const J="unknown",Q=e=>{const t=e.split("/"),r=t[t.length-3],n=t[t.length-2];if(!/^\d+\.\d+\.\d+$/.test(n))throw new Error(`Invalid version string ${n}`);return{appName:r,version:n}},K=e=>{try{const{appName:t,version:r}=Q(e);return`${t}@${r}`}catch(e){return J}},Z=()=>{const e=new Error;return e.stack?e.stack.toString():""},ee=e=>{const t=Z().match(new RegExp(`https?://.*?${e}.*?.js`));return t?t[0]:""},te="detailsRepeaterRole",re="detailsDatasetRole",ne="filterInputRole",oe="textRole",ae="galleryRole",ie="mediaGalleryRole",se="ratingsDisplayRole",ce="dropdownRole",le="dropdownOptionsRole",ue="MobuiPickerOptionsRole",de="gridRole",pe="datepickerRole",fe="radioGroupRole",he="uploadButtonRole",me="repeaterRole",ge="pageRole",ye="paginationRole",ve="addressInputRole",Ie="googleMapRole",we="timePickerRole",Ee="progressBarRole",_e="selectionTagsOptionsRole",Te="signatureInputRole",Se="richContentRole",Re="userInputFilterDropdownRole",be="userInputFilterCheckboxRole",Oe="userInputFilterRadioGroupRole",Ce="userInputFilterCheckboxGroupRole",De="userInputFilterSelectionTagsRole",Pe="userInputFilterRangeSliderRole",Ne=[Re,be,Oe,Ce,De,Pe],Ae="RESET_ALL",xe=[Re,Oe,Ce,De],Me=new Map([["new","add"]]),Fe="dbsm-viewer-app";function Le(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}class Ue{constructor(e){let{collectionId:t,collectionName:r,componentType:n,datasetId:a,datasetMode:i,datasetType:s,fieldType:c,filteredBy:l,id:u,numberOfResults:p,pageId:f,pageUrl:h,viewMode:m}=e;o()(this,"type",Ue.types.EVENT),o()(this,"event",void 0),this.event={pageId:f,src:79,ver:K(ee(Fe)),app_name:Fe,app_id:d.DATA_BINDING,evid:u,ds_id:a,ds_type:s,mode:i,collection_name:r,collection_id:t,component_type:n,filtered_by:l,field_type:c,number_of_results:p,viewmode:m,page_url:h}}}o()(Ue,"types",{EVENT:"event",ERROR:"error"});class ke extends Ue{constructor(e){let{message:t,code:r}=e;super({}),o()(this,"type",Ue.types.ERROR),this.event={evid:10,dsc:t,errn:t,errc:r||1}}}var je=new WeakMap,Ve=new WeakMap,We=new WeakMap;class Ge{constructor(e,t,r){o()(this,"onStart",(e=>u()(this,je,e))),o()(this,"onEnd",(e=>u()(this,Ve,e))),Le(this,je,{writable:!0,value:()=>{}}),Le(this,Ve,{writable:!0,value:()=>{}}),Le(this,We,{writable:!0,value:{[Ge.types.TRACE]:e=>(c()(this,je).call(this),new H(e()).then((e=>(c()(this,Ve).call(this),e)))),[Ge.types.START]:()=>c()(this,je).call(this),[Ge.types.END]:()=>c()(this,Ve).call(this)}});const{type:n,fn:a}=t instanceof Function?{type:Ge.types.TRACE,fn:t}:{type:t};this.name=e,this.params=r,this.run=()=>c()(this,We)[n](a)}}o()(Ge,"types",{START:"START",END:"END",TRACE:"TRACE"});class Be{static with(e){let{category:t,message:r,level:n,data:o}=e;return class extends(this){constructor(e){let{category:a=t,message:i=r,level:s=n,data:c}=e;super({category:a,message:i,level:s,data:c||o?{...c,...o}:void 0})}}}constructor(e){let{category:t,message:r,level:n="info",data:o}=e;this.event={category:t,message:r,level:n,data:o}}}var qe=new WeakMap,ze=new WeakMap;class $e{static with(e){return class extends(this){constructor(t,r){void 0===r&&(r={}),super(t,{...e,...r})}}}constructor(e,t){o()(this,"messages",[]),Le(this,qe,{writable:!0,value:{[$e.types.COMPONENT.BOUND]:e=>{let{collectionId:t,description:r}=e;return r?["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"':",r]:["[Dataset - Connected] '"+t+"' collection to element '"+this._getComponentPresentation()+"'"]},[$e.types.COMPONENT.FILLED]:e=>{let{collectionId:t,description:r}=e;return["[Dataset - Populated] '"+t+"' collection into element '"+this._getComponentPresentation()+"':",r]},[$e.types.DS_API.CALLED]:e=>{let{methodName:t,args:r}=e;return 0===r.length?["[wix-dataset."+t+"] called"]:["[wix-dataset."+t+"] called with (",JSON.stringify(r),")"]},[$e.types.DS_API.SUCCED]:e=>{let{methodName:t,result:r}=e;return void 0===r?["[wix-dataset."+t+"] returned"]:["[wix-dataset."+t+"] returned with (",JSON.stringify(r),")"]},[$e.types.DS_API.DEPRECATED]:e=>{let{methodName:t,replacementMethodName:r}=e;return["[wix-dataset."+t+"] is deprecated"+(r?"; use [wix-dataset."+r+"] instead":"")]},[$e.types.DS_API.REGISTERED]:e=>{let{methodName:t}=e;return["["+t+" callback registered] on wix-dataset"]},[$e.types.DS_API.TRIGGERED]:e=>{let{eventName:t,eventArgs:r=[]}=e;if(r.length){const e=r.map((e=>e instanceof Error?e.toString():e));return["["+t+" event] triggered on wix-dataset with (",JSON.stringify(e),")"]}return["["+t+" event] triggered on wix-dataset"]}}}),Le(this,ze,{writable:!0,value:{}}),u()(this,ze,t),this.messages=c()(this,qe)[e](t)}_getComponentPresentation(){const{component:{nickname:e,parentRepeater:t}}=c()(this,ze);return t?"#"+t.nickname+".#"+e:"#"+e}}o()($e,"types",{COMPONENT:{BOUND:"COMPONENT_BOUND",FILLED:"COMPONENT_FILLED"},DS_API:{CALLED:"DS_API_CALLED",SUCCED:"DS_API_SUCCED",DEPRECATED:"DS_API_DEPRECATED",REGISTERED:"DS_API_REGISTERED",TRIGGERED:"DS_API_TRIGGERED"}});class He{constructor(e,t){void 0===t&&(t="log"),o()(this,"message",void 0),o()(this,"level",void 0),this.message=e,this.level=t}}const Xe="READ_WRITE",Ye="READ",Je="WRITE";var Qe=(e,t)=>[de,ye].includes(e)||t&&t.properties&&Object.keys(t.properties).length>0,Ke=a(9479),Ze=a(477);const et=Object.keys,tt=(Object.values,Object.entries,{AddressInput:{viewerType:["wixui.AddressInput"],sdkType:"$w.AddressInput"},Text:{viewerType:["wysiwyg.viewer.components.WRichText"],sdkType:"$w.Text"},Image:{viewerType:["wysiwyg.viewer.components.WPhoto","wixui.ImageX"],sdkType:"$w.Image"},TextInput:{viewerType:["wysiwyg.viewer.components.inputs.TextInput"],sdkType:"$w.TextInput"},TimePicker:{viewerType:["wixui.TimePicker"],sdkType:"$w.TimePicker"},Button:{viewerType:["wysiwyg.viewer.components.SiteButton"],sdkType:"$w.Button"},IconButton:{viewerType:["wysiwyg.common.components.imagebutton.viewer.ImageButton"],sdkType:"$w.IconButton"},RatingsDisplay:{viewerType:["wixui.RatingsDisplay"],sdkType:"$w.RatingsDisplay"},RatingsInput:{viewerType:["wixui.RatingsInput"],sdkType:"$w.RatingsInput"},VerticalMenu:{viewerType:["wysiwyg.common.components.verticalmenu.viewer.VerticalMenu"],sdkType:"$w.VerticalMenu"},Checkbox:{viewerType:["wysiwyg.viewer.components.inputs.Checkbox"],sdkType:"$w.Checkbox"},Gallery:{viewerType:["wysiwyg.viewer.components.MatrixGallery","wysiwyg.viewer.components.SliderGallery","wysiwyg.viewer.components.SlideShowGallery","wysiwyg.viewer.components.PaginatedGridGallery","wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.Gallery"},Dropdown:{viewerType:["wysiwyg.viewer.components.inputs.ComboBoxInput","wixui.Dropdown"],sdkType:"$w.Dropdown"},TextBox:{viewerType:["wysiwyg.viewer.components.inputs.TextAreaInput"],sdkType:"$w.TextBox"},RichTextBox:{viewerType:["wixui.RichTextBox"],sdkType:"$w.RichTextBox"},Table:{viewerType:["wysiwyg.viewer.components.Grid"],sdkType:"$w.Table"},DatePicker:{viewerType:["wysiwyg.viewer.components.inputs.DatePicker"],sdkType:"$w.DatePicker"},RadioButtonGroup:{viewerType:["wysiwyg.viewer.components.inputs.RadioGroup"],sdkType:"$w.RadioButtonGroup"},UploadButton:{viewerType:["wysiwyg.viewer.components.inputs.UploadButton","wixui.FileUploaderNew","wysiwyg.viewer.components.inputs.FileUploader"],sdkType:"$w.UploadButton"},ClassicSection:{viewerType:["wysiwyg.viewer.components.ClassicSection"],sdkType:"$w.Section"},Column:{viewerType:["wysiwyg.viewer.components.Column"],sdkType:"$w.Column"},Video:{viewerType:["wysiwyg.viewer.components.Video"],sdkType:"$w.Video"},VideoPlayer:{viewerType:["wixui.VideoPlayer"],sdkType:"$w.VideoPlayer"},VideoBox:{viewerType:["wysiwyg.viewer.components.MediaPlayer"],sdkType:"$w.VideoBox"},MusicPlayer:{viewerType:["wixui.MusicPlayer"],sdkType:"$w.AudioPlayer"},Repeater:{viewerType:["wysiwyg.viewer.components.Repeater"],sdkType:"$w.Repeater"},Pagination:{viewerType:["wixui.Pagination"],sdkType:"$w.Pagination"},Page:{viewerType:["mobile.core.components.Page"],sdkType:"$w.Page"},Document:{viewerType:["fake-document-type"],sdkType:"$w.Document"},MediaContainer:{viewerType:["wysiwyg.viewer.components.MediaContainer"],sdkType:"$w.Container"},StripColumnsContainer:{viewerType:["wysiwyg.viewer.components.StripColumnsContainer"],sdkType:"$w.ColumnStrip"},ToggleSwitch:{viewerType:["wixui.ToggleSwitch"],sdkType:"$w.Switch"},Slider:{viewerType:["wixui.Slider"],sdkType:"$w.Slider"},RangeSlider:{viewerType:["wixui.RangeSlider"],sdkType:"$w.RangeSlider"},StylableButton:{viewerType:["wixui.StylableButton"],sdkType:"$w.StylableButton"},GoogleMap:{viewerType:["wysiwyg.viewer.components.GoogleMap"],sdkType:"$w.GoogleMap"},CheckboxGroup:{viewerType:["wysiwyg.viewer.components.inputs.CheckboxGroup"],sdkType:"$w.CheckboxGroup"},ProgressBar:{viewerType:["wixui.ProgressBar"],sdkType:"$w.ProgressBar"},VectorImage:{viewerType:["wysiwyg.viewer.components.VectorImage","wysiwyg.viewer.components.svgshape.SvgShape"],sdkType:"$w.VectorImage"},SelectionTags:{viewerType:["wixui.SelectionTagsList"],sdkType:"$w.SelectionTags"},Section:{viewerType:["responsive.components.Section"],sdkType:"$w.Section"},SignatureInput:{viewerType:["wixui.SignatureInput"],sdkType:"$w.SignatureInput"},RefComponent:{viewerType:["wysiwyg.viewer.components.RefComponent"],sdkType:"$w.RefComponent"},RichContent:{viewerType:["wysiwyg.viewer.components.tpapps.TPAWidget"],sdkType:"$w.RichContent"}});var rt=(0,Ke.mapValues)(tt,(({sdkType:e})=>e));et(tt).reduce(((e,t)=>(e.concat(tt[t].viewerType),e)),[]),et(tt).map((e=>tt[e].viewerType)).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>(e[t.split(".").reverse()[0]]=t,e)),{}),et(tt).map((e=>tt[e].sdkType));const{AddressInput:nt,RatingsInput:ot,TextInput:at,TextBox:it,RichTextBox:st,Checkbox:ct,DatePicker:lt,RadioButtonGroup:ut,Dropdown:dt,UploadButton:pt,ToggleSwitch:ft,Slider:ht,TimePicker:mt,CheckboxGroup:gt,SelectionTags:yt,SignatureInput:vt}=rt,It=[{type:nt,role:ve},{type:ot,role:"ratingsInputRole"},{type:at,role:"textInputRole"},{type:it,role:"textAreaRole"},{type:st,role:"richTextBoxRole"},{type:ct,role:"checkboxRole"},{type:lt,role:pe},{type:ut,role:fe},{type:dt,role:ce},{type:pt,role:he},{type:ft,role:"toggleSwitchRole"},{type:ht,role:"sliderRole"},{type:mt,role:we},{type:gt,role:"checkboxGroupRole"},{type:yt,role:"selectionTagsRole"},{type:vt,role:Te}],wt=(It.map((e=>e.type)),It.map((e=>e.role))),Et=e=>e.some((e=>{return t=(0,Ke.get)(e,"role"),wt.includes(t);var t}));var _t=(e,t)=>(e=>[Je,Xe].includes(e))(e)&&(e=>e.some((e=>"save"===(0,Ke.get)(e,"config.events.onClick.action"))))(t)&&Et(t),Tt="object"==typeof global&&global&&global.Object===Object&&global,St="object"==typeof self&&self&&self.Object===Object&&self,Rt=(Tt||St||Function("return this")()).Symbol,bt=Object.prototype,Ot=bt.hasOwnProperty,Ct=bt.toString,Dt=Rt?Rt.toStringTag:void 0;var Pt=function(e){var t=Ot.call(e,Dt),r=e[Dt];try{e[Dt]=void 0;var n=!0}catch(e){}var o=Ct.call(e);return n&&(t?e[Dt]=r:delete e[Dt]),o},Nt=Object.prototype.toString;var At=function(e){return Nt.call(e)},xt=Rt?Rt.toStringTag:void 0;var Mt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":xt&&xt in Object(e)?Pt(e):At(e)};var Ft=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);var Lt=function(e){return null!=e&&"object"==typeof e},Ut=Function.prototype,kt=Object.prototype,jt=Ut.toString,Vt=kt.hasOwnProperty,Wt=jt.call(Object);var Gt=function(e){if(!Lt(e)||"[object Object]"!=Mt(e))return!1;var t=Ft(e);if(null===t)return!0;var r=Vt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&jt.call(r)==Wt},Bt=a(7288),qt="@@redux/INIT";function zt(e,t,r){var n;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(zt)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,a=t,i=[],s=i,c=!1;function l(){s===i&&(s=i.slice())}function u(){return a}function d(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return l(),s.push(e),function(){if(t){t=!1,l();var r=s.indexOf(e);s.splice(r,1)}}}function p(e){if(!Gt(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,a=o(a,e)}finally{c=!1}for(var t=i=s,r=0;r<t.length;r++){(0,t[r])()}return e}return p({type:qt}),(n={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");o=e,p({type:qt})}})[Bt.Z]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function r(){e.next&&e.next(u())}return r(),{unsubscribe:t(r)}}})[Bt.Z]=function(){return this},e},n}function $t(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function Ht(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};const Yt={collectionName:null,readWriteType:Ye,filter:null,sort:null,includes:null,nested:[],pageSize:12,deferred:!1};var Jt="SET_CURRENT_RECORD",Qt="UPDATE_FIELDS",Kt="REFRESH_CURRENT_RECORD",Zt="REFRESH_CURRENT_VIEW",er="INCREMENT_NUM_PAGES_TO_SHOW",tr="SET_DEFAULT_RECORD",rr="GO_TO_INDEX",nr="GO_TO_NEXT_PAGE",or="GO_TO_PREVIOUS_PAGE",ar="LOAD_PAGE",ir="GET_RECORD_BY_INDEX_RESULT",sr="CURRENT_VIEW_UPDATED",cr="REVERT_CHANGES",lr="RECORD_REVERTED",ur="SAVE_RECORD",dr="SAVE_RECORD_RESULT",pr="REMOVE_CURRENT_RECORD",fr="REMOVE_CURRENT_RECORD_RESULT",hr="NEW_RECORD",mr="NEW_RECORD_RESULT",gr="REFRESH",yr="SET_USER_INPUT_OPTION_VALUES";const vr={INIT:"INIT",SET_PAGINATION_DATA:"SET_PAGINATION_DATA"};var Ir=vr,wr=e=>{let{controllerConfig:t={},connections:r=[],isScoped:n=!1,datasetType:o}=e;return{type:vr.INIT,datasetConfig:t.dataset||{},connections:r,isScoped:n,datasetType:o}},Er=e=>({type:vr.SET_PAGINATION_DATA,paginationData:e}),_r="SET_FILTER",Tr="SET_SORT",Sr="SET_IS_DATASET_READY",Rr="SET_FIXED_FILTER_ITEM";const br=e=>null==e?void 0:e.readWriteType;var Or=e=>null==e?void 0:e.pageSize,Cr=br;const Dr=e=>{let{error:t,payload:r}=e;return t?Ze.Result.Error(r):Ze.Result.Ok(r)},Pr={currentRecord:{index:void 0,data:void 0,fieldsToUpdate:void 0,updateSource:void 0},lastSavedRecord:{index:void 0,data:void 0},desiredIndex:void 0,refreshCurrentRecord:!1,removeCurrentRecord:!1,newRecordIndex:null,refreshCurrentView:!1,refreshController:!1,setFilterCalled:!1,revertChanges:!1,saveRecord:!1,defaultRecord:void 0,isForm:void 0,page:{numPagesToShow:1,offset:0,size:Yt.pageSize},schema:void 0,userFilterInitialData:null,isApplyUserInputFiltersActionBindingPresent:!1},Nr=e=>((e,t)=>(0,Ke.inRange)(e,Lr(t).offset,Lr(t).offset+Lr(t).size))(Ur(e),e),Ar=e=>e.some((e=>"applyUserInputFilters"===(0,Ke.get)(e,"config.events.onClick.action"))),xr=(e,t,r,n)=>{const o={...e,currentRecord:{index:t,data:r,updateSource:n},desiredIndex:t,refreshCurrentRecord:!1,refreshController:!1};return Nr(o)?o:{...o,page:{...o.page,offset:Math.floor(o.currentRecord.index/o.page.size)*o.page.size,numPagesToShow:1}}},Mr=e=>e.page.size,Fr=e=>e.currentRecord.data,Lr=e=>e.page,Ur=e=>e.currentRecord.index;var kr={reducer:function(e,t){switch(void 0===e&&(e=Pr),t.type){case Jt:{const{recordIndex:r,record:n,updateSource:o}=t;return xr(e,r,n,o)}case hr:return{...e,newRecordIndex:t.atIndex};case mr:return Dr(t).fold((()=>({...e,newRecordIndex:null})),(t=>({...xr(e,e.newRecordIndex,t),newRecordIndex:null})));case Qt:{const{fieldsToUpdate:r,updateSource:n}=t;return{...e,currentRecord:{...e.currentRecord,fieldsToUpdate:r,updateSource:n}}}case rr:return{...e,desiredIndex:t.index};case ir:return Dr(t).fold((()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1,refreshController:!1})),(t=>t.matchWith({Record:t=>{let{index:r,record:n}=t;return xr(e,r,n)},InvalidIndex:()=>({...e,desiredIndex:e.currentRecord.index,refreshCurrentRecord:!1}),NoRecord:()=>xr(e,null,null)})));case Kt:return{...e,refreshCurrentRecord:!0};case pr:return{...e,removeCurrentRecord:!0};case fr:return Dr(t).fold((()=>({...e,removeCurrentRecord:!1})),(()=>({...e,removeCurrentRecord:!1,refreshCurrentRecord:!0})));case Zt:return{...e,refreshCurrentView:!0};case sr:return{...e,refreshCurrentView:!1};case cr:return{...e,revertChanges:!0};case lr:return{...e,revertChanges:!1};case tr:{const{record:r}=t;return{...e,defaultRecord:r}}case Ir.INIT:{const{datasetConfig:r,connections:n}=t,o=Or(r),a=Cr(r);return{...e,isForm:_t(a,n),page:{...e.page,size:o||e.page.size},isApplyUserInputFiltersActionBindingPresent:Ar(n)}}case Ir.SET_PAGINATION_DATA:{const r={...e,page:{...e.page,...t.paginationData}};return Nr(r)?r:{...r,desiredIndex:r.page.offset}}case nr:{const t=Lr(e),r=Mr(e),n=t.offset+r,o={...e,page:{...e.page,numPagesToShow:1,offset:n}};return Nr(o)?o:{...o,desiredIndex:o.page.offset}}case or:{const t=Lr(e),r=Math.max(0,t.offset-t.size),n={...e,page:{...e.page,numPagesToShow:1,offset:r}};return Nr(n)?n:{...n,desiredIndex:n.page.offset}}case ar:{const{size:r}=Lr(e),n={...e,page:{...e.page,numPagesToShow:1,offset:r*(t.pageNumber-1)}};return Nr(n)?n:{...n,desiredIndex:n.page.offset}}case er:return{...e,page:{...e.page,numPagesToShow:e.page.numPagesToShow+1}};case ur:return{...e,saveRecord:!0,lastSavedRecord:{index:void 0,data:void 0}};case dr:return Dr(t).fold((()=>({...e,saveRecord:!1})),(t=>({...e,saveRecord:!1,lastSavedRecord:{index:e.currentRecord.index,data:t}})));case _r:return{...e,setFilterCalled:!0,refreshController:!0};case Tr:case gr:return{...e,refreshController:!0};case yr:return{...e,userFilterInitialData:t.userFilterInitialData};default:return e}},getPaginationData:Lr,hasCurrentRecord:e=>!!Fr(e),selectDefaultDraft:e=>({...e.defaultRecord}),selectCurrentRecord:Fr,selectCurrentRecordIndex:Ur,selectDesiredRecordIndex:e=>e.desiredIndex,selectFieldsToUpdate:e=>e.currentRecord.fieldsToUpdate,selectLastSavedRecord:e=>e.lastSavedRecord.data,selectLastSavedRecordIndex:e=>e.lastSavedRecord.index,selectRefreshCurrentRecord:e=>e.refreshCurrentRecord,selectRemoveCurrentRecord:e=>e.removeCurrentRecord,selectRefreshController:e=>e.refreshController,selectSetFilterCalled:e=>e.setFilterCalled,selectRefreshCurrentView:e=>e.refreshCurrentView,selectRevertChanges:e=>e.revertChanges,selectSaveRecord:e=>e.saveRecord,selectUpdateSource:e=>e.currentRecord.updateSource,selectNewRecordIndex:e=>e.newRecordIndex,isDuringSave:e=>e.saveRecord,isForm:e=>e.isForm,getUserFilterInitialData:e=>e.userFilterInitialData,selectIsApplyUserInputFiltersActionBindingPresent:e=>e.isApplyUserInputFiltersActionBindingPresent};const jr="dataset",Vr="router_dataset",{WRITE:Wr}=e,{ROUTER_DATASET:Gr}=t,Br=["collectionName","readWriteType","includes","cursor"],qr=["filter","sort"],zr=e=>(0,Ke.pick)(e,Br),$r=e=>(0,Ke.pick)(e,qr),Hr=e=>{let{datasetConfig:t,connections:r,isScoped:n,datasetType:o}=e;const a=o===Gr,i=r.some((e=>{let{role:t}=e;return t===re})),s=n,c=!n,l=t.readWriteType===Wr;return{datasetIsRouter:a,datasetIsMaster:i,datasetIsVirtual:s,datasetIsReal:c,datasetIsDeferred:Boolean(t.deferred)&&!(s||i||a||l),dynamicPageNavComponentsShouldBeLinked:a&&c,userFilterConnectionProps:r.filter((e=>{let{role:t}=e;return Ne.includes(t)})).map((e=>{let{config:{userInputFilter:t},role:r}=e;return{...t,role:r}}))}},Xr=(e,t)=>({...e,transientData:{...e.transientData,...t}}),Yr={canonicalData:zr(Yt),canonicalCalculatedData:{},transientData:{isDatasetReady:!1,...$r(Yt)}};var Jr={reducer:function(e,t){switch(void 0===e&&(e=Yr),t.type){case Ir.INIT:{const{datasetConfig:r,connections:n,isScoped:o,datasetType:a}=t;return{...e,canonicalData:{...e.canonicalData,...zr(t.datasetConfig)},canonicalCalculatedData:Hr({datasetConfig:r,connections:n,isScoped:o,datasetType:a}),transientData:{...e.transientData,...$r(t.datasetConfig)}}}case _r:{const{filter:r}=t;return Xr(e,{filter:r})}case Tr:{const{sort:r}=t;return Xr(e,{sort:r})}case Sr:{const{isDatasetReady:r}=t;return Xr(e,{isDatasetReady:r})}case Rr:{const{fixedFilterItem:r}=t;return Xr(e,{fixedFilterItem:r})}default:return e}},isWriteOnly:e=>(0,Ke.get)(e,["canonicalData","readWriteType"])===Je,isReadOnly:e=>(0,Ke.get)(e,["canonicalData","readWriteType"])===Ye,getReadWriteMode:e=>(0,Ke.get)(e,["canonicalData","readWriteType"]),isDatasetReady:e=>(0,Ke.get)(e,["transientData","isDatasetReady"]),isDatasetConfigured:e=>!!(0,Ke.get)(e,["canonicalData","collectionName"]),isCursorPagingRequired:e=>!!(0,Ke.get)(e,["canonicalData","cursor"]),isDatasetRouter:e=>{let{canonicalCalculatedData:{datasetIsRouter:t}}=e;return t},isDatasetMaster:e=>{let{canonicalCalculatedData:{datasetIsMaster:t}}=e;return t},isDatasetVirtual:e=>{let{canonicalCalculatedData:{datasetIsVirtual:t}}=e;return t},isDatasetReal:e=>{let{canonicalCalculatedData:{datasetIsReal:t}}=e;return t},isDatasetDeferred:e=>{let{canonicalCalculatedData:{datasetIsDeferred:t}}=e;return t},shouldLinkDynamicPageNavComponents:e=>{let{canonicalCalculatedData:{dynamicPageNavComponentsShouldBeLinked:t}}=e;return t},getUserFilterConnectionProps:e=>{let{canonicalCalculatedData:{userFilterConnectionProps:t}}=e;return t},getFixedFilterItem:e=>(0,Ke.get)(e,["transientData","fixedFilterItem"]),getFilter:e=>(0,Ke.get)(e,["transientData","filter"]),getSort:e=>(0,Ke.get)(e,["transientData","sort"]),getIncludes:e=>(0,Ke.get)(e,["canonicalData","includes"])||[],getCollectionName:e=>(0,Ke.get)(e,["canonicalData","collectionName"])},Qr="NEXT_DYNAMIC_PAGE_URL_RESULT",Kr="PREVIOUS_DYNAMIC_PAGE_URL_RESULT",Zr="INITIALIZE";const en=(0,Ze.union)("DynamicPageUrlLoadState",{Empty(){},Loading(){},Loaded:e=>{if(!e)throw new Error("url must exist");return{url:e}}},{hasUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!1,Loaded:()=>!0}),shouldLoadUrl:e=>()=>e.matchWith({Empty:()=>!1,Loading:()=>!0,Loaded:()=>!1})});en.fromUrl=e=>e?en.Loaded(e):en.Empty();var tn=en;const{fromUrl:rn}=en,nn={nextDynamicPageUrl:tn.Empty(),previousDynamicPageUrl:tn.Empty()},on=e=>{const t=(e=>{const t=e.filter((e=>!!(0,Ke.get)(e,"config.events.onClick.action")));return new Set(t.map((e=>(0,Ke.get)(e,"config.events.onClick.action"))))})(e),r=e=>e?tn.Loading():tn.Empty();return{nextDynamicPageUrl:r(t.has("nextDynamicPage")),previousDynamicPageUrl:r(t.has("previousDynamicPage"))}};var an={reducer:function(e,t){switch(void 0===e&&(e=nn),t.type){case Zr:return{...e,...on(t.connections)};case Qr:return{...e,nextDynamicPageUrl:tn.fromUrl(t.payload)};case Kr:return{...e,previousDynamicPageUrl:tn.fromUrl(t.payload)};default:return e}},selectNextDynamicPageUrl:e=>e.nextDynamicPageUrl,selectPreviousDynamicPageUrl:e=>e.previousDynamicPageUrl},sn=function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var o=t[n];0,"function"==typeof e[o]&&(r[o]=e[o])}var a=Object.keys(r),i=void 0;try{!function(e){Object.keys(e).forEach((function(t){var r=e[t];if(void 0===r(void 0,{type:qt}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+qt+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(e){i=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(i)throw i;for(var n=!1,o={},s=0;s<a.length;s++){var c=a[s],l=r[c],u=e[c],d=l(u,t);if(void 0===d){var p=$t(c,t);throw new Error(p)}o[c]=d,n=n||d!==u}return n?o:e}}({records:kr.reducer,config:Jr.reducer,dynamicPages:an.reducer});const cn=e=>Jr.getCollectionName(e.config),ln=e=>Jr.getFilter(e.config),un=e=>Jr.getSort(e.config),dn=e=>kr.getPaginationData(e.records),pn=e=>Jr.getReadWriteMode(e.config),fn=e=>Jr.isDatasetConfigured(e.config),hn=e=>Jr.isDatasetReady(e.config),mn=e=>Jr.isReadOnly(e.config),gn=e=>Jr.isWriteOnly(e.config),yn=e=>(e=>kr.hasCurrentRecord(e.records))(e)&&!mn(e),vn=e=>Jr.isDatasetRouter(e.config),In=e=>Jr.isDatasetMaster(e.config),wn=e=>Jr.isDatasetVirtual(e.config),En=e=>Jr.isDatasetReal(e.config),_n=e=>Jr.isDatasetDeferred(e.config),Tn=e=>Jr.shouldLinkDynamicPageNavComponents(e.config),Sn=e=>kr.selectCurrentRecord(e.records),Rn=e=>kr.selectCurrentRecordIndex(e.records),bn=e=>kr.selectDefaultDraft(e.records),On=e=>kr.selectDesiredRecordIndex(e.records),Cn=e=>kr.selectFieldsToUpdate(e.records),Dn=e=>kr.selectUpdateSource(e.records),Pn=e=>kr.selectNewRecordIndex(e.records),Nn=e=>an.selectNextDynamicPageUrl(e.dynamicPages),An=e=>an.selectPreviousDynamicPageUrl(e.dynamicPages),xn=e=>kr.selectRefreshController(e.records),Mn=e=>kr.selectSetFilterCalled(e.records),Fn=e=>kr.selectRefreshCurrentRecord(e.records),Ln=e=>kr.selectRefreshCurrentView(e.records),Un=e=>kr.selectRemoveCurrentRecord(e.records),kn=e=>kr.selectRevertChanges(e.records),jn=e=>kr.selectSaveRecord(e.records),Vn=e=>kr.getUserFilterInitialData(e.records),{READ_WRITE:Wn,READ:Gn}=e;function Bn(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var qn=new WeakMap,zn=new WeakMap;class $n{constructor(e,t){Bn(this,qn,{writable:!0,value:void 0}),Bn(this,zn,{writable:!0,value:new X([[Ue,e=>{let{mode:t,env:r}=e;return t.csr&&!r.dev}],[$e,e=>{let{mode:t,env:r}=e;return t.verbose&&r.preview}]])}),u()(this,qn,e),this._listenToUnhandledErrors(t)}log(e){if(this._shouldLogErrorBi(e)&&c()(this,qn).log(e,new ke(e.cause||e)),this._shouldLog(e))return c()(this,qn).log(e)}logError(e,t,r){this.log(e instanceof D?e:new P(t,{cause:e,...r}))}_shouldLog(e){return(c()(this,zn).find(((t,r)=>e instanceof r))||(()=>!0))(j.platform.settings)}_shouldLogErrorBi(e){return e instanceof D&&!(e instanceof N)&&c()(this,zn).get(Ue)(j.platform.settings)}_listenToUnhandledErrors(e){e.addEventListener("unhandledrejection",(e=>{e.reason instanceof D&&(e.preventDefault(),c()(this,qn).log(new F({cause:e.reason})))}))}}const Hn=e=>(t,r)=>$(t,(t=>e.log(new r({cause:t})))),Xn=e=>(t,r)=>$((function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];const i=t(...o);return e.log(new r({data:{args:o,result:i}})),i}),(t=>{throw e.log(new r({data:{exception:t},level:"error"})),t})),Yn=e=>(t,r)=>function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r.startsWith("on"))return e.log(new $e($e.types.DS_API.REGISTERED,{methodName:r})),t(...o);if(e.log(new $e($e.types.DS_API.CALLED,{methodName:r,args:o})),Me.has(r)){const t=Me.get(r);e.log(new $e($e.types.DS_API.DEPRECATED,{methodName:r,replacementMethodName:t}))}return new H(t(...o)).then((t=>(e.log(new $e($e.types.DS_API.SUCCED,{methodName:r,result:t})),t)))};class Jn{constructor(e){let{id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,numberOfResults:s,filteredBy:c,componentType:l,fieldType:u}=e;const{platform:{location:{pageId:d,pageUrl:p},settings:{env:f}}}=j;return new Ue({id:t,collectionId:r,collectionName:n,datasetId:o,datasetType:a,datasetMode:i,viewMode:f.name,pageId:d,pageUrl:p,numberOfResults:s,filteredBy:c,componentType:l,fieldType:u})}}var Qn=a(5882);class Kn{constructor(e){let{message:t,code:r}=e;const n=new Error(t);return n.code=r,n}}class Zn{constructor(e){let{getRequestParams:t,httpClient:r}=e;this.getRequestParams=t,this.httpClient=r}async _makeRequestTo(e,t){const{instance:r,gridAppId:n}=this.getRequestParams();return(await this.httpClient.post("/_serverless/data-binding-server/"+e,t,{params:{gridAppId:n},headers:{Authorization:r,"Content-Type":"application/json"}})).data}async fetchBulkData(e){const{recordsByCollectionId:t,recordsInfoByDataset:r}=await this._makeRequestTo("fetch-initial-data",e);return{recordsInfoByDataset:r.reduce(((e,t)=>{let{itemIds:r=[],totalCount:n=0,error:o}=t;return[...e,{itemIds:r,totalCount:n,error:o?new Kn(o):void 0}]}),[]),recordsByCollectionId:Object.entries(t).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:Object.entries(n).reduce(((e,t)=>{let[r,n]=t;return{...e,[r]:(0,Qn.PL)(n)}}),{})}}),{})}}async fetchData(e){const{items:t,...r}=await this._makeRequestTo("fetch-data",e);return{...r,items:t.map((e=>(0,Qn.PL)(e)))}}async remove(e){return this._makeRequestTo("remove",e)}async save(e){const{item:t}=await this._makeRequestTo("save",e);return(0,Qn.PL)(t)}}const eo=".",to=e=>(0,Ke.head)(e.split(eo)),ro=e=>e.split(eo),no=e=>(0,Ke.isPlainObject)(e)&&(0,Ke.has)(e,"_id"),oo=(e,t)=>e!==t&&no(e)&&!no(t)?e:t,ao=function(e,t){void 0===t&&(t={});for(const r of e){const e=t[r._id];t[r._id]=(0,Ke.mergeWith)(e,r,oo)}return t},io=(e,t)=>{const r=t.flatMap((e=>["fields",e])).concat("type");return(0,Ke.get)(e,r)},so=(e,t)=>r=>{const n=ro(r);if(((e,t)=>t.length>=2&&io(e,[t[0]])===m.FieldType.reference)(e,n)){const[r,...o]=n,a=e&&e.fields[r]?e.fields[r].referencedCollection:null,i=t&&a?t[a]:null;return io(i,o)}return io(e,n)},co=(e,t)=>null!=t&&null!=t.fields[e]?t.fields[e].referencedCollection:null,lo=e=>null!=e?e.displayField:null,uo=e=>null!=e?e.maxPageSize:void 0,po=e=>(0,Ke.includes)(e,eo),fo=e=>{var t;let{schema:r,defaultToDbDriverLimit:n}=e;const o=n?100:1e3;return null!=(t=uo(r))?t:o},ho=(e,t)=>async r=>{const{baseQuery:n,fieldName:o,schema:a}=r,i=((e,t,r)=>{var n;const o=null===(n=e.fields[t])||void 0===n?void 0:n.queryOperators;return!o||o.includes(r)})(a,o,m.AllowedFilterOperator.ne);if(i)return t({...r,baseQuery:n.ne(o,e)});const s=await t(r);return(0,Ke.filter)(s,(t=>((e=>(0,Ke.isObject)(e))(t)?t[o]:t)!==e))},mo=e=>ho("",e),go=e=>ho(void 0,e),yo=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=fo({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).find(),i=a.flatMap((e=>e[n]));return(0,Ke.uniq)(i)},vo=async e=>{let{baseQuery:t,fieldName:r,schema:n}=e;const o=fo({schema:n,defaultToDbDriverLimit:!1}),{items:a}=await t.limit(o).distinct(r,null);return a},Io=e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o,filterModel:a}=e;const i=(e=>{let{wixData:t,schema:r,sortModel:n,fieldName:o}=e;const a=to(o);if(a){var i,s,c;const e=null==(i=null==(s=r.fields[a])?void 0:s.sortable)||i,o=r.defaultSort?{[r.defaultSort.fieldName]:r.defaultSort.direction}:null,l=(null==n?void 0:n.length)>0,u=!((null==n?void 0:n.find((e=>e[a])))||(null==r||null==(c=r.defaultSort)?void 0:c.fieldName)===a)&&e,d=t.sort().ascending(a).getSortModel();if(l)return u?[...n,...d]:n;if(o)return u?[o,...d]:o;if(e)return d}return null})({wixData:t,schema:r,sortModel:n,fieldName:o});return t.query(r.id).setFilterModel(a).setSortModel(i)},wo=async e=>{let{baseQuery:t,schema:r,references:n}=e;const o=fo({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.hasSome("_id",n).limit(o).find();return a},Eo=async e=>{let{baseQuery:t,schema:r,wixData:n,customSortExists:o,referencingFieldName:a,referencedFieldName:i,referencedSchema:s}=e;const c=fo({schema:r,defaultToDbDriverLimit:!1}),{items:l}=await t.limit(c).distinct(a,null),u=mo(go(wo)),d=await u({baseQuery:n.query(s.id),schema:s,fieldName:i,references:l});return o?l.flatMap((e=>d.filter((t=>t._id===e)))):d},_o=async e=>{let{baseQuery:t,schema:r,fieldName:n}=e;const o=fo({schema:r,defaultToDbDriverLimit:!0}),{items:a}=await t.limit(o).include(n).find();return a},To=async e=>{let{baseQuery:t,schema:r,referencingFieldName:n,referencedFieldName:o}=e;const a=go(_o),i=await a({baseQuery:t,schema:r,fieldName:n});return(0,Ke.uniqBy)(i.map((e=>e[n])).filter((e=>!["",void 0].includes(e[o]))),"_id")},So=async e=>{var t;let{schema:r,schemas:n,wixData:o,fieldName:a,role:i,sortModel:s,filterModel:c}=e;const l=Io({wixData:o,schema:r,fieldName:a,sortModel:s,filterModel:c}),[u,d]=ro(a),p=n[r.fields[u].referencedCollection],f=(null==s?void 0:s.length)>0,h=(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.distinct))?Eo:To,g=await h({baseQuery:l,schema:r,schemas:n,wixData:o,fieldName:a,customSortExists:f,referencingFieldName:u,referencedFieldName:d,referencedSchema:p}),y=(e=>{let{referencedItems:t,referencedSchema:r,referencedFieldName:n,customSortExists:o}=e;const a=(0,Ke.uniq)(t.flatMap((e=>e[n]))),i=r.fields[n].type;return o?a:i===m.FieldType.number?a.sort(((e,t)=>e-t)):a.sort()})({referencedItems:g,referencedSchema:p,referencedFieldName:d,customSortExists:f}),v=(e=>{let{referencedItems:t,referencedFieldName:r,options:n}=e;return Object.fromEntries(n.map((e=>[e,t.filter((t=>(0,Ke.isArray)(t[r])?t[r].includes(e):t[r]===e)).map((e=>e._id))])))})({referencedItems:g,options:y,referencedFieldName:d});return{fieldName:a,role:i,options:y,referencedItemIdsByOption:v}},Ro=async e=>{var t;let{schema:r,wixData:n,fieldName:o,role:a,filterModel:i}=e;const s={wixData:n,schema:r,filterModel:i,fieldName:o,role:a};return(null==(t=r.allowedOperations)?void 0:t.includes(m.DataOperation.aggregate))?(async e=>{let{wixData:t,schema:r,filterModel:n,fieldName:o,role:a}=e;const i=t.filter().setFilterModel(n),{items:[{min:s,max:c}]}=await t.aggregate(r.id).filter(i).max(o,"max").min(o,"min").run();return{fieldName:o,role:a,min:s,max:c}})(s):(async e=>{let{wixData:t,schema:r,filterModel:n,fieldName:o,role:a}=e;const i=t.query(r.id).setFilterModel(n).limit(1),[{items:s},{items:c}]=await Promise.all([i.ascending(o).find(),i.descending(o).find()]),l=s.map((e=>e[o]))[0],u=c.map((e=>e[o]))[0];return{fieldName:o,role:a,min:l,max:u}})(s)};function bo(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Oo=new WeakMap,Co=new WeakMap;class Do{constructor(e){let{wixData:t,wixDataSchemas:r}=e;bo(this,Oo,{writable:!0,value:void 0}),bo(this,Co,{writable:!0,value:void 0}),u()(this,Oo,Po.reduce(((e,r)=>(e[r]=function(){const e=t[r](...arguments);return e.catch instanceof Function?e.catch((e=>{throw new Lo(e)})):e},e)),{...t})),u()(this,Co,r)}async fetchBulkData(e){const t=await Promise.all(e.map((e=>{let{collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}=e;return this.fetchData({collectionId:t,filter:r,sort:n,offset:o,cursor:a,length:i,includes:s,uniqueFieldValues:c}).catch((e=>({error:e})))})));return((e,t)=>t.reduce(((t,r,n)=>{let{items:o,nextCursor:a,totalCount:i,uniqueFieldValues:s,error:c}=r;if(c)return t.recordInfosInDatasetOrder.push({error:c}),t;t.recordInfosInDatasetOrder.push({itemIds:o.map((e=>{let{_id:t}=e;return t})),totalCount:i,nextCursor:a});const l=e[n].collectionId,u=t.recordsByCollectionId[l];return t.recordsByCollectionId[l]=ao(o,u),t.uniqueFieldValuesByCollection[l]={...t.uniqueFieldValuesByCollection[l],...s},t}),{recordInfosInDatasetOrder:[],recordsByCollectionId:{},uniqueFieldValuesByCollection:{}}))(e,t)}async fetchData(e){let{collectionId:t,filter:r,sort:n,offset:o=0,includes:a,cursor:i,length:s,uniqueFieldValues:l}=e;const u=i?c()(this,Oo).fetch(t,i,s):(()=>{let e=c()(this,Oo).query(t).setFilterModel(r).setSortModel(n).skip(o).limit(s);return null==a||a.forEach((t=>{e=e.include(t)})),e.find()})(),d=l.length>0?this._fetchUniqueValues({collectionId:t,fieldKeys:l}):Promise.resolve({}),[p,f]=await Promise.all([u,d]),{items:h,totalCount:m,nextCursor:g}=p;return{items:h,nextCursor:g,totalCount:m||0,uniqueFieldValues:f}}async fetchUserFilterInitialData(e){let{filter:t,sort:r,userFilterConnectionProps:n,schema:o,schemas:a}=e;const i=[Pe],s=(0,Ke.uniqBy)(n.filter((e=>{let{role:t}=e;return i.includes(t)})),"fieldName"),l=(0,Ke.uniqWith)(n.filter((e=>{let{role:t}=e;return xe.includes(t)})),((e,t)=>e.fieldName===t.fieldName));return Promise.all([...s.map((async e=>{let{fieldName:r,role:n}=e;const a={schema:o,wixData:c()(this,Oo),fieldName:r,role:n,filterModel:t};return Ro(a)})),...l.map((async e=>{let{fieldName:n,role:i}=e;const s=po(n),l={wixData:c()(this,Oo),schema:o,schemas:a,fieldName:n,role:i,sortModel:r,filterModel:t};return s?So(l):(async e=>{var t;let{wixData:r,schema:n,fieldName:o,role:a,sortModel:i,filterModel:s}=e;const c=Io({wixData:r,schema:n,fieldName:o,sortModel:i,filterModel:s}),l=null==(t=n.allowedOperations)?void 0:t.includes(m.DataOperation.distinct),u=mo(l?vo:go(yo));return{fieldName:o,role:a,options:await u({baseQuery:c,fieldName:o,schema:n})}})(l)}))])}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,Oo).remove(t,r)}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,Oo).save(t,r,{includeReferences:n})}async getSibling(e){let{collectionName:t,filter:r,sort:n,fieldValues:o,sortFields:a,directionTowardSibling:i}=e;const s=c()(this,Oo).query(t).setFilterModel(r),{items:[l]}=await No({sort:n,sortFields:a,fieldValues:o,baseQuery:s,directionTowardSibling:i}).find();return l}fetchSchemas(e){return c()(this,Co).bulkGet(e,{referencedCollectionsDepth:1})}createSimpleFilter(e,t){return c()(this,Oo).filter().eq(e,t).getFilterModel()}async _fetchUniqueValues(e){let{collectionId:t,fieldKeys:r}=e;return(await Promise.all(r.map((e=>c()(this,Oo).query(t).distinct(e))))).reduce(((e,t,n)=>{let{_items:o}=t;return e[r[n]]=o,e}),{})}}const Po=["save","remove","find","sort","filter","query","fetch","aggregate"],No=e=>{let{sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a}=e;return Ao({sort:t,sortFields:r,directionTowardSibling:n,fieldValues:o,baseQuery:a})(r.length-1).reduce(((e,t)=>e.or(t)))},Ao=e=>{let{baseQuery:t,sortFields:r,sort:n,directionTowardSibling:o,fieldValues:a}=e;return function e(i){if(-1===i)return[];const s=r[i];if(!a[s])return e(i-1);return[(0,Ke.flow)(xo(n,o),Mo(n[s],o,s,a[s]),Fo(i,r,a))(t),...e(i-1)]}},xo=(e,t)=>r=>Object.entries(e).reduce(((e,r)=>{let[n,o]=r;return o===t?e.ascending(n):e.descending(n)}),r),Mo=(e,t,r,n)=>o=>e===t?o.gt(r,n):o.lt(r,n),Fo=(e,t,r)=>n=>(0,Ke.range)(e).reduce(((e,n)=>e.eq(t[n],r[t[n]])),n).limit(1);class Lo{constructor(e){if(!e.stack){const{message:t,code:r}="string"==typeof e?{message:e,code:"WD_VALIDATION_FAILED"}:e,n=new Error(t);return n.code=r,n}return e}}class Uo{constructor(e){o()(this,"warmupData",void 0),this.warmupData=e}getSchemas(){return this.warmupData.get("schemas")}setSchemas(e){this.warmupData.set("schemas",e)}getDataStore(){return this.warmupData.get("dataStore")}setDataStore(e){this.warmupData.set("dataStore",e)}getUserFilterInitialData(e){return this.warmupData.get("userFilterInitialData-"+e)}setUserFilterInitialData(e,t){this.warmupData.set("userFilterInitialData-"+e,t)}}function ko(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var jo=new WeakMap,Vo=new WeakMap,Wo=new WeakMap,Go=new WeakMap;class Bo{constructor(e){if(ko(this,jo,{writable:!0,value:void 0}),ko(this,Vo,{writable:!0,value:void 0}),ko(this,Wo,{writable:!0,value:void 0}),ko(this,Go,{writable:!0,value:void 0}),e&&e.config){u()(this,jo,e.config.dataset.collectionName),u()(this,Vo,e.items),u()(this,Wo,e.schemas);const t=e.nextCursor||void 0,r=e.totalCount||0,n=(e.items||[]).length;u()(this,Go,{cursor:t,total:r,loaded:n})}}getSchemas(){return c()(this,Wo)}getDataStore(){if(c()(this,Vo))return(e=>{let{items:t,datasetSize:r,collectionId:n}=e;return{recordInfosInDatasetOrder:[{itemIds:t.map((e=>{let{_id:t}=e;return t})),datasetSize:r,collectionId:n}],recordsByCollectionId:{[n]:ao(t,{})}}})({items:c()(this,Vo),datasetSize:c()(this,Go),collectionId:c()(this,jo)})}getItems(){return c()(this,Vo)}}class qo{constructor(e){let{experiments:t,settings:{env:r}}=e;return{get fes(){return t.enabled("specs.wixDataViewer.EnableFES")},get warmupData(){return r.live},get dropdownOptionsDistinct(){return t.enabled("specs.wixDataViewer.DropdownDistinctOptions")},get newCurrentPageIndex(){return t.enabled("specs.wixDataViewer.NewCurrentPageIndex")},get seoIntegration(){return t.enabled("specs.wixDataViewer.SeoIntegration")},get linkTarget(){return t.enabled("specs.wixDataClient.LinkTarget")}}}}const zo={dsn:"https://e788f1b6d7b54d3482c54d1e27b95f38@sentry.wixpress.com/165"},$o={dsn:"https://bd7df26433634b41b7e711922156bff7@sentry.wixpress.com/166"},Ho={dsn:"https://adc03f08d1814b5a835f586aaba9d8ff@sentry.wixpress.com/159"},Xo={dsn:"https://27180ecd50484e4eafe543b40d29866d@sentry.wixpress.com/89"},Yo={dsn:"https://73a0410004ae41b7b60ca1c4b4684996@sentry.wixpress.com/183"},Jo={dsn:"https://9653fbb3e48143d890dba8a09a5a98c6@sentry.wixpress.com/184"},Qo={dsn:"https://7f23189a6c7a4329936b36eef60054eb@sentry-next.wixpress.com/995"},Ko=["ReactSource","EditorSource","experiments","petri_ovr","WixCodeRuntimeSource","js-wixcode-sdk-override","debug"],Zo=e=>{try{const t=(e=>Array.from(new URL(e).searchParams.entries()).reduce(((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r})),{}))(e||"");return(e=>"true"===e.forceReportSentry)(t)||(e=>Object.keys(e).every((e=>!Ko.includes(e))))(t)}catch(e){return!0}},ea=[e=>(e=>{var t,r,n;return[null===(r=null===(t=null==e?void 0:e.request)||void 0===t?void 0:t.headers)||void 0===r?void 0:r.Referer,null===(n=null==e?void 0:e.request)||void 0===n?void 0:n.url]})(e).every(Zo)],ta=(e,t)=>ea.concat(t||(e=>e)).every((t=>t(e))),ra=e=>{try{return e()}catch(e){return"unknown"}},na=e=>{try{return e()}catch(e){return"object"==typeof e&&null!==e&&"message"in e?e.message:void 0}},oa=({Raven:e,globalScope:t,dsn:r,params:n={},appName:o})=>{/https?:\/\/localhost/.test(Z())||((({Raven:e,appName:t,browserUrlGetter:r,dsn:n,params:o})=>{const a=ee(t),i=K(a);e.config(n,{maxUrlLength:1e3,captureUnhandledRejections:!1,autoBreadcrumbs:{dom:!1}}),e.setRelease(o.release||i),e.setShouldSendCallback(o.shouldSendCallback||ta),e.setDataCallback(((e,t)=>(e.request=Object.assign(e.request||{},{url:r()}),(t||(e=>e))(e))))})({Raven:e,appName:o,browserUrlGetter:()=>ra((()=>{var e;return null===(e=null==t?void 0:t["wix-location"])||void 0===e?void 0:e.url})),dsn:r,params:n}),e.setDataCallback(((e,r=(e=>e))=>(e.extra=Object.assign(e.extra||{},(e=>({referrer:na((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.referrer})),workerUrl:na((()=>{var t;return null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href}))}))(t)),e.tags=Object.assign(e.tags||{},n.tags||{},(e=>({renderMode:ra((()=>{var t,r;return null===(r=null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.rendering)||void 0===r?void 0:r.env})),viewMode:ra((()=>{var t;return null===(t=null==e?void 0:e["wix-window"])||void 0===t?void 0:t.viewMode})),santaVersion:ra((()=>{var t;return(e=>{const t=e.match(/santa\/([^/]*)/);return t?t[1]:"unknown"})((null===(t=null==e?void 0:e.location)||void 0===t?void 0:t.href)||"")}))}))(t)),r(e)))))};function aa(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}const{USER_SCOPE:ia,APPLICATION_SCOPE:sa,SERVER_SCOPE:ca}=D.scopes,{DBSMViewer:{dsn:la},UserErrors:{dsn:ua},WixData:{dsn:da}}=r,pa={[sa]:la,[ia]:ua,[ca]:da};let fa=function(e,t){return r=>this.mode.dev?(e===Error&&(this.console.error(r),r.cause&&this.console.error("Caused by:",r.cause)),null==r.run?void 0:r.run()):t(r)};var ha=new WeakMap,ma=new WeakMap,ga=new WeakMap,ya=new WeakMap,va=new WeakMap,Ia=new WeakMap;class wa{constructor(e){let{fedops:t,bi:r,monitor:n,verbose:o,console:a,global:i,settings:s}=e;aa(this,ha,{writable:!0,value:void 0}),aa(this,ma,{writable:!0,value:void 0}),aa(this,ga,{writable:!0,value:void 0}),aa(this,ya,{writable:!0,value:void 0}),aa(this,va,{writable:!0,value:void 0}),aa(this,Ia,{writable:!0,value:void 0});const c=a.factory();fa=fa.bind({mode:s.mode,console:c}),u()(this,ha,this._createEventToHandler()),u()(this,ma,this._createFedopsLogger(t)),u()(this,ga,this._createBiLoggers({bi:r,settings:s})),u()(this,ya,this._setupMonitor({monitor:n,global:i,settings:s})),u()(this,va,o.factory()),u()(this,Ia,c)}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1)return t.map((e=>this.log(e)));const[n]=t,[,o]=Array.from(c()(this,ha)).find((e=>{let[t]=e;return t.prototype.isPrototypeOf(n)}))||[];return o?o(n):c()(this,Ia).error("Oj-vej! This event is not supported by logger",n)}_createEventToHandler(){return new Map([[Error,fa(Error,(e=>{if(e instanceof F)c()(this,Ia).warn("You have unhandled error in async operation. Consider catching it and handling accordingly.\n",e.cause);else{const{scope:t,cause:r,options:{extra:n,...o}={}}=e;e instanceof N&&(c()(this,Ia).error(e),r&&c()(this,Ia).error("Caused by:",r)),c()(this,ya)[t].captureException(e,{zone:t,extra:{cause:r,...n},...o})}}))],[Ue,fa(Ue,(e=>{let{event:t,type:r}=e;return r===Ue.types.ERROR?c()(this,ga).errorLogger.log(t):c()(this,ga).logger.log(t)}))],[Ge,fa(Ge,(e=>{let{name:t,params:r,run:n,onStart:o,onEnd:a}=e;return o((()=>c()(this,ma).interactionStarted(t,r))),a((()=>c()(this,ma).interactionEnded(t,r))),n()}))],[Be,fa(Be,(e=>{let{event:t}=e;return c()(this,ya)[sa].captureBreadcrumb(t)}))],[$e,e=>{let{messages:t}=e;return c()(this,va).log(...t)}],[He,e=>{let{message:t,level:r}=e;return c()(this,Ia)[r](t)}]])}_createFedopsLogger(e){let{factory:t,hooks:{start:r,end:n}}=e;return t.getLoggerForWidget({appId:"databinding",appName:"databinding",startHook:r,endHook:n})}_createBiLoggers(e){let{bi:{factory:t},settings:{env:r}}=e;return{logger:t().logger({endpoint:r.editor?"platform":"platform-viewer"}),errorLogger:t().logger({endpoint:"trg"})}}_setupMonitor(e){let{monitor:{factory:t},global:r,settings:{metaSiteId:n,userId:o}}=e;return Object.entries(pa).reduce(((e,a)=>{let[i,s]=a;const c=t(s);return e[i]=c,oa({dsn:s,Raven:c,globalScope:r,appName:Fe,user:{id:o},params:{tags:{msid:n}}}),e}),{})}}function Ea(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var _a=new WeakMap,Ta=new WeakMap,Sa=new WeakMap,Ra=new WeakMap,ba=new WeakMap;class Oa{constructor(){Ea(this,_a,{writable:!0,value:{}}),Ea(this,Ta,{writable:!0,value:{}}),Ea(this,Sa,{writable:!0,value:{}}),Ea(this,Ra,{writable:!0,value:{}}),Ea(this,ba,{writable:!0,value:{}})}getData(e){let{datasetId:t,collectionId:r,includes:n}=e;const o=c()(this,_a)[t];return o?{datasetSize:o.datasetSize,items:o.itemIds.map((e=>Ca(c()(this,Ta)[r][e],this.getSchema(r),n)))}:null}getRecord(e){var t;let{collectionId:r,recordId:n,includes:o}=e;const a=null==(t=c()(this,Ta)[r])?void 0:t[n];return a&&Ca(a,this.getSchema(r),o)}updateCollectionData(e){let{collectionId:t,data:r}=e;const{[t]:n}=c()(this,Ta),{[t]:o}=c()(this,Sa),{items:a,uniqueFieldValues:i}=r;c()(this,Ta)[t]=Da(a,n),c()(this,Sa)[t]=Pa(i,o)}getSchema(e){return c()(this,Ra)[e]}updateStore(e){let{recordsByCollectionId:t={},recordInfosByDatasetId:r={},uniqueFieldValuesByCollection:n={}}=e;u()(this,_a,{...c()(this,_a),...r});for(const[e,r]of Object.entries(t))c()(this,Ta)[e]={...c()(this,Ta)[e],...r};for(const[e,t]of Object.entries(n))c()(this,Sa)[e]={...c()(this,Sa)[e],...t}}getStore(){return{recordInfosByDatasetId:c()(this,_a),recordsByCollectionId:c()(this,Ta),uniqueFieldValuesByCollection:c()(this,Sa)}}hasDataset(e){return Boolean(c()(this,_a)[e])}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;c()(this,Sa)[t]={...c()(this,Sa)[t],[r]:n}}getUniqueFieldValues(e){var t;let{collectionId:r,fieldKey:n}=e;return null==(t=c()(this,Sa)[r])?void 0:t[n]}updateSchemas(e){for(const[t,r]of Object.entries(e))c()(this,Ra)[t]={...c()(this,Ra)[t],...r}}getSchemas(){return c()(this,Ra)}getUserFilterInitialData(e){return c()(this,ba)[e]}setUserFilterInitialData(e,t){c()(this,ba)[e]=t}}const Ca=(e,t,r)=>Object.entries(e).reduce(((e,n)=>{let[o,a]=n;return((e,t)=>{var r,n;return(null==t||null==(r=t.fields)||null==(n=r[e])?void 0:n.type)===m.FieldType.reference})(o,t)&&((e,t)=>!e||!e.includes(t))(r,o)&&Boolean(null==a?void 0:a._id)?e[o]=a._id:e[o]=a,e}),{}),Da=function(e,t){return void 0===t&&(t={}),e.reduce(((e,t)=>{const r=e[t._id];return e[t._id]=r?(0,Ke.mergeWith)(r,t,oo):t,e}),t)},Pa=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),{...t,...e}};function Na(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Aa=new WeakMap,xa=new WeakMap,Ma=new WeakMap,Fa=new WeakMap,La=new WeakMap,Ua=new WeakMap,ka=new WeakMap;class ja{constructor(){Na(this,Aa,{writable:!0,value:void 0}),Na(this,xa,{writable:!0,value:void 0}),Na(this,Ma,{writable:!0,value:void 0}),Na(this,Fa,{writable:!0,value:void 0}),Na(this,La,{writable:!0,value:void 0}),Na(this,Ua,{writable:!0,value:void 0}),Na(this,ka,{writable:!0,value:void 0});const{logger:e,dataFetcher:t}=j;u()(this,xa,t),u()(this,Aa,e),u()(this,Ma,new Oa),u()(this,Fa,{}),u()(this,La,Promise.resolve())}createInitialDataRequest(e){u()(this,Fa,e.reduce(((e,t)=>{let{id:r,refresh:n}=t;return n||!c()(this,Ma).hasDataset(r)?{...e,[r]:new z}:e}),{}));const t=Object.entries(c()(this,Fa)).map((e=>{let[,{promise:t}]=e;return t}));u()(this,La,this._waitForDataFetched(t).then((()=>u()(this,Fa,{}))))}async getInitialData(e){let{datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}=e;return c()(this,Fa)[t]&&(c()(this,Fa)[t].resolve({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,length:i,includes:s,uniqueFieldValues:l}),await c()(this,La)),c()(this,Ma).getData({datasetId:t,collectionId:r,includes:s})||this.getData({datasetId:t,collectionId:r,cursorPaging:n,filter:o,sort:a,offset:0,length:i,includes:s,uniqueFieldValues:l})}async getData(e){const{collectionId:t,cursorPaging:r,offset:n,filter:o,sort:a,includes:i,length:s,datasetSize:l,uniqueFieldValues:u}=e,d=e=>!this.getUniqueFieldValues({collectionId:t,fieldKey:e}),{items:p,totalCount:f,nextCursor:h,uniqueFieldValues:m}=await c()(this,xa).fetchData({collectionId:t,offset:n,filter:o,sort:a,includes:i,cursor:r?null==l?void 0:l.cursor:void 0,length:s,uniqueFieldValues:u.filter((e=>d(e)))}).catch(Wa("Data fetching failed",{datasetConfig:e}));return await c()(this,Ua),c()(this,Ma).updateCollectionData({collectionId:t,data:{items:p,uniqueFieldValues:m}}),{items:p,datasetSize:{total:f,loaded:((null==l?void 0:l.loaded)||0)+p.length,cursor:h},uniqueFieldValues:m}}async remove(e){let{collectionId:t,recordId:r}=e;return c()(this,xa).remove({collectionId:t,recordId:r}).catch(Wa("Record removing failed",{collectionId:t,recordId:r}))}async save(e){let{collectionId:t,record:r,includeReferences:n}=e;return c()(this,xa).save({collectionId:t,record:r,includeReferences:n}).catch(Wa("Record saving failed",{collectionId:t,record:r,includeReferences:n}))}async getSibling(e){return await c()(this,xa).getSibling(e)}async loadSchemas(e){const t=c()(this,Ma).getSchemas(),r=e.filter((e=>!t[e]));u()(this,Ua,r.length?c()(this,xa).fetchSchemas(r).catch(Wa("Schema fetching failed",{collectionIds:r})):Promise.resolve({}));const n=await c()(this,Ua);return c()(this,Ma).updateSchemas({...t,...n}),c()(this,Ma).getSchemas()}async setSchemas(e){c()(this,Ma).updateSchemas(e)}getSchemas(){return c()(this,Ma).getSchemas()}getRecord(e){let{collectionId:t,recordId:r,includes:n}=e;return c()(this,Ma).getRecord({collectionId:t,recordId:r,includes:n})}getSchema(e){return c()(this,Ma).getSchema(e)}hasSchema(e){return Boolean(this.getSchema(e))}getReferencedSchemas(e){const t=this.getSchema(e),r=c()(this,Ma).getSchemas();return(e=>e?(0,Ke.flow)((e=>(0,Ke.pickBy)(e,(e=>{let{referencedCollection:t}=e;return Boolean(t)}))),(e=>(0,Ke.map)(e,(e=>{let{referencedCollection:t}=e;return t}))),Ke.uniq,(e=>e.filter(Boolean)))(e.fields):[])(t).reduce(((e,t)=>({...e,[t]:r[t]})),{})}setCollectionData(e){let{collectionId:t,data:r}=e;r&&c()(this,Ma).updateCollectionData({collectionId:t,data:r})}setStore(e){e&&c()(this,Ma).updateStore(e)}setStaticStore(e){const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollectionId:n}=e,o=c()(this,ka).find((e=>{let{type:t}=e;return t===Vr}));if(o){const{datasetId:e}=o,a={[e]:r[0]};c()(this,Ma).updateStore({recordsByCollectionId:t,recordInfosByDatasetId:a,uniqueFieldValuesByCollectionId:n})}}getStore(){return c()(this,Ma).getStore()}setUniqueFieldValues(e){let{collectionId:t,fieldKey:r,data:n}=e;return c()(this,Ma).setUniqueFieldValues({collectionId:t,fieldKey:r,data:n})}getUniqueFieldValues(e){let{collectionId:t,fieldKey:r}=e;return c()(this,Ma).getUniqueFieldValues({collectionId:t,fieldKey:r})}createSimpleFilter(e,t){return c()(this,xa).createSimpleFilter(e,t)}setDatasetConfigs(e){u()(this,ka,e)}getUserFilterInitialData(e){return c()(this,Ma).getUserFilterInitialData(e)}setUserFilterInitialData(e,t){c()(this,Ma).setUserFilterInitialData(e,t)}async _fetchInitialData(e){try{const{recordsByCollectionId:t,recordInfosInDatasetOrder:r,uniqueFieldValuesByCollection:n}=await c()(this,Aa).log(new Ge("dataset/fetchPrimaryInitialData",(()=>c()(this,xa).fetchBulkData(e))));return{recordsByCollectionId:t,recordInfosByDatasetId:r.reduce(((t,r,n)=>{let{itemIds:o=[],error:a,nextCursor:i,totalCount:s}=r;const l=e[n];return a&&c()(this,Aa).log(new Va("Initial data fetching failed for one of the datasets",{cause:a,extra:{datasetConfig:l}})),t[l.datasetId]={itemIds:o,datasetSize:{total:s,loaded:o.length,cursor:i}},t}),{}),uniqueFieldValuesByCollection:n}}catch(t){throw new P("Initial data fetching failed",{cause:t,extra:{datasetConfigs:e}})}}async _waitForDataFetched(e){if(e.length){const t=await Promise.all(e),r=await this._fetchInitialData(t);await c()(this,Ua),c()(this,Ma).updateStore(r)}}}class Va{constructor(e,t){let{cause:r,...n}=t;return new(x.codes.includes(r.code)?x:M)(e,{...n,cause:r,code:r.code})}}const Wa=(e,t)=>r=>{throw new Va(e,{cause:r,extra:t})},Ga="PRIMARY";var Ba=a(8582),qa=a.n(Ba);const za=function(e,t,r){return void 0===r&&(r=[]),e(t)?[{path:(0,Ke.clone)(r),filterExpression:t}]:(n=t,Array.isArray(n)||(0,Ke.isPlainObject)(n)?(0,Ke.flatMap)(t,((t,n)=>za(e,t,r.concat(n)))):[]);var n},$a=e=>t=>t.reduce(((e,t)=>{let{path:r,filterExpression:n}=t;return((e,t,r)=>(0,Ke.set)(e,t,r))(e,r,n)}),(0,Ke.cloneDeep)(e)),Ha=(e,t,r)=>{const n=((e,t)=>qa()(Ze.Maybe,t.map((t=>{let{path:r,filterExpression:n}=t;return e(n).map((e=>({path:r,filterExpression:e})))}))))(t,za(e,r));return n.map($a(r))};var Xa=()=>()=>Ze.Maybe.fromNullable(j.platform.user).map((e=>{let{id:t,loggedIn:r}=e;return r?t:null}));var Ya=e=>t=>{let{filterId:r}=t;return Ze.Maybe.fromNullable(e(r)).chain((e=>{let t,{masterDataset:r,fieldName:n}=e;try{t=r.api.getCurrentItem()}catch(e){}return Ze.Maybe.fromNullable(t).map((e=>{const t=e[n];return void 0===t?null:t}))}))};const Ja=e=>Ka(e).chain((e=>{let[t,r]=e;return"$not"===t&&(0,Ke.isArray)(r)?Qa({positive:!1,filterExpression:r[0]}):Ze.Maybe.Nothing()})).orElse((()=>Qa({positive:!0,filterExpression:e}))),Qa=e=>{let{positive:t,filterExpression:r}=e;return Ka(r).chain((e=>{let[r,n]=e;return Ka(n).map((e=>{let[n,o]=e;return{field:r,condition:n,value:o,positive:t}}))}))},Ka=e=>{if(!(0,Ke.isPlainObject)(e))return Ze.Maybe.Nothing();const t=(0,Ke.entries)(e)[0];return Ze.Maybe.fromNullable(t)},{stringArray:Za,number:ei}=m.FieldType;const ti=(e,t)=>(0,Ke.get)(e,t),ri=e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return!(0,Ke.isEqual)(ti(t,n),ti(r,n))},ni=e=>{const{properties:t,events:r,behaviors:n}=e,o={};return(0,Ke.forEach)(t,((e,t)=>{let{fieldName:r}=e;o[t]=r})),(0,Ke.forEach)(r,((e,t)=>{let{action:r}=e;o[t]=r})),(0,Ke.forEach)(n,(e=>{let{type:t}=e;o.text=t})),o},{mediaGallery:oi}=m.FieldType,ai="datetime",ii=e=>/^\d{2}:\d{2}:\d{2}\.\d{3}$/.test(e),si=e=>e instanceof Date&&!isNaN(e),ci=e=>{let{time:t,date:r}=e;const[n,o]=t.split(":");return r.setHours(n),r.setMinutes(o),r.setSeconds(0),r.setMilliseconds(0),r},li=e=>e.toTimeString().split(" ")[0]+".000",ui=e=>{const t=new Date(e);return si(t)?t:(e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t})()},di=e=>String(e).padStart(2,"0"),pi=e=>[e.getFullYear(),di(e.getMonth()+1),di(e.getDate())].join("-");var fi=e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;return o?(e=>{let{value:t,formatter:r,fieldType:n,format:o}=e;if(o.type===ai){const e=n===m.FieldType.date,a=e?new Date(t):t;return si(a)?r?r.formatDateTime(a,o.params.dateFormat,{timeZone:e?"UTC":void 0}):e&&"string"==typeof t?t:"":t}return t})({value:t,formatter:r,fieldType:n,format:o}):t},hi=e=>null==e||"function"!=typeof e.toString?"":Array.isArray(e)?e.join(", "):e.toString();const{mediaGallery:mi,address:gi,date:yi}=m.FieldType;var vi=(e,t)=>{let{fieldType:r,role:n,componentIsInput:o,propPath:a}=t;const i=[{converter:e=>{let{formatted:t}=e;return t},condition:e&&r===gi&&n!==ve},{converter:hi,condition:n===oe||!o&&![se,ie,Ee,Se].includes(n)&&r!==m.FieldType.boolean},{converter:e=>(e=>{let{value:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t);if(n.error)return t;switch(n.type){case r.types.IMAGE:return r.getScaleToFillImageURL(n.mediaId,n.width,n.height,n.width,n.height,{name:n.title});case r.types.VIDEO:return"https://video.wixstatic.com/video/"+n.mediaId+"/file";case r.types.AUDIO:return"https://static.wixstatic.com/mp3/"+n.mediaId;default:return t}})({value:e}),condition:"link"===a&&n!==Ie},{converter:()=>[],condition:!e&&r===mi},{converter:li,condition:n===we&&si(e)},{converter:e=>{const t=new Date(e);return null!==e&&si(t)?t:""===e||null===e?void 0:e},condition:n===pe&&r===yi}],s=i.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Ke.flow)(s)(e)},Ii=function(e){var t=function(e){var t=0;if(void 0===e||0===e.length)return t;for(var r=0;r<e.length;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t*=Math.sign(t),t=Math.sqrt(t),t=Math.floor(1e6*(t-Math.floor(t)))}(e);return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e,r){var n=Math.ceil(t/(r+1))%16;return("x"===e?n:3&n|8).toString(16)}))},wi=function(e){return void 0===e&&(e=""),e?e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-\.]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,""):""};function Ei(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ei(Object(r),!0).forEach((function(t){Ti(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ei(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ti(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Si=function(e,t){switch(typeof e){case"object":return"direct"===e.type?_i(_i({},e),{},{type:"web"}):{type:"wix",data:e};case"string":return{type:"web",url:e,target:t,text:e};default:return{target:"_blank",type:"none"}}},Ri=function(e){void 0===e&&(e={});var t={link:e.url};return e.url&&(t.target=e.target),t},bi=function(e){return null!==/^(wix:)?(image|video)(:\/\/)/.exec(e)},Oi=function(e){return bi(e)?e.split("/")[3]:e},Ci=function(e){try{return bi(e)?e.split("/")[4].split("#").slice(0,-1).join("#"):"_.jpg"}catch(e){return"_.jpg"}},Di=function(e,t){return"wix:image://v1/"+(e||wi(t.name))+"/"+wi(t.fileName||t.name)+"#originWidth="+t.width+"&originHeight="+t.height},Pi=function(e,t){return"wix:video://v1/"+(e||wi(t.name))+"/"+wi(t.fileName||t.name)+"#posterUri="+t.posters[0].url+"&posterWidth="+t.width+"&posterHeight="+t.height},Ni=function(e){var t={},r=!1;try{var n=/\/\d*_\d*\//.exec(e);if(n&&n[0]&&n[0].length>0){var o=n[0].replace(/\//g,"").split("_").map((function(e){return Number(e)})),a=o[0],i=o[1];a>0&&i>0&&(r=!0,t={originWidth:a,originHeight:i})}}catch(e){r=!1}if(!r)try{var s=/wm_(.*)\//.exec(e);if(s&&s[0]&&s[0].length>0){var c=s[1];c.length>0&&(t.watermark=c)}}catch(e){r=!1}if(!r)try{e.split("#").pop().split("&").map((function(e){return e.split("=")})).forEach((function(e){t[e[0]]=isNaN(Number(e[1]))?String(e[1]):Number(e[1])}))}catch(e){r=!1}return t},Ai=function(e,t){return void 0===t&&(t=0),function(e){return!!(e.src||e.type&&e.html)}(e)?function(e,t){var r,n,o,a=Ni(e.src);"video"===(null==(r=e.type)?void 0:r.toLowerCase())&&(null!=(n=e.src)&&n.includes("youtube")||null!=(o=e.src)&&o.includes("vimeo"))&&(a.originWidth=1920,a.originHeight=1080),a.width=e.width||a.originWidth||a.originalWidth||a.posterWidth||1,a.height=e.height||a.originHeight||a.originalHeight||a.posterHeight||1;var i=e.settings&&e.settings.focalPoint,s=a.watermark,c=e.imageToken||e.token||a.token,l=(e.type||"image").toLowerCase(),u=_i({itemId:wi(e.slug)||(wi(e.title||e.id)||Ii(e.src||e.html||t))+"_"+t,mediaUrl:Oi(e.src),metaData:Object.assign(_i({type:l,alt:e.alt||"",title:e.title||"",description:e.description||"",name:Ci(e.src),fileName:Ci(e.src),link:Si(e.link,e.target),width:a.width,height:a.height,sourceName:"private"},"customButtonText"in e&&{customButtonText:e.customButtonText}),i?{focalPoint:i}:{},s?{watermarkStr:s}:{}),orderIndex:t},c&&{token:c});if("text"===l){var d=e.style;u.metaData.height=a.height||500,u.metaData.width=a.width||500*d.layoutRatio,u.metaData.textStyle={width:u.metaData.width,height:u.metaData.height,backgroundColor:d.fillColor},u.metaData.html=u.editorHtml=e.html}if("video"===l){var p={};e.thumbnail&&(p=Ni(e.thumbnail));var f=function(e){return null!==/^.*\.(jpeg|jpg|webp|png|jpe)$/.exec(e)}(Oi(e.thumbnail))?Oi(e.thumbnail):a.posterUri;u.metaData.posters=[{url:f,width:p.width||a.width,height:p.height||a.height}],u.isExternal=0===e.src.indexOf("http"),u.isExternal||bi(e.src)?(u.metaData.source=e.src.indexOf("youtube.com")>0?"youtube":e.src.indexOf("vimeo.com")>0?"vimeo":"wix",u.metaData.videoUrl=e.src):u.metaData.qualities=[{width:a.width,height:a.height,quality:a.height+"p",formats:[bi(e.src)?"wix":e.src.split(/#|\?/)[0].split(".").pop().trim()]}]}return u}(e,t):function(e,t){return{itemId:Ii(t+"_"+(e.uri||e.alt||t)),mediaUrl:e.uri||"",metaData:{height:e.height||1,lastModified:Date.now(),link:Si(e.link,e.target),title:e.title||"",description:e.description||"",alt:e.alt||"",sourceName:"private",tags:[],width:e.width||1},orderIndex:t}}(e,t)},xi=function(e,t){return void 0===e&&(e={}),void 0===t&&(t=!0),t?function(e){void 0===e&&(e={});var t=e.metaData||e.metadata||{},r=Ri(t.link)||{},n=_i({type:t.type||"image",slug:e.itemId},r),o=n.type.toLowerCase();if("text"===o){var a=t.testStyle||{};Object.assign(n,{html:t.html,style:{width:a.width,height:a.height,bgColor:a.backgroundColor}})}else Object.assign(n,{title:t.title,description:t.description,alt:t.alt}),"image"===o?Object.assign(n,_i(_i({src:Di(e.mediaUrl,t),settings:Object.assign({},t.focalPoint?{focalPoint:t.focalPoint}:{})},"imageToken"in e&&{imageToken:e.imageToken}),"token"in e&&{token:e.token})):"video"===o&&Object.assign(n,{src:Pi(e.mediaUrl,t),thumbnail:t.posters[0].url});return n}(e):(n=(r=e).metaData||r.metadata||{},o=Ri(n.link)||{},_i({uri:r.mediaUrl,description:n.description,alt:n.alt,title:n.title,height:n.height,width:n.width},o));var r,n,o};const{mediaGallery:Mi,documentArray:Fi}=m.FieldType;var Li=e=>{let{value:t,currentValue:r=[],fieldType:n}=e;switch(n){case Mi:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return(e=>{let{uploadedFileUrl:t}=e;const{platform:{utils:{media:r}}}=j,n=r.parseMediaItemUri(t),o=r.createMediaItemUri(n).item,a=Ai({...n,src:o});return xi(a)})({uploadedFileUrl:t||r})}))];case Fi:return[...r,...t.map((e=>{let{fileUrl:t,url:r}=e;return t||r}))];default:return t[0].fileUrl||t[0].url}};const{reference:Ui,dateTime:ki,date:ji}=m.FieldType;var Vi=e=>{let{value:t,currentValue:r,fieldType:n,fieldName:o,role:a,utils:{referenceFetcher:i}={}}=e;const s=[{converter:e=>i(e,o),condition:n===Ui},{converter:e=>((e,t)=>{const r={},n={};if(ii(e))r.time=e,r.date=new Date;else{const t=ui(e);r.date=t,r.time=li(t)}return ii(t)?n.time=t:n.date=ui(t),ci({...r,...n})})(r,e),condition:n===ki&&[pe,we,fe].includes(a)},{converter:pi,condition:n===ji&&a===pe},{converter:e=>Li({value:e,currentValue:r,fieldType:n}),condition:a===he}],c=s.reduce(((e,t)=>{let{converter:r,condition:n}=t;return n&&e.push(r),e}),[]);return(0,Ke.flow)(c)(t)};const Wi=e=>{let{value:t,role:r,fieldType:n,propPath:o,componentIsInput:a,format:i,utils:{formatter:s}={}}=e;return(0,Ke.flow)([e=>fi({value:e,formatter:s,fieldType:n,format:i}),e=>vi(e,{fieldType:n,role:r,componentIsInput:a,propPath:o})])(t)},{Checkbox:Gi,Dropdown:Bi}=rt,qi=e=>e.type===Gi?"checked":"value",zi=e=>{let{component:t,connectionConfig:r,currentRecord:n,previousRecord:o,getFieldType:a,formatter:i,modeIsLivePreview:s,logger:c,PresetVerboseMessage:l}=e;if(!n)return;const{role:u,isInput:d}=t,{properties:p={}}=r,f={};Object.entries(p).forEach((e=>{let[r,l]=e;try{const{fieldName:e,format:c}=l,p=a(e).getOrElse(void 0),h=Wi({value:ti(n,e),role:u,componentIsInput:d,fieldType:p,propPath:r,format:c,utils:{formatter:i}});if(f[r]=h,(e=>{let{previousRecord:t,currentRecord:r,fieldName:n}=e;return(e=>!e)(t)||ri({previousRecord:t,currentRecord:r,fieldName:n})})({currentRecord:n,previousRecord:o,fieldName:e})){if(s&&(e=>void 0===e||""===e||Array.isArray(e)&&0===e.length)(h))return;t.setValue(h,{propPath:r,fieldType:p,binding:l})}}catch(e){c.log(new P("Failed setting "+r,{cause:e}))}})),c.log(new l($e.types.COMPONENT.FILLED,{component:t,description:f}))};var $i=e=>{let{getConnectedComponents:t,getFieldType:r}=e;return e=>{const n=t();if(!n)return Ze.Maybe.Nothing();const o=n.filter((e=>{let{role:t}=e;return t===ne}));return Ja(e).map((e=>{let{field:t,condition:n,value:a,positive:i}=e;const s=((e,t)=>e.map((e=>e===ei&&"string"==typeof t&&/^[+-]?(?:\d+\.?\d*|\d*\.?\d+)$/.test(t.trim())?Number(t):e===Za&&0===(0,Ke.get)(t,"length",0)?null:t)).getOrElse(t))(r(t),((e,t)=>{const{filterId:r}=e,n=t.find((e=>e.connectionConfig.filters[r]));if(!n)return;const o=qi(n);return n.getValue({propPath:o})})(a,o));if(!s&&0!==s)return{$and:[]};const c={[t]:{[n]:s}};return i?c:{$not:[c]}}))}},Hi=a(4479),Xi=a(8031),Yi=a(3878);const Ji=e=>(0,Hi.X)(e)||(0,Xi.X)(e)||Ki(e),Qi=e=>{let{valueResolvers:t,getConnectedComponents:r,getFieldType:n,getUserFilterInitialData:o,wasSetFilterCalled:a}=e;return e=>{const i=Ha(Ji,(e=>(0,Hi.X)(e)?t.currentUser():(0,Xi.X)(e)?t.dataBinding(e):Ki(e)?t.userInput(e):void 0),e).map((e=>{if(a())return e;const t=r().filter((e=>{let{role:t}=e;return Ne.includes(t)})).map((e=>{const{userInputFilter:t}=e.connectionConfig,{prop:r,fieldName:a}=t,i=e.getValue({propPath:r}),s=po(a)?to(a):a;if([Ae,"",!1].includes(i)||(0,Ke.isEqual)(i,[])||e.role===Pe&&(0,Ke.isEqual)(i,e.getBounds()))return null;const c=(e=>{let{value:t,fieldType:r,fieldName:n,getUserFilterInitialData:o}=e;switch(r){case m.FieldType.reference:{var a;const{referencedItemIdsByOption:e}=null==(a=o())?void 0:a.find((e=>e.fieldName===n&&xe.includes(e.role)));return e[t]}case m.FieldType.number:return Array.isArray(t)?t.map(Number):Number(t);default:return t}})({value:i,fieldType:n(s).getOrElse(null),fieldName:a,getUserFilterInitialData:o});return{[s]:e.role===Pe?{$gte:c[0],$lte:c[1]}:Array.isArray(c)?{$hasSome:c}:c}})).filter(Boolean);return 0===t.length?e:{$and:[e].filter(Boolean).concat(t)}}));return i}},Ki=e=>Ja(e).map((e=>{let{value:t}=e;return(0,Yi.X)(t)})).getOrElse(!1),Zi=e=>za(Xi.X,e),es=e=>!(0,Ke.isEmpty)(za(Yi.X,e)),ts=e=>es(e)||(e=>!(0,Ke.isEmpty)(za(Hi.X,e)))(e)||(e=>Zi(e).length>0)(e),{WRITE:rs}=e,ns=[le],os=[ce],as=(e,t,r)=>{const{readWriteType:n,deferred:o,filter:a,collectionName:i}=e,s=n===rs,c=r.some((e=>{let{role:t}=e;return t===re})),l=t===Vr,u=Boolean(o)&&!(c||l||s),d=a&&ts(a),p=(e=>{let{collectionId:t,datasetHasDynamicFilter:r,datasetIsDeferred:n,datasetIsRouter:o,datasetIsWriteOnly:a}=e;return t?r||n||o||a?"REGULAR":Ga:"UNCONFIGURED"})({collectionId:i,datasetHasDynamicFilter:d,datasetIsDeferred:u,datasetIsRouter:l,datasetIsWriteOnly:s});return{sequenceType:p,datasetIsWriteOnly:s,datasetIsMaster:c,datasetIsRouter:l,datasetIsDeferred:u,datasetHasDynamicFilter:d}},is=e=>{const t=e.reduce(((e,t)=>{var r,n;let{config:o,role:a,compId:i}=t;const s=null==o||null==(r=o.properties)||null==(n=r.value)?void 0:n.fieldName;if(!s)return e;const c=i+"-"+s;return os.includes(a)?(e.set(c,null),e):(ns.includes(a)&&!e.has(c)&&e.set(c,s),e)}),new Map);return(0,Ke.compact)(Array.from(t.values()))};var ss=e=>{const t=(0,Ke.values)({DATASET:jr,ROUTER_DATASET:Vr});return e.map((e=>{const{id:r,type:n,collectionId:o,filter:a,sort:i,pageSize:s,readWriteType:c,includes:l,nested:u,deferred:d,connections:p,dataIsInvalidated:f,updatedCompIds:h,dynamicPageData:m,cursor:g}=e;t.includes(n)||j.logger.log(new P("type of controller MUST be one of "+t+" but is "+n));const y=(0,Ke.defaults)({collectionName:o,filter:a,sort:i,includes:l,nested:u,pageSize:s,readWriteType:c,cursor:g,deferred:d,uniqueFieldValues:j.features.dropdownOptionsDistinct?is(p):[]},Yt);return{id:r,compId:r,type:n,livePreviewOptions:{shouldFetchData:f,compsIdsToReset:h},connections:p,dynamicPageData:m,config:{dataset:y,datasetStaticConfig:as(y,n,p)}}}))};const cs=/[^{}]+(?=\})/g,ls=/\{[^{}]+\}/g,us=/[^\dA-Za-z]/g,ds=e=>e.replace(/(\/{2,})/g,"/").replace(/^\//,""),ps=Symbol("isPristine"),fs=e=>e._id,hs=e=>({...e,[ps]:!1}),ms=(e,t)=>({...e,_id:t||O().v4(),[ps]:!0}),gs=(e,t)=>e&&t&&e._id===t._id,ys=e=>(0,Ke.omit)(e,[ps]),vs=e=>{let{record:t,draft:r,includes:n,nestedFieldKeys:o,fieldKey:a}=e;return(e=>{let{includes:t,nestedFieldKeys:r,fieldKey:n}=e;const o=null==t?void 0:t.includes(n),a=r.includes(n);return o||a})({includes:n,nestedFieldKeys:o,fieldKey:a})&&(e=>{let{record:t,draft:r,fieldKey:n}=e;return(0,Ke.isPlainObject)(t[n])&&(0,Ke.isPlainObject)(r[n])})({record:t,draft:r,fieldKey:a})};const Is={chain:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;return t({items:r,datasetSize:n,offset:o})}}),map:e=>t=>e.matchWith({Empty:()=>e,Results:e=>{let{items:r,datasetSize:n,offset:o}=e;const{items:a=r,datasetSize:i=n,offset:s=o}=t({items:r,datasetSize:n,offset:o});return ws.Results(a,i,s)}}),filter:e=>t=>e.matchWith({Empty:()=>e,Results:r=>{let{items:n,datasetSize:o,offset:a}=r;return t({items:n,datasetSize:o,offset:a})?e:ws.Empty()}}),orElse:e=>t=>e.matchWith({Empty:()=>t(),Results:()=>e}),get:e=>()=>e.matchWith({Empty:()=>({items:[],datasetSize:{total:0,loaded:0},offset:0}),Results:e=>e}),of:()=>Es},ws=(0,Ze.union)("QueryResults",{Empty:()=>({}),Results:function(e,t,r){return void 0===r&&(r=0),{items:e,datasetSize:t,offset:r}}},Is);function Es(e){let{items:t,datasetSize:r,offset:n}=e;return r&&Math.max(r.total,r.loaded)>0&&Array.isArray(t)?ws.Results(t,r,n):ws.Empty()}var _s={Empty:ws.Empty,Results:ws.Results,fromWixDataQueryResults:function(e,t){return e?this.of({items:e.items,datasetSize:e.datasetSize,offset:t}):ws.Empty()},of:Es};const Ts=e=>t=>({...t,...e}),Ss=(e,t)=>r=>t(e(r))(r),Rs=(e,t,r)=>{const n=new Map;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];const s=t(a),c=n.get(s);if(c&&r(a,c.args))return c.result;const l=e.apply(this,a);return n.set(s,{args:a,result:l}),l}},bs=e=>Ts({records:e}),Os=e=>t=>{var r,n,o;return{...t,datasetSize:{cursor:null==(r=t.datasetSize)?void 0:r.cursor,total:((null==(n=t.datasetSize)?void 0:n.total)||0)+e,loaded:((null==(o=t.datasetSize)?void 0:o.loaded)||0)+e}}},Cs=e=>{let{cursor:t,loaded:r,total:n}=e;return e=>({...e,datasetSize:{cursor:t,loaded:r+As(e),total:n+As(e)}})},Ds=e=>({...e,numSeedRecords:e.records.length}),Ps=e=>e.matchWith({Empty:()=>Cs({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r}=e;return(0,Ke.flow)(bs(t.map((e=>fs(e)))),Cs(r),Ds)}}),Ns=e=>t=>({...t,newRecordMarkers:e(t.newRecordMarkers)}),As=(e,t)=>e.newRecordMarkers.filter((e=>null==t||e<=t)).length,xs=function(e,t,r){let{overwrite:n=!0,fixIndex:o=!0}=void 0===r?{}:r;return Ss((r=>{const a=e+(o?As(r,e):0),i=Math.max(0,a-r.records.length),s=a+(n?t.length:0);return r.records.slice(0,a).concat(new Array(i)).concat(t.map((e=>fs(e)))).concat(r.records.slice(s))}),bs)},Ms=(e,t,r)=>n=>Object.assign({},e(n),...r.map((e=>({[t(e)]:e})))),Fs=(e,t,r)=>n=>({...e(n),[t]:r(e(n)[t])}),Ls=(e,t)=>r=>Object.assign({},...Object.keys(e(r)).filter((e=>e!==t)).map((t=>({[t]:e(r)[t]})))),Us=e=>Ts({records:e}),ks=e=>Ts({drafts:e}),js=(0,Ke.curry)(((e,t,r)=>Ts({scopes:{...r.scopes,[e]:t}})(r))),Vs=e=>t=>t.scopes[e],Ws=e=>Ss(Ms((e=>{let{records:t}=e;return t}),fs,e),Us),Gs=e=>Ss(Ms((e=>{let{drafts:t}=e;return t}),fs,[e]),ks),Bs=e=>Ss(Ls((e=>{let{drafts:t}=e;return t}),fs(e)),ks),qs=()=>ks({}),zs=e=>e.matchWith({Empty:()=>e=>e,Results:e=>{let{items:t}=e;return t.length>0?Ws(t):e=>e}}),$s=(e,t)=>Ss(Fs((e=>{let{drafts:t}=e;return t}),e,(0,Ke.flow)(hs,(e=>t=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;return(0,Ke.set)(e,r,n)}),(0,Ke.cloneDeep)(t)))(t))),ks),Hs=(e,t,r,n)=>{const o=t.records[e],a=t.drafts[e],i=(0,Ke.isPlainObject)(o),s=(0,Ke.isPlainObject)(a);return i&&s?(e=>{let{record:t,draft:{_id:r,...n},includes:o,nestedFieldKeys:a}=e;const i=Object.keys(n).filter((e=>vs({record:t,draft:n,includes:o,nestedFieldKeys:a,fieldKey:e}))),s={...t,...n};return i.reduce(((e,r)=>({...e,[r]:(0,Ke.merge)({},t[r],n[r])})),s)})({record:o,draft:a,includes:r,nestedFieldKeys:n}):i?{...o}:s?{...a}:null},Xs=(0,Ke.curry)(((e,t,r)=>Object.keys(r.scopes).filter((e=>t(r.scopes[e],e))).map((t=>e(r.scopes[t],t))))),Ys=(0,Ke.curry)((function(e,t,r,n,o,a,i){void 0===i&&(i=!1);const{records:s,datasetSize:c}=Vs(e)(a),l=r-t,u=s.slice(t,r).reduce(((e,t)=>{const r=Hs(t,a,n,o);return null!=r?e.concat(ys(r)):e}),[]);return _s.of({items:u,datasetSize:c,offset:t}).filter((function(e){let{items:t}=e;return i||t.length>=l}))})),Js=(0,Ke.curry)(((e,t)=>Ss((0,Ke.flow)(Vs(e),t),js(e)))),Qs=(0,Ke.curry)(((e,t)=>Ts({[e]:t}))),Ks=e=>t=>t[e],Zs=(0,Ke.curry)(((e,t)=>Ss((0,Ke.flow)(Ks(e),t),Qs(e)))),ec=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.isCursorPaging()))},tc=e=>{let{state:t}=e;const{size:r}=dn(t);return r},rc=e=>{let{state:t}=e;const{offset:r}=dn(t);return r},nc=e=>{let{state:t}=e;const{size:r,numPagesToShow:n}=dn(t);return r*n},oc=e=>{let{state:t}=e;const r=Rn(t);return null==r?null:r},ac=e=>{let{state:t}=e;if(null==oc({state:t}))return null;const{features:r}=j;if(r.newCurrentPageIndex){const{size:e,offset:r}=dn(t);return r/e+1}const{size:n,offset:o,numPagesToShow:a}=dn(t);return o/n+a},ic=e=>{let{recordStore:t}=e;return t().fold((()=>null),(e=>e.getDatasetSize()))},sc=e=>{let{state:t,recordStore:r}=e;const n=ic({recordStore:r});return n?Math.ceil(n.total/tc({state:t})):null},cc=e=>{let{recordStore:t}=e;return t().fold((()=>!1),(e=>{const t=e.getDatasetSize();return e.isCursorPaging()&&!(null==t||!t.cursor)}))},lc=e=>{let{state:t}=e;const r=oc({state:t});return null!=r&&r>0},uc=e=>{let{state:t,recordStore:r}=e;if(cc({recordStore:r}))return!0;const n=ic({recordStore:r});if(!n)return!1;const o=oc({state:t});return null!=o&&o<n.total-1},dc=e=>{let{state:t}=e;const{offset:r}=dn(t);return r>0},pc=e=>{let{state:t,recordStore:r}=e;if(cc({recordStore:r}))return!0;const n=ic({recordStore:r});if(!n)return!1;const{offset:o,size:a}=dn(t);return o+a<n.total},fc=async e=>{let{index:t,recordStore:r}=e;await r().fold((()=>{}),(e=>e.getRecords(t,1)))},hc=e=>e===Je,mc=e=>{let[{datasetId:t}]=e;return t},gc=(e,t)=>{let[r]=e,[n]=t;return(0,Ke.every)(r,((e,t)=>{return"filter"===t?(r=e,o=n[t],JSON.stringify(r)===JSON.stringify(o)):e===n[t];var r,o}))};var yc=e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:a,includes:i,nestedFieldKeys:s,uniqueFieldValues:c,readWriteType:l,cursorPagingRequired:u}=e;const{breadcrumbReporting:d}=j,p=()=>r[t],f=e=>{r[t]=e};((0,Ke.isEmpty)(p())||n||hc(l))&&f((e=>({[e]:{records:{},drafts:{},scopes:{}}}))(a));const h=[],g=Rs((e=>{let{pageSize:t,sort:r,filter:n,datasetId:g,referencedCollectionName:y,fixedRecordId:v}=e;const I=null!=y?y:a,w=JSON.stringify({filter:n,sort:r}),E=Ks(I),_=Zs(I),T=(0,Ke.flow)(E,Vs(w)),S=Js(w),R=()=>o.getSchema(I),b=e=>e-e%t,O=(0,Ke.memoize)((e=>{let{offset:t,length:a,datasetSize:s}=e;return o.getData({datasetId:g,length:a,collectionId:I,cursorPaging:L.isCursorPaging(),offset:t,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c,datasetSize:s}).then((e=>({items:e.items,datasetSize:e.datasetSize,offset:t})))}),(e=>{let{offset:t,length:r,datasetSize:n}=e;return[t,r,null==n?void 0:n.cursor].join("-")})),C=e=>L.isCursorPaging()?(async e=>{const t=[];let{datasetSize:r}=T(p());for(const{offset:n,length:o}of e){const e=await O({offset:n,length:o,datasetSize:r});if(t.push(e),r=e.datasetSize,!r.cursor)break}return t})(e):Promise.all(e.map((e=>{let{offset:t,length:r}=e;return O({offset:t,length:r})}))),D=(e,r,n)=>{const o=L.isCursorPaging()?0:b(r),a=(i=r,s=n,Math.ceil((b(i)+(s-b(i)))/t)*t);var i,s;const c=uo(R())||m.DefaultMaxPageSize[L.getPaging()],l=((e,t,r)=>{const n=e.records.slice(t,r),o=n.findIndex(d),a=((e,t)=>{if(t.length>0)for(let r=t.length-1;r>=0;r-=1)if(e(t[r]))return r;return-1})(d,n),i=p(o,t),s=p(a,r),c=As(e,i),l=i-c,u=s-c-l;return 0===u?Ze.Maybe.Nothing():Ze.Maybe.Just({offset:l,length:u});function d(e){return"string"!=typeof e}function p(t,r){return-1===t?Math.max(e.records.length,r):o+r}})(e,o,a),u=l.map((e=>{let{offset:t,length:r}=e;return r<=c?[{offset:t,length:r}]:(0,Ke.flatten)((0,Ke.times)(Math.ceil(r/c),(e=>[{offset:t+e*c,length:Math.min(c,r-e*c)}])))})).getOrElse([]);return C(u)},P=(e,t,r)=>qa()(Ze.Result,h.map((n=>Ze.Result.try((()=>n(null!=e?ys(e):null,null!=t?ys(t):null,r)))))),N=function(e,t,r){const n=T(p()).records[r],o=Hs(n,E(p()),i,s);if(null==o)return t();{const t=function(){f((0,Ke.flow)(...arguments)(p()))},u=e=>{const t=Hs(n,E(p()),i,s);return(0,Ke.isEqual)(o,t)?Ze.Result.Ok([]):P(o,t,e)};for(var a=arguments.length,c=new Array(a>3?a-3:0),l=3;l<a;l++)c[l-3]=arguments[l];return e({update:t,notifyIfChanged:u},o,r,...c)}},A=(e,t)=>function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return N(e,t,r,...o)},x=(e,t)=>async function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return N(e,t,r,...o)},M=(e,t)=>d(t,Be.with({category:"recordStore",message:e,data:{datasetId:g,scope:w}})),F=e=>{return e&&(t=fs(e),!E(p()).records[t]);var t},L={getRecords:M("getRecords",(async(e,t)=>{const{datasetSize:r}=T(p()),n=(e=>{let{from:t,length:r,datasetSize:n,cursorPaging:o}=e;if(!n)return t+r;const{total:a,loaded:i,cursor:s}=n,c=o?s?1/0:i:a;return Math.min(t+r,c)})({from:e,length:t,datasetSize:r,cursorPaging:L.isCursorPaging()}),o=Ys(w,e,n,i,s),a=hc(l)||!r||(e=>{let{loaded:t,total:r,cursor:n}=e;return!t&&!r&&!n})(r);return o(E(p()),a).orElse((async()=>{const t=await D(T(p()),e,n),r=_((0,Ke.flow)(...t.map((e=>{let{items:t,datasetSize:r,offset:n}=e;return _s.fromWixDataQueryResults({items:t,datasetSize:r},n)})).map((e=>(0,Ke.flow)(zs(e),S(e.matchWith({Empty:()=>Cs({total:0,loaded:0}),Results:e=>{let{items:t,datasetSize:r,offset:n}=e;return(0,Ke.flow)(Cs(r),t.length>0?xs(n,t):e=>e)}}))))))),a=p();var i,s;return f(r(p())),i=E(a),s=E(p()),Object.keys(i.records).filter((e=>(0,Ke.isPlainObject)(s.records[e])&&s.records[e]._updatedDate>i.records[e]._updatedDate)).forEach((e=>P(i.records[e],s.records[e]))),o(E(p()),!0)}))})),getRecordsLimitedByMaxPageSize:(e,t)=>{const r=Math.min(t,uo(R())||t);return L.getRecords(e,r)},seed:M("seed",(()=>{if(0===T(p()).numSeedRecords){return(v?o.getData({datasetId:g,length:t,collectionId:I,cursorPaging:void 0,offset:0,filter:n,sort:r,includes:null!=y?void 0:i,uniqueFieldValues:c}):o.getInitialData({datasetId:g,collectionId:I,filter:n,sort:r,includes:i,length:t,uniqueFieldValues:c})).then((e=>{const t=_s.fromWixDataQueryResults(e,0),r=_((0,Ke.flow)(zs(t),S(Ps(t))));f(r(p()))}))}return Promise.resolve()})),getTheStore:p,getPaging:()=>(({schema:e,cursorPagingPreferred:t})=>{var r,n,o;const a=null===(r=null==e?void 0:e.pagingMode)||void 0===r?void 0:r.includes(m.PagingMode.Offset),i=null===(n=null==e?void 0:e.pagingMode)||void 0===n?void 0:n.includes(m.PagingMode.Cursor);return 1===(null===(o=null==e?void 0:e.pagingMode)||void 0===o?void 0:o.length)&&i||a&&i&&t?m.PagingMode.Cursor:m.PagingMode.Offset})({schema:R(),cursorPagingPreferred:u}),isCursorPaging:()=>L.getPaging()===m.PagingMode.Cursor,getSeedRecords:M("getSeedRecords",(()=>Ys(w,0,T(p()).numSeedRecords,i,s,E(p()),!0))),getDatasetSize:M("getDatasetSize",(()=>T(p()).datasetSize)),getRecordById:M("getRecordById",(e=>Ze.Maybe.fromNullable(E(p()).records[e]))),removeRecord:M("removeRecord",x((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=fs(t);!F(t)&&i&&await o.remove({collectionId:I,recordId:i}),O.cache.clear();const s=Xs(((e,t)=>{return Js(t,(0,Ke.flow)((n=i,Ss((e=>e.records.filter((e=>e!==n))),bs)),Os(-1),Ns((r=((e,t)=>t.records.indexOf(e))(i,e),e=>e.filter((e=>e!==r))))));var r,n}),(c=i,e=>e.records.includes(c)),E(p()));var c;return n(_((0,Ke.flow)((0,Ke.flow)(Bs(t),(e=>Ss(Ls((e=>{let{records:t}=e;return t}),e),Us))(i)),...s))),a()}),(()=>Promise.resolve(Ze.Result.Error("cannot remove record: index not found"))))),reset:M("reset",(()=>{O.cache.clear(),f(_((0,Ke.flow)(js(w,{records:[],numSeedRecords:0,newRecordMarkers:[]}),qs()))(p()))})),newRecord:M("newRecord",((e,t)=>{const r=ms(t),n=_((0,Ke.flow)(Gs(r),S((0,Ke.flow)(Os(1),Ts({newRecordMarkers:[e]}),xs(e,[r],{overwrite:!1,fixIndex:!1})))));return f(n(p())),P(null,r),ys(r)})),saveRecord:M("saveRecord",x((async(e,t,r)=>{let{update:n,notifyIfChanged:a}=e;const i=await o.save({collectionId:I,record:ys(t),includeReferences:!0});return n(_((0,Ke.flow)((e=>Ws([e]))(i),Bs(t),S((0,Ke.flow)(((e,t)=>xs(e,[t],{fixIndex:!1}))(r,i),Ns((e=>e.filter((e=>e!==r))))))))),a(),ys(i)}),(()=>Promise.reject(new Error("cannot save record: index not found"))))),setFieldsValues:M("setFieldsValues",A(((e,t,r,n,o)=>{let{update:a,notifyIfChanged:i}=e;return Object.keys(n).length&&a(_($s(fs(t),n))),i(o)}),(()=>Ze.Result.Error("cannot update field values: index not found")))),isPristine:M("isPristine",A(((e,t)=>(e=>"boolean"!=typeof e[ps]||e[ps])(t)),(()=>!0))),hasDraft:M("hasDraft",A(((e,t)=>(e=>"boolean"==typeof e[ps])(t)),(()=>!1))),isNewRecord:M("isNewRecord",A(((e,t)=>F(t)),(()=>!0))),clearDrafts:M("clearDrafts",(()=>{f(_(qs())(p()))})),resetDraft:M("resetDraft",A(((e,t,r,n)=>{let{update:o,notifyIfChanged:a}=e;return o(_(F(t)?((e,t)=>Ss(Fs((e=>{let{drafts:t}=e;return t}),fs(e),(e=>ms(t,e._id))),ks))(t,n):Bs(t))),a()}),(()=>Ze.Result.Error("cannot reset draft: index not found")))),hasSeedData:M("hasSeedData",(()=>T(p()).numSeedRecords>0)),getUniqueFieldValues:M("getUniqueFieldValues",(e=>o.getUniqueFieldValues({collectionId:I,fieldKey:e})))};if(E(p())||f(Qs(I,{records:{},drafts:{},scopes:{}})(p())),!E(p()).scopes[w]){const e=[];if(v){const t=o.getRecord({collectionId:I,recordId:v,includes:i})||Hs(v,E(p()),i,s),r=t?[t]:[],n=r.length>0?_s.of({items:r,offset:0,datasetSize:{loaded:r.length,total:r.length}}):_s.Empty(),a=n.matchWith({Empty:Ze.Maybe.Nothing,Results:(0,Ke.flow)(_s.of,Ze.Maybe.Just)});(0,Ke.some)(r,F)&&e.push(zs(n)),a.fold((()=>{e.push(js(w,{records:[],numSeedRecords:0,newRecordMarkers:[]}))}),(t=>{e.push(js(w,Ps(t)({records:[],numSeedRecords:0,newRecordMarkers:[]})))}))}else e.push(js(w,{records:[],numSeedRecords:0,newRecordMarkers:[]}));f(_((0,Ke.flow)(...e))(p()))}return L.externalApi={getRecords:async(e,t)=>(await L.getRecords(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}})),getSeedRecords:()=>L.getSeedRecords().map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}})),getRecordsLimitedByMaxPageSize:async(e,t)=>(await L.getRecordsLimitedByMaxPageSize(e,t)).map((e=>{let{items:t,...r}=e;return{items:(0,Ke.cloneDeep)(t),...r}}))},L}),mc,gc);var y;return g.onChange=(y=h,e=>(y.push(e),()=>{const t=y.indexOf(e);t>=0&&y.splice(t,1)})),g};var vc=e=>{const t={};return{setController:(r,n)=>{let{repeaterId:o,itemId:a}=r;e.log(new Be({category:"scopeStore",message:"adding scope",data:{componentId:o,itemId:a}})),t[o]=t[o]||{},t[o][a]=n},getController:e=>{let{repeaterId:r,itemId:n}=e;const o=t[r];return o&&o[n]},removeController:r=>{let{repeaterId:n,itemId:o}=r;e.log(new Be({category:"scopeStore",message:"removing scope",data:{componentId:n,itemId:o}}));const a=t[n];(0,Ke.get)(a,o)&&(a[o].dispose(),(0,Ke.unset)(a,o))},getAll:()=>Object.values(t).reduce(((e,t)=>e.concat(Object.values(t))),[])}},Ic=a(7538);const wc=(0,Ze.union)("GoToIndexResult",{Record:(e,t)=>({index:e,record:t}),InvalidIndex:()=>({}),NoRecord:()=>({})}),Ec=function(e,t){return void 0===t&&(t=!1),{type:rr,index:e,suppressRefreshView:t}},_c=(e,t)=>({type:Qt,fieldsToUpdate:e,updateSource:t}),Tc=e=>({type:hr,atIndex:e}),Sc=()=>({type:gr}),Rc=async(e,t,r,n)=>{const o=await e(n).fold((()=>_s.Empty()),(e=>e.externalApi.getRecords(t,r)));return o.get()},bc=(e,t)=>Rc(e,rc({state:t}),nc({state:t})),Oc=e=>({type:yr,userFilterInitialData:e});var Cc={doFetch:Rc,fetchCurrentPage:bc,flushDraft:()=>({type:ur}),goToRecordByIndexResult:(e,t)=>({type:ir,error:e,payload:t}),incrementNumOfPagesToShow:()=>({type:er}),initWriteOnly:e=>e?Ec(0):Tc(0),loadPage:e=>({type:ar,pageNumber:e}),newRecord:Tc,newRecordResult:(e,t)=>({type:mr,error:e,payload:t}),nextPage:()=>({type:nr}),previousPage:()=>({type:or}),reInitWriteOnly:()=>Tc(0),refresh:Sc,refreshCurrentRecord:()=>({type:Kt}),refreshCurrentView:()=>({type:Zt}),refreshResult:(e,t)=>({type:ir,error:e,payload:t}),remove:()=>({type:pr}),removeCurrentRecordResult:(e,t)=>({type:fr,error:e,payload:t}),revert:()=>({type:cr}),revertResult:(e,t)=>({type:lr,error:e,payload:t}),saveRecordResult:(e,t)=>({type:dr,error:e,payload:t}),setCurrentIndex:Ec,setCurrentRecord:(e,t,r)=>({type:Jt,record:e,recordIndex:t,updateSource:r}),setDefaultRecord:e=>({type:tr,record:e}),updateCurrentViewResult:(e,t)=>({type:sr,error:e,payload:t}),updateFields:_c,GoToIndexResult:wc};var Dc=e=>({type:Zr,connections:e});var Pc=e=>({type:_r,filter:e}),Nc=e=>({type:Tr,sort:e}),Ac=e=>({type:Sr,isDatasetReady:e});var xc=a(6286),Mc=a.n(xc);var Fc=(e,t)=>{const{middleware:r,subscribe:n,onIdle:o}=Mc().createMiddleware(),a=zt(sn,void 0,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,o){var a,i=e(r,n,o),s=i.dispatch,c={getState:i.getState,dispatch:function(e){return s(e)}};return a=t.map((function(e){return e(c)})),s=Ht.apply(void 0,a)(i.dispatch),Xt({},i,{dispatch:s})}}}(r,((e,t)=>r=>r=>n=>(e.log(new Be({category:"redux",message:n.type+" (dataset: "+t+")",data:(0,Ke.omit)(n,"type","record")})),r(n)))(e,t)));return{store:a,subscribe:n,onIdle:o}};const{READ:Lc,WRITE:Uc,READ_WRITE:kc}=e,jc={[Lc]:"read-only",[Uc]:"write-only",[kc]:"read-write"},Vc=(e,t)=>{if(e)throw new A("Operation ("+t+") not allowed on a dataset with non-offset paging mode",{code:"OPERATION_NOT_ALLOWED"})},Wc=(e,t)=>{if(r=e(),kr.isDuringSave(r.records))throw new A("Operation ("+t+") not allowed during save",{code:"OPERATION_NOT_ALLOWED"});var r},Gc=function(e,t,r,n,o){void 0===t&&(t=""),void 0===o&&(o=!0),((e,t,r)=>{if(!fn(e()))throw new A(r===Vr?"Operation ("+t+") is not allowed because the field used to build this page's URL is empty":"Operation ("+t+") not allowed on an unconfigured dataset",{code:"OPERATION_NOT_ALLOWED"})})(e,t,n),function(e,t,r){void 0===r&&(r=[]);const n=pn(e());if(!(0,Ke.includes)(r,n))throw new A("Operation ("+t+") not allowed on "+jc[n]+" dataset",{code:"OPERATION_NOT_ALLOWED"})}(e,t,r),o||Wc(e,t)},Bc=(e,t)=>{if(!(0,Ke.isNumber)(t))throw new A("Parameter ("+e+") must be a number",{code:"DS_INVALID_ARGUMENT"})},qc=(e,t)=>{if(!(0,Ke.isInteger)(t)||t<1)throw new A("Parameter ("+e+") must be a positive integer number",{code:"DS_INVALID_ARGUMENT"})},zc=(e,t)=>{if(!(0,Ke.isFunction)(t))throw new A("The callback passed to ("+e+") must be a function",{code:"DS_INVALID_ARGUMENT"})},$c=(e,t)=>{if(!hn(e()))throw new A("The dataset didn't load yet. You need to call "+t+" inside the onReady for the dataset.",{code:"DS_NOT_LOADED"})},Hc=e=>{if(null==oc({state:e()}))throw new A("There is no current item",{code:"DS_NO_CURRENT_ITEM"})},Xc=(e,t)=>{if(e)throw new A('The "'+t+'" function cannot be called on the dataset because the dataset was selected using a repeated item scope selector.\nRead more about repeated item scope selectors: http://wix.to/94BuAAs/$w.Repeater.html#repeated-item-scope',{code:"OPERATION_NOT_ALLOWED"})},Yc=(e,t)=>{if(e!==Vr)throw new A('"'+t+'" function on the dataset is not allowed. "'+t+'" can only be called on a Dynamic Page Dataset.',{code:"OPERATION_NOT_ALLOWED"})};var Jc=e=>{let{datasetType:t,siblingDynamicPageUrlGetter:r}=e;const n={async getNextDynamicPage(){return null!=r?r.getNextDynamicPageUrl():null},async getPreviousDynamicPage(){return r?r.getPreviousDynamicPageUrl():null}};return(0,Ke.mapValues)(n,((e,r)=>function(){return Yc(t,r),e(...arguments)}))};const{READ:Qc,WRITE:Kc,READ_WRITE:Zc}=e;var el=e=>{let{store:{dispatch:t,getState:r},recordStore:n,eventListeners:{fireEvent:o,register:a},controllerStore:i,datasetId:s,datasetType:c,isFixedItem:l,siblingDynamicPageUrlGetter:u,onIdle:d,dispatcher:p,onReadyAsync:f}=e;const{logger:h,errorReporting:m,breadcrumbReporting:g,verboseReporting:y}=j,v=async function(){try{await t(Cc.flushDraft());const n=(e=r(),kr.selectLastSavedRecord(e.records)||Sn(r()));return(0,Ke.cloneDeep)(n)}catch(e){throw p.dispatch("datasetSaveError"),e}var e},I=async function(e,o){void 0===e&&(e=(e=>{let{state:t}=e;const r=oc({state:t});return null==r?0:r+1})({state:r()})),$c(r,o),Gc(r,o,[Kc,Zc],c,!1),Bc("atIndex",e),await v(),ec({recordStore:n})&&await fc({index:e,recordStore:n}),(e=>{let{index:t,datasetSize:{total:r,loaded:n}}=e;if(t<0||t>Math.max(r,n))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"})})({index:e,datasetSize:ic({recordStore:n})}),await t(Cc.newRecord(e))};return e=>{const p=e?(e,t)=>m(e,N.withMessage("An error occurred in one of "+t+" callbacks")):Ke.identity,w={async isIdle(){await new Promise((e=>{const t=d((()=>{t(),e()}))}))},onBeforeSave:e=>(zc("onBeforeSave",e),Gc(r,"onBeforeSave",[Kc,Zc],c,!1),a("beforeSave",p(e,"beforeSave"))),onAfterSave:e=>(zc("onAfterSave",e),Gc(r,"onAfterSave",[Kc,Zc],c,!1),a("afterSave",p(e,"afterSave"))),async save(){Gc(r,"save",[Kc,Zc],c,!1);const e=await v();return gn(r())&&await t(Cc.reInitWriteOnly()),e},async getItems(e,t){Gc(r,"getItems",[Qc,Zc],c,!1),Bc("fromIndex",e),Bc("numberOfItems",t);const{items:o,offset:a,datasetSize:i}=await Cc.doFetch(n,e,t);return{items:o,totalCount:ec({recordStore:n})?void 0:i.total,offset:a}},getTotalCount:()=>(Gc(r,"getTotalCount",[Qc,Zc],c,!1),hn(r())?(Vc(ec({recordStore:n}),"getTotalCount"),ic({recordStore:n}).total):null),getCurrentItem:()=>{Gc(r,"getCurrentItem",[Qc,Kc,Zc],c);const e=Sn(r());return e?(0,Ke.cloneDeep)(e):null},getCurrentItemIndex:()=>(Gc(r,"getCurrentItemIndex",[Qc,Zc],c),oc({state:r()})),async setCurrentItemIndex(e){Xc(l,"setCurrentItemIndex"),Gc(r,"setCurrentItemIndex",[Qc,Zc],c,!1),(e=>{if(!(0,Ke.isInteger)(e))throw new A("Parameter ("+e+") must be a number",{code:"PARAMETER_NOT_ALLOWED"})})(e),await new Promise((e=>_.onReady(e))),mn(r())||await v(),await t(Cc.setCurrentIndex(e))},setFieldValue:(e,n)=>{$c(r,"setFieldValue"),Gc(r,"setFieldValue",[Kc,Zc],c),Hc(r),t(Cc.updateFields({[e]:(0,Ke.cloneDeep)(n)}))},setFieldValues:e=>{$c(r,"setFieldValues"),Gc(r,"setFieldValues",[Kc,Zc],c),Hc(r),t(Cc.updateFields((0,Ke.mapValues)(e,Ke.cloneDeep)))},async next(){if(Xc(l,"next"),$c(r,"next"),Gc(r,"next",[Qc,Zc],c,!1),mn(r())||await v(),!_.hasNext())throw new A("There are no more items in the dataset",{code:"NO_SUCH_ITEM"});const e=oc({state:r()});return await t(Cc.setCurrentIndex(e+1)),_.getCurrentItem()},async previous(){if(Xc(l,"previous"),$c(r,"previous"),Gc(r,"previous",[Qc,Zc],c,!1),mn(r())||await v(),!_.hasPrevious())throw new A("This is the first item in the dataset",{code:"NO_SUCH_ITEM"});const e=oc({state:r()});return await t(Cc.setCurrentIndex(e-1)),_.getCurrentItem()},hasNext:()=>(Gc(r,"hasNext",[Qc,Zc],c),uc({state:r(),recordStore:n})),hasPrevious:()=>(Gc(r,"hasPrevious",[Qc,Zc],c),lc({state:r()})),async new(e){return I(e,"new")},async add(e){return I(e,"add")},async remove(){$c(r,"remove"),Gc(r,"remove",[Zc],c,!1);if(null==oc({state:r()}))throw new A("Invalid index",{code:"DS_INDEX_OUT_OF_RANGE"});await t(Cc.remove())},async revert(){return $c(r,"revert"),Gc(r,"revert",[Kc,Zc],c,!1),Hc(r),t(Cc.revert())},async refresh(){$c(r,"refresh"),Gc(r,"refresh",[Qc,Kc,Zc],c,!1),await t(Cc.refresh())},onCurrentIndexChanged:e=>(zc("onCurrentIndexChanged",e),Gc(r,"onCurrentIndexChanged",[Zc,Qc],c,!1),a("currentIndexChanged",p(e,"currentIndexChanged"))),onItemValuesChanged:e=>(zc("onItemValuesChanged",e),Gc(r,"onItemValuesChanged",[Zc,Kc],c,!1),a("itemValuesChanged",p(e,"itemValuesChanged"))),onError:e=>(zc("onError",e),Gc(r,"onError",[Zc,Qc,Kc],c,!1),a("datasetError",p(e,"datasetError"))),onReady:e=>(zc("onReady",e),Gc(r,"onReady",[Qc,Kc,Zc],c,!1),hn(r())?(Promise.resolve(p(e)()),Ke.noop):a("datasetReady",p(e,"datasetReady"))),onReadyAsync:f,async setSort(e){Xc(l,"setSort"),Gc(r,"setSort",[Qc,Zc],c,!1),(e=>{if(!e||!(0,Ke.isFunction)(e._build))throw new A("The given sort object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>_.onReady(e))),mn(r())||await v();const n=m((()=>e._build()),N.withMessage("Sort building failed"));await t(Nc((0,Ke.cloneDeep)(n())))},async setFilter(e){Xc(l,"setFilter"),Gc(r,"setFilter",[Qc,Zc],c,!1),(e=>{if(!e||!(0,Ke.isFunction)(e._build))throw new A("The given filter object is invalid",{code:"DS_INVALID_ARGUMENT"})})(e),await new Promise((e=>_.onReady(e))),mn(r())||await v();const n=m((()=>e._build()),N.withMessage("Filter building failed"));await t(Pc((0,Ke.cloneDeep)(n())))},loadMore:async()=>{Xc(l,"loadMore"),$c(r,"loadMore"),Gc(r,"loadMore",[Qc,Zc],c,!1),await t(Cc.incrementNumOfPagesToShow())},async nextPage(){if(Xc(l,"nextPage"),$c(r,"nextPage"),Gc(r,"nextPage",[Qc,Zc],c,!1),mn(r())||await v(),!_.hasNextPage())throw new A("There are no more pages in the dataset",{code:"NO_SUCH_PAGE"});await t(Cc.nextPage());const{items:e}=await Cc.fetchCurrentPage(n,r());return e},async previousPage(){if(Xc(l,"previousPage"),$c(r,"previousPage"),Gc(r,"previousPage",[Qc,Zc],c,!1),mn(r())||await v(),!_.hasPreviousPage())throw new A("This is the first page in the dataset",{code:"NO_SUCH_PAGE"});await t(Cc.previousPage());const{items:e}=await Cc.fetchCurrentPage(n,r());return e},hasNextPage(){return Gc(r,"hasNextPage",[Qc,Zc],c),pc({state:r(),recordStore:n})},hasPreviousPage(){return Gc(r,"hasPreviousPage",[Qc,Zc],c),dc({state:r()})},getTotalPageCount(){return Gc(r,"getTotalPageCount",[Qc,Zc],c),hn(r())?(Vc(ec({recordStore:n}),"getTotalPageCount"),sc({state:r(),recordStore:n})):null},getCurrentPageIndex(){return Gc(r,"getCurrentPageIndex",[Qc,Zc],c),ac({state:r()})},async loadPage(e){Gc(r,"loadPage",[Qc,Zc],c,!1),Xc(l,"loadPage"),$c(r,"loadPage"),Vc(ec({recordStore:n}),"loadPage"),((e,t)=>{if(qc("pageNumber",e),e>t)throw new A("Page "+e+" does not exist",{code:"NO_SUCH_PAGE"})})(e,_.getTotalPageCount()),mn(r())||await v(),await t(Cc.loadPage(e));const{items:o}=await Cc.fetchCurrentPage(n,r());return o},inScope:(e,t)=>{Gc(r,"inScope",[Qc,Kc,Zc],c,!1);const n=i.getController({repeaterId:e,itemId:t});return n?n.staticExports:_},getPageSize:()=>(Gc(r,"getPageSize",[Qc,Zc],c),tc({state:r()})),async setPageSize(e){Gc(r,"setPageSize",[Qc,Zc],c,!1),qc("size",e),await new Promise((e=>_.onReady(e))),mn(r())||await v(),await t(Er({size:e}))}},E=Jc({datasetType:c,siblingDynamicPageUrlGetter:u}),_=Object.assign(w,E),T={};for(const e in _)T[e]=(0,Ke.flow)((t=>g(t,Be.with({category:"datasetAPI",message:"method: "+e+" - datasetId:"+s}))),(t=>y(t,e)),(t=>{return $(t,(r=e,e=>{throw e instanceof N?h.log(new N("datasetApi '"+r+"' operation failed",{cause:e})):e instanceof M?h.log(e):h.log(new P("datasetApi '"+r+"' operation failed",{cause:e})),o("datasetError",r,e instanceof x?e.cause.message:e.cause||e),e.cause||e}));var r}))(_[e]);return T}};var tl=function(e){void 0===e&&(e=Ke.noop);let t=!1,r={};const n=e=>r[e]?r[e]:r[e]=[],o=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Promise.all(n(e).map((e=>e(...r))))};return{register:(e,r)=>{if(t)return Ke.noop;const o=(e=>$((function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Promise.resolve(e(t,...n))}),(e=>Promise.reject(e))))(r);return n(e).push(o),()=>{(0,Ke.remove)(n(e),(e=>e===o))}},executeHooks:o,fireEvent:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return j.logger.log(new $e($e.types.DS_API.TRIGGERED,{eventName:t,eventArgs:n})),e(t,...n),o(t,...n)},dispose:()=>{t=!0,r={}}}};const rl=["siteButtonRole","imageButtonRole","stylableButtonRole"],nl=[le,ue,ne,_e,...Ne],ol=e=>e.filter((e=>{let{role:t,isInput:r}=e;return r&&!nl.includes(t)})),al=(e,t)=>e.filter((e=>{let{role:t}=e;return(0,Ke.includes)(rl,t)})).filter((e=>{let{connectionConfig:r}=e;return(0,Ke.includes)(t,(0,Ke.get)(r,"events.onClick.action"))})),il=(e,t,r,n)=>{e.enabled!==t&&(t?e.enable():e.disable(),r.log(new Be({category:"components",message:e.id+" changed to "+(t?"enabled":"disabled")+" (dataset: "+n+")"})))},sl=(e,t,r,n,o)=>{let{getState:a,subscribe:i}=e;const s={new:()=>!mn(a()),save:()=>yn(a()),revert:()=>yn(a()),remove:()=>yn(a()),next:()=>uc({state:a(),recordStore:o}),previous:()=>lc({state:a()}),nextPage:()=>pc({state:a(),recordStore:o}),previousPage:()=>dc({state:a()}),nextDynamicPage:()=>Nn(a()).hasUrl(),previousDynamicPage:()=>An(a()).hasUrl(),loadMore:()=>(e=>{let{state:t,recordStore:r}=e;if(cc({recordStore:r}))return!0;const n=ic({recordStore:r});return!!n&&rc({state:t})+nc({state:t})<n.total})({state:a(),recordStore:o})},{inputComponents:c,linkedComponents:l}=((e,t)=>{const r=(0,Ke.uniqBy)(e.filter((e=>{let{enabled:t}=e;return t})),(e=>{let{id:t}=e;return t}));return{inputComponents:ol(r),linkedComponents:al(r,t)}})(t,Object.keys(s)),u=c.length+l.length?i((e=>{let{getState:t,inputComponents:r,linkedComponents:n,datasetId:o,logger:a,shouldEnableLinkedComponent:i}=e;return()=>{const e=t();if(!hn(e))return;const s=yn(e);r.forEach((e=>{il(e,s,a,o)})),n.forEach((e=>{const{action:t}=e.connectionConfig.events.onClick,r=i[t]();il(e,r,a,o)}))}})({getState:a,inputComponents:c,linkedComponents:l,datasetId:n,logger:r,shouldEnableLinkedComponent:s})):Ke.noop;return u};const cl={SHORT_DATE:"SHORT_DATE",MEDIUM_DATE:"MEDIUM_DATE",LONG_DATE:"LONG_DATE",FULL_DATE:"FULL_DATE",SHORT_DATE_TIME:"SHORT_DATE_TIME",LONG_DATE_TIME:"LONG_DATE_TIME",FULL_DATE_TIME:"FULL_DATE_TIME",MEDIUM_TIME_12:"MEDIUM_TIME_12",MEDIUM_TIME_24:"MEDIUM_TIME_24",LONG_TIME_12:"LONG_TIME_12",LONG_TIME_24:"LONG_TIME_24",HOUR_ONLY:"HOUR_ONLY",MINUTE_ONLY:"MINUTE_ONLY",YEAR_ONLY:"YEAR_ONLY",MONTH_ONLY:"MONTH_ONLY",SHORT_MONTH_ONLY:"SHORT_MONTH_ONLY",DAY_ONLY:"DAY_ONLY"},ll=(new Set([cl.SHORT_DATE_TIME,cl.LONG_DATE_TIME,cl.FULL_DATE_TIME,cl.MEDIUM_TIME_12,cl.MEDIUM_TIME_24,cl.LONG_TIME_12,cl.LONG_TIME_24,cl.HOUR_ONLY,cl.MINUTE_ONLY]),{[cl.SHORT_DATE]:{day:"numeric",month:"numeric",year:"2-digit"},[cl.MEDIUM_DATE]:{day:"numeric",month:"short",year:"numeric"},[cl.LONG_DATE]:{day:"numeric",month:"long",year:"numeric"},[cl.FULL_DATE]:{day:"numeric",month:"long",year:"numeric",weekday:"long"},[cl.SHORT_DATE_TIME]:{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"},[cl.LONG_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},[cl.FULL_DATE_TIME]:{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric",weekday:"long",timeZoneName:"short"},[cl.MEDIUM_TIME_12]:{minute:"numeric",hour:"numeric",hour12:!0},[cl.MEDIUM_TIME_24]:{minute:"numeric",hour:"numeric",hour12:!1},[cl.LONG_TIME_12]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!0},[cl.LONG_TIME_24]:{minute:"numeric",hour:"numeric",second:"numeric",hour12:!1},[cl.HOUR_ONLY]:{hour:"numeric"},[cl.MINUTE_ONLY]:{minute:"numeric"},[cl.YEAR_ONLY]:{year:"numeric"},[cl.MONTH_ONLY]:{month:"long"},[cl.SHORT_MONTH_ONLY]:{month:"short"},[cl.DAY_ONLY]:{weekday:"long"}});var ul=({locale:e,timeZone:t}={})=>{if(!e)throw new Error('A "locale" parameter is required for wixFormatting');return{formatDateTime(r,n,{locale:o,timeZone:a}={}){const i=Object.assign(Object.assign({},ll[n]),{timeZone:a||t});return new Intl.DateTimeFormat(o||e,i).format(r)},dateFormats:cl}};const dl=e=>(0,Ke.isEqual)(!1,e);function pl(e,t){return(0,Ke.mapValues)(t,((t,r)=>e(r).map((e=>function(e,t){switch(e){case"number":return Number(t);case"boolean":if("string"==typeof t)return"true"===t.toLowerCase()||"1"===t.toLowerCase();break;case"text":if(null!=t&&"function"==typeof t.toString)return t.toString()}return t}(e,t))).getOrElse(t)))}var fl=function(e,t,r,n,o,a,i,s){const{logger:c,errorReporting:l,breadcrumbReporting:u}=j,d=(e,t)=>u(t,Be.with({category:"effects",message:e,data:{datasetId:o}}));function p(e,r){t.onCurrentRecordModified(r,e)}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return l(i,P.withMessage("Dataset "+e+" event execution failed"))(e,...r)}function h(){return Promise.all(t.onRecordsLoaded())}const m=e=>{throw new A(e,{code:"DS_OPERATION_FAILED"})};return{goToRecordByIndex:(t,r,n)=>({run:d("goToRecordByIndex",(async function(){let o;ec({recordStore:e})&&await fc({index:r,recordStore:e});try{o=(e=>{let{recordStore:t,index:r}=e;const{total:n,loaded:o}=t().fold((e=>{throw e}),(e=>e.getDatasetSize()));return Math.max(Math.min(r,Math.max(n,o)-1),0)})({recordStore:e,index:r})}catch(e){m(e)}if(t!==o||n){const t=await(a=o,e().fold(m,(e=>e.getRecords(a,1))));return t.matchWith({Empty:()=>Cc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return Cc.GoToIndexResult.Record(o,t[0])}})}return Cc.GoToIndexResult.InvalidIndex();var a})),isQueued:!0,resultActionCreator:Cc.goToRecordByIndexResult}),setFieldsInCurrentRecord:(t,n,o)=>({run:d("setFieldsInCurrentRecord",(function(){const a=pl(r,t);return e().fold(m,(e=>e.setFieldsValues(n,a,o).fold((e=>{throw e}),(e=>{}))))})),isQueued:!1}),revertChanges:(t,r)=>({run:d("revertChanges",(function(){e().chain((e=>e.resetDraft(t,r))),p()})),isQueued:!1,resultActionCreator:Cc.revertResult}),saveRecord:(t,r)=>({run:d("saveRecord",(async function(){return await(c.log(new $e($e.types.DS_API.TRIGGERED,{eventName:"beforeSave"})),n("beforeSave").then((e=>e.some(dl))).catch((e=>({error:e}))).then((e=>{if(e)throw new A("Operation cancelled by user code. "+((0,Ke.isBoolean)(e)?"":e.error),{code:"DS_OPERATION_CANCELLED"})}))),e().fold((()=>!1),(async e=>{if(e.hasDraft(t)){!function(e){const t=a.filter((t=>!t.isValid(e)));if(t.forEach((e=>e.updateValidityIndication())),t.length)throw new A("Some of the elements validation failed",{code:"DS_VALIDATION_ERROR"})}(r);const n=await e.saveRecord(t);return f("afterSave",r,n),s.dispatch("afterSave",r,n),n}}))})),isQueued:!0,resultActionCreator:Cc.saveRecordResult}),removeCurrentRecord:t=>({run:d("removeCurrentRecord",(()=>function(t){return e().fold(m,(e=>e.removeRecord(t)))}(t))),isQueued:!0,resultActionCreator:Cc.removeCurrentRecordResult}),newRecord:(t,r)=>({run:d("newRecord",(()=>function(t,r){return e().fold(m,(e=>e.newRecord(t,r)))}(t,r))),isQueued:!0,resultActionCreator:Cc.newRecordResult}),fireEvent:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return{run:d("fireEvent",(()=>f(e,...r))),isQueued:!1}},notifyIndexChange:e=>({run:d("notifyIndexChange",(()=>{t.onCurrentIndexChanged(),f("currentIndexChanged",e)})),isQueued:!1}),notifyRecordSetLoaded:()=>({run:d("notifyRecordSetLoaded",h),isQueued:!0}),updateCurrentView:e=>({run:d("updateCurrentView",(()=>Promise.all(t.onCurrentViewChanged()))),isQueued:!0,resultActionCreator:Cc.updateCurrentViewResult}),refresh:(t,r,n)=>({run:d("refresh",(async function(){return e().fold(m,(async e=>(e.reset(),n?Cc.GoToIndexResult.Record(0,e.newRecord(0,r)):e.getRecords(0,1).then((e=>e.matchWith({Empty:()=>Cc.GoToIndexResult.NoRecord(),Results:e=>{let{items:t}=e;return Cc.GoToIndexResult.Record(0,t[0])}}))))))})),isQueued:!0,resultActionCreator:Cc.refreshResult}),updateComponents:(e,t)=>({run:d("updateComponents",(()=>{p(e,t)})),isQueued:!1})}};const hl=e=>tc({state:e});const ml=e=>Nn(e).shouldLoadUrl(),gl=e=>An(e).shouldLoadUrl();var yl=e=>{let{getNextDynamicPageUrl:t,getPreviousDynamicPageUrl:r}=e;const n={run:t,isQueued:!0,resultActionCreator:(e,t)=>({type:Qr,error:e,payload:t})},o={run:r,isQueued:!0,resultActionCreator:(e,t)=>({type:Kr,error:e,payload:t})},a=e=>{let{hasChangedToTrue:t}=e;const r=[];return t(ml)&&r.push(n),t(gl)&&r.push(o),r};return e=>(0,Ke.flatten)([a].map((t=>t(e))))};const vl=async e=>{let{dataProvider:t,collectionName:r,directionTowardSibling:n,useLowerCaseDynamicPageUrl:o,dynamicPagesData:{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:s,sort:c,sortFields:l,patternFields:u}={}}=e;if(null==a||!u.length)return null;const d=await t.getSibling({collectionName:r,sort:c,sortFields:l,directionTowardSibling:n,fieldValues:s,filter:i});return d&&((e,t,r)=>"/"+ds(t).replace(ls,(t=>{const n=t.substring(1,t.length-1),o=r?String(e[n]).toLowerCase():e[n];return encodeURIComponent((""+o).replace(/ /g,"-"))})))(d,a,o)};const Il=(e,t)=>{try{return wl(e(t))}catch(e){return El(e)}},wl=e=>({value:e,then:t=>Il(t,e),catch:()=>wl(e)}),El=e=>({error:e,then:()=>El(e),catch:t=>Il(t,e)});var _l={resolve:wl,reject:El},Tl=e=>{let{recordStore:t}=e;const{logger:r}=j;return t().fold((()=>Promise.resolve(Ze.Maybe.Nothing())),(e=>e.hasSeedData()?(e=>e.getSeedRecords().matchWith({Empty:()=>_l.resolve(Ze.Maybe.Nothing()),Results:e=>{let{items:t}=e;return _l.resolve(Ze.Maybe.Just(t[0]))}}))(e):r.log(new Ge("dataset/pageReady/getData",(()=>(e=>e.seed().then((()=>e.getRecords(0,1).then((e=>e.chain((e=>{let{items:t}=e;return Ze.Maybe.Just(t[0])})))))).catch((e=>(r.logError(e,"Fetch initial data failed"),Ze.Maybe.Nothing()))))(e))))))};var Sl=e=>{let{shouldFetchInitialData:t,recordStore:r,store:n,filter:o,sort:a,datasetIsDeferred:i,modeIsSSR:s,queueMicrotask:c,datasetIsReal:l,collectionId:u,filterResolver:d,dependencyManager:p,getSchemas:f,schemasLoading:h,getUserFilterInitialData:m}=e;const g=()=>{const e=(i=n.getState(),Jr.getUserFilterConnectionProps(i.config));var i;const s=t?Tl({recordStore:r}):Promise.resolve();if(!(l&&(null==e?void 0:e.length)>0))return s.then((e=>Promise.resolve([e])));const c=d(o).map((async t=>{const r=m();if(r)return n.dispatch(Oc(r)),r;await h;const o=f(),i=o[u];if(i){const r=await j.dataFetcher.fetchUserFilterInitialData({filter:t,sort:a,userFilterConnectionProps:e,schema:i,schemas:o});return n.dispatch(Oc(r)),r}})).getOrElse(null);return Promise.all([s,c])},y=p.getDependencyResolutionPromise(o),v=i&&((e,t)=>{const{promise:r,resolve:n}=new z;return e||t(n),r})(s,c),{waitingForUserInput:I,resolveUserInputDependency:w}=es(o)&&(()=>{const{promise:e,resolve:t}=new z;return{waitingForUserInput:e,resolveUserInputDependency:t}})(),E=[y,v,I].filter((e=>Boolean(e)));return{fetchingInitialData:E.length?Promise.all(E).then(g):g(),resolveUserInputDependency:()=>w&&w()}};var Rl=e=>{const t=["value","checked"];return e.reduce(((e,r)=>{var n;const o=(null==(n=r.connectionConfig)?void 0:n.properties)||{};return t.forEach((t=>{(0,Ke.has)(o,t)&&((e,t,r)=>{const n=(0,Ke.get)(r,t),o=ii(n)&&si(e)?ci({time:n,date:e}):si(n)&&ii(e)?ci({time:e,date:n}):e;(0,Ke.set)(r,t,o)})(r.getValue({propPath:t}),o[t].fieldName,e)})),e}),{})};const bl=(e,t,r)=>{var n;return t===r||(null==(n=e[t])?void 0:n.some((t=>bl(e,t,r))))},Ol=e=>{let{components:t,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o}=e;const a=t.filter((e=>(e=>{let{component:t,updatedCompIds:r,datasetIsReal:n,connectionsGraph:o}=e;if(r.length&&n){const{id:e}=t;return r.some((t=>bl(o,e,t)||bl(o,t,e)))}return!0})({component:e,connectionsGraph:r,updatedCompIds:n,datasetIsReal:o})));return a.some((e=>{let{role:t}=e;return t===ne}))?t:a},Cl=(e,t)=>{let{repeaterId:r,itemId:n}=t;return[e,"componentId",r,"itemId",n].join("_")},Dl=e=>e.split("_componentId_")[0],Pl=(e,t)=>{const{logger:r}=j;return(n,o,a)=>{const i=((e,t)=>(0,Ke.isNull)(e)&&(0,Ke.isNull)(t))(n,o);if(i)return void r.log(new P("onChangeHandler invoked with illegal arguments",{extra:{arguments:{before:n,after:o,componentIdToExclude:a}}}));if(((e,t)=>(0,Ke.isNull)(e))(n))return void t(Cc.refreshCurrentView()).catch((()=>{}));const s=Sn(e());if(((e,t)=>(0,Ke.isNull)(t))(0,o))return gs(n,s)&&t(Cc.refreshCurrentRecord()).catch((()=>{})),void t(Cc.refreshCurrentView()).catch((()=>{}));if(((e,t)=>gs(e,t))(n,s)){const r=oc({state:e()});t(Cc.setCurrentRecord(o,r,a)).catch((()=>{}))}}},Nl=e=>{let{detailsDatasetApis:t,masterDatasetApi:r,controllerConfig:n,unsubscribeHandlers:o}=e;const{logger:a}=j;t.forEach((e=>{const t=()=>{o.push(Al({masterDatasetApi:r,masterDatasetConfig:n,detailsDatasetApi:e}))};try{o.push(r.onReady(t))}catch(e){a.log(new He(new A("The dataset cannot filter by the dynamic dataset because the field used to build this page's URL is empty",{code:"DS_EMPTY_URL_FIELD",cause:e}),"error"))}}))},Al=e=>{let{masterDatasetConfig:t,masterDatasetApi:r,detailsDatasetApi:n}=e;const o=br(t.dataset);let a,i;return o!==Je&&(a=r.onCurrentIndexChanged((()=>n.onReady((()=>n.refresh()))))),o!==Ye&&(i=r.onItemValuesChanged((()=>n.refresh()))),()=>[a,i].forEach((e=>null==e?void 0:e()))},{richText:xl}=m.FieldType,Ml={$text:e=>e.map((e=>e===xl?"html":"text")).getOrElse("text")},Fl=(e,t)=>Ze.Maybe.fromNullable((0,Ke.get)(e,"properties")).map((e=>(0,Ke.mapKeys)(e,((e,r)=>(0,Ke.startsWith)(r,"$")?((e,t,r)=>Ze.Maybe.fromNullable(Ml[e]).map((e=>e(r(t.fieldName)))).getOrElse(e))(r,e,t):r)))).map((t=>(0,Ke.assign)({},e,{properties:t}))).getOrElse(e),Ll=e=>({id:e.id,role:e.role,isValidConnection:()=>!0,bind:()=>{},clear:()=>e.clear(),hide:()=>e.hide(),show:t=>e.show(t),resetUserFilter:()=>{},onRecordsLoaded:async()=>{},onCurrentViewChanged:async()=>{},onCurrentIndexChanged:async()=>{},onCurrentRecordModified:async()=>{}}),Ul=e=>!!e&&Object.values(e).some((e=>!(0,Ke.isEmpty)(e))),kl=(e,t,r)=>{const{logger:n,platform:{location:o,utils:a,executeTpaAction:i}}=j,{getState:s,getFieldType:c,wixFormatter:l,modeIsLivePreview:u,PresetVerboseMessage:d}=r,p=r=>{zi({currentRecord:Sn(s()),previousRecord:r,component:e,connectionConfig:t,formatter:l,modeIsLivePreview:u,getFieldType:c,logger:n,PresetVerboseMessage:d})},f=e=>e.matchWith({Empty(){},Loading(){},Loaded(e){let{url:t}=e;o.navigateTo(t)}}),h=t=>{const{datasetApi:s,getState:c,actions:l}=r;(0,Ke.forEach)(t,((t,r)=>{let{action:u,postAction:d}=t;e.on(r,(async()=>{try{if(u.startsWith("tpa/")){const e=s.getCurrentItem();return void await i({currentItem:e,action:u})}if("nextDynamicPage"===u)return f(Nn(c()));if("previousDynamicPage"===u)return f(An(c()));if("applyUserInputFilters"===u)return l.refresh();if("resetUserFilter"===u)return l.resetUserInputFilters();const e=await Promise.resolve(s[u]());if(d&&d.navigate){const t=((e,t)=>e.fieldName?ti(t,e.fieldName):e.linkObject?a.links.toUrl(e.linkObject):void 0)(d.navigate,e);o.navigateTo(t)}}catch(e){e instanceof D||n.log(new P(u+" operation failed:",{cause:e}))}}))}))};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){const{events:o,behaviors:a}=t;o&&h(o),a&&(t=>{const{dispatcher:n,eventListeners:{register:o}}=r;t.forEach((t=>{let r=!1;switch(t.type){case"saveSuccessFeedback":o("beforeSave",(()=>e.hide())),o("afterSave",(()=>{e.show(),r=!0})),o("currentIndexChanged",(()=>{r?r=!1:e.hide()})),o("itemValuesChanged",(()=>e.hide()));break;case"saveFailureFeedback":o("beforeSave",(()=>e.hide())),o("currentIndexChanged",(()=>e.hide())),n.subscribe("datasetSaveError",(()=>e.show()))}}))})(a),n.log(new d($e.types.COMPONENT.BOUND,{component:e,description:ni(t)}))},clear(){const{getFieldType:n}=r,{properties:o}=t;(0,Ke.forEach)(o,((t,r)=>{const o=n(t.fieldName).getOrElse(void 0),a=(e=>e===oi?[]:void 0)(o);e.setValue(a,{propPath:r,fieldType:o,binding:t})}))},async onRecordsLoaded(){const{behaviors:t}=e.connectionConfig;p(),t&&t.forEach((t=>{"saveSuccessFeedback"===t.type&&e.hide()}))},async onCurrentViewChanged(){p()},async onCurrentIndexChanged(){p()},async onCurrentRecordModified(e){p(e)}}};const jl=(e,t)=>{return r=e,n=t,Object.defineProperties({},{...Object.getOwnPropertyDescriptors(r),...Object.getOwnPropertyDescriptors(n)});var r,n},Vl=e=>{const t={getValue(){return e.data},setValue(t){e.data=t},clear(){e.data=[]},onItemReady(t){e.onItemReady(t)},onItemRemoved(t){e.onItemRemoved(t)}};return jl(ql(e),t)},Wl=e=>"onChange"in e&&("value"in e||"checked"in e),Gl=(e,t)=>{const r=t.split("."),n=r.slice(0,-1),[o]=r.slice(-1);return{obj:n.length>0?(0,Ke.get)(e,n):e,prop:o}},Bl=e=>{if(!e||!e.parent)return;const{parent:t}=e;return t.type===rt.Repeater?Vl(t):Bl(t)},ql=e=>{const{connectionConfig:t,uniqueId:r,type:n,role:o,id:a}=e,i=!!e.hidden,s={id:r,connectionConfig:t,nickname:a,type:n,role:o,isInput:Wl(e),parentRepeater:Bl(e),getValue(t){let{propPath:r}=void 0===t?{}:t;if(r){const{obj:t,prop:n}=Gl(e,r);return t[n]}},setValue(t,r){let{propPath:n,fieldType:o,binding:a}=void 0===r?{}:r;if(n){const{obj:r,prop:i}=Gl(e,n);if(r[i]="reference"===o&&(e=>(0,Ke.isObject)(e)&&(0,Ke.has)(e,"_id"))(t)?t._id:t,j.features.linkTarget){const e=null==a?void 0:a.linkTarget;(e=>e===m.FieldType.url||e===m.FieldType.pageLink)(o)&&e&&(r.target=e)}}},setOptions(t){"options"in e&&(e.options=t)},hide(){e.hidden||null==e.hide||e.hide()},show(t){let{ignoreInitiallyHidden:r}=void 0===t?{ignoreInitiallyHidden:!1}:t;!e.hidden||r&&i||null==e.show||e.show()},clear(e){s.setValue(void 0,e)},get enabled(){return!("enabled"in e)||e.enabled},enable(){"enable"in e&&!s.enabled&&e.enable()},disable(){"disable"in e&&s.enabled&&e.disable()},isValid(){return!("validity"in e)||"object"!=typeof e.validity||e.validity.valid},updateValidityIndication(){"updateValidityIndication"in e&&e.updateValidityIndication()},resetValidityIndication(){"resetValidityIndication"in e&&e.resetValidityIndication()},onChange(e){s.on("onChange",e)},on(t,r){var n;null==(n=e[t])||n.call(e,r)}};return"placeholder"in e&&Object.defineProperty(s,"placeholder",{get(){return e.placeholder}}),s},zl=e=>{switch(e.role){case oe:return(e=>{const t={setValue(t,r){let{fieldType:n,propPath:o="text",binding:a}=void 0===r?{}:r;if(n===m.FieldType.url){const r=j.features.linkTarget&&(null==a?void 0:a.linkTarget)||"_blank";e.text="<a href="+t+' target="'+r+'" style="text-decoration: underline">'+t+"</a>";const{html:n}=e;return e.text="",void(e.html=(0,Ke.unescape)(n))}n!==m.FieldType.richText?e[o]=t:e.html=t},clear(t){let{fieldType:r}=void 0===t?{}:t;const n=r===m.FieldType.richText||r===m.FieldType.url?"html":"text";e[n]=""}};return jl(ql(e),t)})(e);case me:case te:return Vl(e);case de:return(e=>{const t={get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},setValue(t){e.rows=t},getValue(){return e.rows},set rows(e){t.setValue(e)},get rows(){return e.rows},get columns(){return e.columns},clear(){e.rows=[],e.dataFetcher=void 0},set dataFetcher(t){e.dataFetcher=t},refresh(){return e.refresh()},onCellSelect(t){return e.onCellSelect(t)},onRowSelect(t){return e.onRowSelect(t)}};return jl(ql(e),t)})(e);case he:return(e=>{const t={isValid(t){const{connectionConfig:r,validity:n}=e;if(n.valid)return!0;if((0,Ke.some)((0,Ke.values)((0,Ke.omit)(n,["valid","valueMissing"])),(e=>e)))return!1;const o=(0,Ke.get)(r,"properties.value.fieldName")||"";return!(0,Ke.isEmpty)(ti(t,o))},set fileType(t){e.fileType=t},get fileType(){return e.fileType},getValue(){return e.value},clear(){e.reset()},async uploadFiles(){return e.uploadFiles()}};return jl(ql(e),t)})(e);case Te:return(e=>{const t=ql(e),r={setValue(r,n){r?t.setValue(r,n):e.clear()}};return jl(t,r)})(e);case ae:return(e=>{e.clickAction&&(e.clickAction=e.clickAction);const t={setValue(t){e.items=t},getValue(){return e.items},clear(){e.items=[]},set currentIndex(t){try{e.galleryCapabilities.hasCurrentItem&&(e.currentIndex=t)}catch(e){}},get currentIndex(){return e.currentIndex},get clickAction(){return e.clickAction},onCurrentItemChanged(t){e.galleryCapabilities.hasCurrentItem&&e.onCurrentItemChanged((e=>{let{item:r,itemIndex:n}=e;return t(r,n)}))}};return jl(ql(e),t)})(e);case ye:return(e=>{const t={get currentPage(){return e.currentPage},set currentPage(t){e.currentPage=t},get totalPages(){return e.totalPages},set totalPages(t){e.totalPages=t},get nextEnabled(){return e.nextEnabled},set nextEnabled(t){e.nextEnabled=t},get previousEnabled(){return e.previousEnabled},set previousEnabled(t){e.previousEnabled=t},get navigationType(){return e.navigationType},set navigationType(t){e.navigationType=t},onNextClicked(t){e.onNextClicked(t)},onPreviousClicked(t){e.onPreviousClicked(t)}};return jl(ql(e),t)})(e);case Ie:return(e=>{const t={setValue(t){e.location=t},getValue(){return e.location},clear(){e.markers=[]},set location(t){e.location=t},get location(){return e.location},set markers(t){e.markers=t},get markers(){return e.markers},setCenter(t){e.setCenter(t)}};return jl(ql(e),t)})(e);case Pe:return(e=>{const t={setValue(t){e.value=t},getValue(){return e.value},clear(){e.value=[]},setBounds(t,r){e.min=t,e.max=r},getBounds(){return[e.min,e.max]}};return jl(ql(e),t)})(e);default:return ql(e)}},$l=e=>t=>{const r=[],n=[];(0,Ke.uniq)(t.map((e=>{let{role:t}=e;return t}))).forEach((t=>{if(t===re){return void(e("@"+t)||[]).forEach((e=>e&&n.push(e)))}if(t===ge){const t=e("@"+ge)||[],[n]=Array.isArray(t)?t:[t],o=e("Document");if(o&&n){const e=new Proxy(o,{get(e,t){return"connectionConfig"===t?n.connectionConfig:"role"===t?ge:e[t]}});r.push(e)}return}(e("@"+t)||[]).forEach((e=>{e&&r.push(e)}))}));return{components:r.map((e=>zl(e))),detailsDatasetApis:n}},Hl=(e,t,r)=>{const{logger:n,errorReporting:o}=j,{getState:a,getFieldType:i,actions:s,modeIsLivePreview:c,PresetVerboseMessage:l}=r,u=r=>{zi({currentRecord:Sn(a()),previousRecord:r,component:e,connectionConfig:t,modeIsLivePreview:c,getFieldType:i,logger:n,PresetVerboseMessage:l})},d=()=>{const t=s.isCurrentRecordPristine(a()),r=s.isCurrentRecordNew(a());t&&r&&e.resetValidityIndication()};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){(()=>{const{id:r,role:n}=e,{properties:c}=t;e.onChange(o((e=>{const t=c.checked?"checked":"value",o=c[t].fieldName,l=Sn(a()),u=Vi({value:e.target[t],currentValue:ti(l,o),fieldType:i(o).getOrElse(void 0),fieldName:o,utils:{referenceFetcher:(e,t)=>s.fetchRecordById(e,t).getOrElse(e)},role:n});s.setFieldInCurrentRecordAndSynchronize(o,u,r)}),P.withMessage("Input adapter onChange - setting value to record failed")))})(),t.filters&&e.onChange(o(s.refresh,P.withMessage("Input adapter onChange - sync actions failed"))),n.log(new l($e.types.COMPONENT.BOUND,{component:e,description:ni(t)}))},async onRecordsLoaded(){u(),d()},async onCurrentViewChanged(){u(),d()},async onCurrentIndexChanged(){u(),d()},async onCurrentRecordModified(e){u(e),d()}}},Xl={start:0,end:0},Yl=(e,t)=>{let{valueField:r,labelField:n,dataTransformer:o}=t;const a=o(ti(e,r));return{value:a,label:n?o(ti(e,n)):a}},Jl=e=>(0,Ke.get)(e,"properties.value.fieldName")||"",Ql=(e,t,r)=>{const{errorReporting:n}=j,{actions:o,recordStore:a,getState:i}=r,s=t.userInputFilter.fieldName;e.onChange(n((async()=>{const t=Mn(i()),n=(c=i(),kr.selectIsApplyUserInputFiltersActionBindingPresent(c.records));var c;if(t||n)return;await o.refresh();const l=a().fold((()=>{}),(e=>e.getDatasetSize().total)),u=cn(i());(e=>{let{state:t,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a,schema:i}=e;const{logger:s,platform:{settings:{env:{editor:c}}}}=j,l=pn(t),u=cn(t);if(!u)return;const d=i.getOrElse({displayName:u}).displayName;s.log(new Jn({id:c?366:371,collectionId:u,collectionName:d,datasetMode:l,numberOfResults:r,filteredBy:n,componentType:o,fieldType:a}))})({filteredBy:s,numberOfResults:l,state:r.getState(),componentType:e.type,fieldType:r.getFieldType(s).getOrElse(void 0),schema:r.getSchema(u)})}),P.withMessage("Filter input adapter onChange failed")))},Kl=(e,t,r)=>{const{i18n:n}=j,{getState:o}=r,a=t=>{const r=Array.isArray(e.getValue({propPath:t}))?[]:Ae;e.setValue(r,{propPath:t})};return{...Ll(e),bind(){const{userInputFilter:i}=t;Ql(e,t,r);const{prop:s,fieldName:c}=i,l=(e=>{var t;return null==(t=Vn(o()))?void 0:t.find((t=>t.fieldName===e&&xe.includes(t.role)))})(c);l&&(e.setOptions((e=>{let{component:t,prop:r,userFilterInitialData:o}=e;return[!Array.isArray(t.getValue({propPath:r}))&&{value:Ae,label:n.t("USER_INPUT_FILTER_OPTION_RESET_ALL")},...o.options.map((e=>({value:String(e),label:String(e)})))].filter(Boolean)})({component:e,prop:s,userFilterInitialData:l})),(e=>"placeholder"in e)(e)||a(s))},resetUserFilter(){const{userInputFilter:{prop:r}}=t;e.getValue({propPath:r})&&a(r)}}},Zl=new Map([[me,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{controllerFactory:a,controllerStore:i,PresetVerboseMessage:s}=r,c=[],l=(t,r,n)=>{const o={repeaterId:e.id,itemId:r._id},s=a.createScopedDataset({datasetScope:o,fixedItem:r});i.setController(o,s);const l=$l(t.scoped),u=s.pageReady(l);c.push(u)},u=t=>{const r={repeaterId:e.id,itemId:t._id};i.removeController(r)},d=async()=>{const{actions:t,getState:o,modeIsLivePreview:a}=r,{items:i}=await t.fetchCurrentItems(o());a&&0===i.length||(n.log(new s($e.types.COMPONENT.FILLED,{component:e,description:{data:i}})),e.setValue(i),await Promise.all(c),c.splice(0))};return{...Ll(e),bind(){e.onItemReady(o(l,P.withMessage("Repeater adapter onItemReady failed"))),e.onItemRemoved(o(u,P.withMessage("Repeater adapter onItemRemoved failed"))),n.log(new s($e.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){return d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){},async onCurrentRecordModified(){const{getState:t}=r,n=Sn(t()),o=e.getValue();if(o&&o.length>0){const t=o.map((e=>e._id===n._id?n:e));e.setValue(t)}}}}],[te,(e,t,r)=>{const{errorReporting:n}=j,{controllerFactory:o,controllerStore:a}=r,i=(t,r,n)=>{const i={repeaterId:e.id,itemId:r._id},s=o.createScopedDetailsDataset({datasetScope:i});a.setController(i,s);const c=$l(t.scoped);s.pageReady(c)},s=t=>{const r={repeaterId:e.id,itemId:t._id};a.removeController(r)};return{...Ll(e),bind(){e.onItemReady(n(i,P.withMessage("Details repeater adapter onItemReady failed"))),e.onItemRemoved(n(s,P.withMessage("Details repeater adapter onItemRemoved failed")))}}}],[ne,(e,t,r)=>{const{errorReporting:n}=j,{actions:o}=r;return{...Ll(e),isValidConnection(){return Ul(t)},bind(){e.onChange(n(o.refresh,P.withMessage("Filter input adapter onChange failed")))},resetUserFilter(){const t=qi(e);e.setValue((e=>{switch(e.type){case Gi:return!1;case Bi:return"";default:return null}})(e),{propPath:t})}}}],[Re,Kl],[Ce,Kl],[Oe,Kl],[De,Kl],[be,(e,t,r)=>{const n=()=>{e.setValue(null,{propPath:"checked"})};return{...Ll(e),bind(){Ql(e,t,r),n()},resetUserFilter(){n()}}}],[Pe,(e,t,r)=>{const{getState:n}=r,o=r=>{let{firstRender:o}=r;const{userInputFilter:{fieldName:a}}=t,{min:i,max:s}=(t=>{var r;return null==(r=Vn(n()))?void 0:r.find((r=>r.fieldName===t&&r.role===e.role))})(a);o&&e.setBounds(i,s),e.setValue([i,s])};return{...Ll(e),bind(){Ql(e,t,r),o({firstRender:!0})},resetUserFilter(){o({firstRender:!1})}}}],[de,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{datasetApi:a,PresetVerboseMessage:i,getState:s,modeIsLivePreview:c,actions:l}=r;let u=Xl;const d=e=>u=e,p=()=>d(Xl),f=e=>{let{fetchRows:t,logGridValue:r,disableNavigation:n=!1}=e;return async(e,o)=>{const{items:a,datasetSize:i}=await t(e,o-e);return r(a),{pageRows:a,totalRowsCount:n?a.length:i.total}}},h=t=>{let{fetchRows:r,logGridValue:n}=t;return async t=>{let{direction:o,limit:a}=t,{start:i,end:s}=u;"previous"===o?(s=i,i-=a):(i=s,s+=a);const{items:c,datasetSize:l}=await r(i,s-i);return d({start:i,end:s}),e.nextEnabled=!!l.cursor||s<l.loaded,e.previousEnabled=i>0,n(c),{pageRows:c,totalRowsCount:l.total||void 0}}},m=t=>{const r=[],o=e.columns;(0,Ke.forEach)(t,(e=>{const t={};(0,Ke.forEach)(o,(r=>{t[r.label]=(0,Ke.get)(e,r.dataPath)})),r.push(t)})),n.log(new i($e.types.COMPONENT.FILLED,{component:e,description:r}))};return{...Ll(e),bind(){l.getInitialData().chain((t=>{let{items:r}=t;e.rows=r}));const t=Sn(s());if(c&&!t)return;const r=l.isCursorPaging();e.dataFetcher=r?{type:"directional",value:h({fetchRows:l.fetch,logGridValue:m,component:e})}:{type:"pages",value:f({fetchRows:l.fetch,logGridValue:m})},e.onCellSelect(o((e=>{let{cellRowIndex:t}=e;a.setCurrentItemIndex(t)}),P.withMessage("Grid adapter onCellSelect failed"))),e.onRowSelect(o((e=>{let{rowIndex:t}=e;a.setCurrentItemIndex(t)}),P.withMessage("Grid adapter onRowSelect failed"))),(()=>{const t={};e.columns.forEach((e=>{let{label:r,dataPath:n,linkPath:o}=e;(n||o)&&(t[r]=Object.assign(n?{dataPath:n}:{},o?{linkPath:o}:{}))})),n.log(new i($e.types.COMPONENT.BOUND,{component:e,description:t}))})()},async onCurrentRecordModified(){e.refresh()},async onRecordsLoaded(){p(),e.refresh()},async onCurrentViewChanged(){p(),e.refresh()}}}],[le,(e,t,r)=>{const{features:n,logger:o}=j,{actions:a,getFieldType:i,getSchema:s,PresetVerboseMessage:c}=r,l=async(e,t)=>(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await(async(e,t)=>{if(i(e).map((e=>"reference"===e)).getOrElse(!1))return s().chain((r=>{const n=co(e,r);return s(n).map(lo).map((async r=>{const{items:n}=await a.fetchAll(e),o=n.map((e=>Yl(e,{valueField:"_id",labelField:r,dataTransformer:t})));return(0,Ke.orderBy)(o,[e=>e.label.toLowerCase()])}))})).getOrElse(Promise.resolve([]));if(!n.dropdownOptionsDistinct){const{items:r}=await a.fetchAll(),n=r.map((r=>Yl(r,{valueField:e,dataTransformer:t})));return(0,Ke.uniqBy)(n,"value")}{const r=a.getUniqueFieldValues(e);if(r)return r.map((e=>{const r=t(e);return{value:r,label:r}}))}})(e,t)),u=async()=>{const{role:r}=e,{properties:n}=t,a=await l(n.value.fieldName,(e=>Wi({value:e,role:r})));o.log(new c($e.types.COMPONENT.FILLED,{component:e,description:{options:a}})),e.setOptions(a)};return{...Ll(e),isValidConnection(){return Ul(t)},clear(){e.setOptions([])},bind(){(()=>{const{properties:r}=t,n={options:r.value.fieldName};o.log(new c($e.types.COMPONENT.BOUND,{component:e,description:n}))})()},async onRecordsLoaded(){u()},async onCurrentRecordModified(){u()}}}],[ue,(e,t,r)=>{const{features:n,logger:o}=j,{actions:a,PresetVerboseMessage:i}=r,s=async(e,t)=>{if(!n.dropdownOptionsDistinct){const{items:r}=await a.fetchAll(),n=r.map((r=>((e,t)=>{let{valueField:r,labelField:n,dataTransformer:o}=t;const a=o(ti(e,r));return{value:a,label:n?o(ti(e,n)):a}})(r,{valueField:e,dataTransformer:t})));return(0,Ke.uniqBy)(n,"value")}{const r=a.getUniqueFieldValues(e);if(r)return r.map((e=>{const r=t(e);return{value:r,label:r}}))}},c=async()=>{const{role:r}=e,{properties:n}=t,a=await(async(e,t)=>(e=>{const t=e[0];return 1===e.length&&""===t.label&&""===t.value?[]:e})(await s(e,t)))(n.options.fieldName,(e=>Wi({value:e,role:r})));o.log(new i($e.types.COMPONENT.FILLED,{component:e,description:{options:a}})),e.setOptions(a)};return{...Ll(e),isValidConnection(){return Ul(t)},clear(){e.setOptions([])},bind(){(()=>{const{properties:r}=t,n={options:r.options.fieldName};o.log(new i($e.types.COMPONENT.BOUND,{component:e,description:n}))})()},async onRecordsLoaded(){c()},async onCurrentRecordModified(){c()}}}],[_e,(e,t,r)=>{const{logger:n}=j,{actions:o,PresetVerboseMessage:a,modeIsLivePreview:i}=r,s=async()=>{const{role:r}=e,{properties:{options:{fieldName:s}}}=t,{items:c}=await o.fetchAll(),l=c.reduce(((e,t)=>{const n=Wi({value:ti(t,s),role:r});return n&&e.push({value:n,label:n}),e}),[]);i&&0===l.length||(e.setOptions(l),n.log(new a($e.types.COMPONENT.FILLED,{component:e,description:{options:l}})))};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){const{properties:{options:{fieldName:r}}}=t;n.log(new a($e.types.COMPONENT.BOUND,{component:e,description:{options:r}}))},clear(){e.setOptions([])},async onRecordsLoaded(){s()},async onCurrentRecordModified(){s()}}}],[he,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,datasetApi:i,getState:s,getFieldType:c,PresetVerboseMessage:l}=r,u={},d=function(r){void 0===r&&(r=!1);const n=Sn(s()),o=Jl(t),i=a.isCurrentRecordNew(s()),c=(0,Ke.isEmpty)(ti(n,o));(a.isCurrentRecordPristine(s())||r)&&e.clear(),!c||i&&!r||e.updateValidityIndication()};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){if(mn(s()))return;const{id:r,role:d}=e,p=Jl(t),f=c(p).getOrElse(void 0);e.onChange(o((()=>{u[r]=!0}),P.withMessage("Upload button adapter onChange failed"))),i.onBeforeSave((()=>{if(u[r]&&e.getValue().length)return e.uploadFiles().then((e=>{u[r]=!1;const t=Sn(s()),n=Vi({value:e,currentValue:ti(t,p),fieldType:f,fieldName:p,role:d});a.setFieldInCurrentRecordAndSynchronize(p,n,r)})).catch((t=>{const r=e.getValue(),o=Array.isArray(r)&&1===r.length?r[0].name:"unknown";throw n.log(new N("The "+o+" file failed to upload. Please try again later.",{cause:t})),t}))})),c(p).map((t=>{switch(t){case"image":e.fileType="Image";break;case"document":e.fileType="Document"}}));const{properties:h}=t;(0,Ke.forEach)(h,((t,r)=>{let{fieldName:o}=t;n.log(new l($e.types.COMPONENT.BOUND,{component:e,description:{[r]:o}}))}))},async onCurrentRecordModified(r){const{id:n}=e,o=Jl(t),a=Sn(s()),i=ri({previousRecord:r,currentRecord:a,fieldName:o});i&&(u[n]=!1),d(i)},async onRecordsLoaded(){d()},async onCurrentViewChanged(){d()},async onCurrentIndexChanged(){d()}}}],[ae,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,getFieldType:s,modeIsLivePreview:c,wixFormatter:l,PresetVerboseMessage:u}=r,d=(e,t,r,n)=>{(0,Ke.forEach)(r,((r,o)=>{let{fieldName:a,format:i}=r;const c=Wi({value:ti(t,a),role:n,fieldType:s(a).getOrElse(void 0),propPath:o,format:i,utils:{formatter:l}});e[o]=c}))},p=()=>{e.currentIndex=oc({state:i()})},f=async()=>{const{role:r}=e,{properties:o}=t,{items:s}=await a.fetchCurrentItems(i());try{const t=s.map((e=>{const t={};return d(t,e,o,r),t})),a=t.every((e=>{let{src:t}=e;return!t}));if(c&&a)return;n.log(new u($e.types.COMPONENT.FILLED,{component:e,description:t})),e.setValue(t)}catch(e){if("URIError"!==e.name)throw e}p()};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){e.onCurrentItemChanged(o((()=>{a.setCurrentIndex(e.currentIndex)}),P.withMessage("Gallery adapter onItemReady failed"))),(()=>{const{properties:r}=t,o={};(0,Ke.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new u($e.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onCurrentRecordModified(){const{role:r}=e,{properties:n}=t,o=Sn(i()),a=oc({state:i()}),s=e.getValue()||[],c=s[a];c&&d(c,o,n,r),e.setValue(s),p()},async onRecordsLoaded(){f()},async onCurrentViewChanged(){f()},async onCurrentIndexChanged(){p()}}}],[ye,(e,t,r)=>{const{logger:n,errorReporting:o}=j,{actions:a,getState:i,PresetVerboseMessage:s}=r,c=()=>{a.isCursorPaging()?(()=>{const t=ac({state:i()});e.nextEnabled=a.hasNextPage(i()),e.previousEnabled=t>1})():(()=>{const t=ac({state:i()}),r=a.getTotalPageCount(i());e.currentPage=t,r<1?e.disable():(e.enable(),e.totalPages=r)})()};return{...Ll(e),bind(){const t=a.isCursorPaging(),r=e=>{let{delta:r,index:n}=e;const o=ac({state:i()}),s=r?o+r:n,c=tc({state:i()}),l=t?s:(0,Ke.clamp)(s,1,a.getTotalPageCount(i()));a.setCurrentIndex(((e,t)=>t*(e-1))(l,c))};t?(e.navigationType="arrowsOnly",e.onNextClicked(o((()=>r({delta:1})),P.withMessage("Pagination adapter onNextClicked failed"))),e.onPreviousClicked(o((()=>r({delta:-1})),P.withMessage("Pagination adapter onPreviousClicked failed")))):e.onChange(o((e=>r({index:e.target.currentPage})),P.withMessage("Pagination adapter onChange failed"))),n.log(new s($e.types.COMPONENT.BOUND,{component:e}))},async onRecordsLoaded(){c()},async onCurrentViewChanged(){c()}}}],[Ie,(e,t,r)=>{const{logger:n}=j,{actions:o,getState:a,getFieldType:i,wixFormatter:s,PresetVerboseMessage:c}=r,l=function(e,t,r){return void 0===t&&(t={}),(0,Ke.reduce)(t,((t,n,o)=>{let{fieldName:a,format:c}=n;const l=ti(e,a);if("address"===o)return Object.assign(t,{address:(0,Ke.get)(l,"formatted"),location:(0,Ke.get)(l,"location")});if("link"===o&&(0,Ke.isEmpty)(l))return t;const u=Wi({value:ti(e,a),role:r,fieldType:i(a).getOrElse(void 0),propPath:o,format:c,utils:{formatter:s}});return Object.assign(t,{[o]:u})}),{})},u=async()=>{const{role:r}=e,{properties:i}=t;try{const{items:t}=await o.fetchCurrentItems(a());e.markers=t.map((e=>l(e,i,r)))}catch(e){n.log(new P("Failed setting markers",{cause:e}))}};return{...Ll(e),isValidConnection(){return Ul(t)},bind(){(()=>{const{properties:r}=t,o={};(0,Ke.forEach)(r,((e,t)=>{let{fieldName:r}=e;o[t]=r})),n.log(new c($e.types.COMPONENT.BOUND,{component:e,description:o}))})()},async onRecordsLoaded(){u()},async onCurrentViewChanged(){u()},async onCurrentIndexChanged(){const t=oc({state:a()});e.setCenter((0,Ke.get)(e,["markers",t,"location"]))},async onCurrentRecordModified(){const{properties:r}=t,{role:n}=e,o=Sn(a()),i=oc({state:a()});e.markers[i]=l(o,r,n),e.setCenter((0,Ke.get)(e,["markers",i,"location"]))}}}]]),eu=e=>{let{components:t,context:r}=e;const n=(e=>{let{recordStore:t,dispatch:n}=e;const a={fetchRecordById:(e,r)=>t(r).fold((()=>Ze.Maybe.Nothing()),(t=>t.getRecordById(e))),fetchAll:e=>(async(e,t,r,n)=>{const o=await e(n).fold((()=>_s.Empty()),(e=>e.externalApi.getRecordsLimitedByMaxPageSize(t,r)));return o.get()})(t,0,1e3,e),fetchCurrentItems:e=>bc(t,e).catch((()=>_s.Empty().get())),fetchOne:()=>Rc(t,0,1),fetch:(e,r,n)=>Rc(t,e,r,n),getTotalPageCount:e=>sc({state:e,recordStore:t}),getInitialData:()=>t().fold((()=>_s.Empty()),(e=>e.externalApi.getSeedRecords())),setCurrentIndex:(e,t)=>n(Ec(e,t)),setFieldInCurrentRecordAndSynchronize:(e,t,r)=>{n(_c({[e]:(0,Ke.cloneDeep)(t)},r))},refresh:()=>n(Sc()),resetUserInputFilters:()=>{const e=o.filter((e=>{let{role:t}=e;return t===ne||Ne.includes(t)})),t=Mn(r.getState());e.length&&(e.forEach((e=>e.resetUserFilter())),t||a.refresh())},isCurrentRecordNew:e=>t().fold((()=>!1),(t=>t.isNewRecord(oc({state:e})))),isCurrentRecordPristine:e=>t().fold((()=>!1),(t=>t.isPristine(oc({state:e})))),isCursorPaging:()=>ec({recordStore:t}),hasNextPage:e=>pc({state:e,recordStore:t}),getUniqueFieldValues:e=>t().fold((()=>!1),(t=>t.getUniqueFieldValues(e)))};return a})(r),o=t.map((e=>((e,t,r)=>(Zl.get(e.role)||(e.isInput?Hl:kl))(e,t,r))(e,Fl(e.connectionConfig,r.getFieldType),{...r,actions:n}))).filter((e=>e.isValidConnection()));return{bindAll:async()=>Promise.all(o.map((e=>(e.bind(),e.onRecordsLoaded())))),hideAll:()=>o.map((e=>e.hide())),showAll:()=>o.map((e=>e.show({ignoreInitiallyHidden:!0}))),clearAll:()=>o.map((e=>e.clear())),onRecordsLoaded:()=>o.map((e=>e.onRecordsLoaded())),onCurrentViewChanged:()=>o.map((e=>e.onCurrentViewChanged())),onCurrentIndexChanged:()=>o.map((e=>e.onCurrentIndexChanged())),onCurrentRecordModified:(e,t)=>o.filter((e=>{let{id:r}=e;return!t||t!==r})).map((t=>t.onCurrentRecordModified(e)))}},tu=e=>{let{datasetId:t,masterIds:r,connectionsGraph:n}=e;const o=e=>n[t].includes(e.id)?"PRIMARY":r.some((t=>n[t].includes(e.id)))?"DETAILS":"OTHER";return{isInsidePrimaryOrDetailsRepeater:e=>{let{parentRepeater:t}=e;return!!(r=t)&&["PRIMARY","DETAILS"].includes(o(r));var r},getDetailsRepeaters:e=>{const t=[];return e.forEach((e=>{let{parentRepeater:r}=e;r&&"DETAILS"===o(r)&&t.push(new Proxy(r,{get(e,t){return"role"===t?te:e[t]}}))})),(0,Ke.uniqBy)(t,"uniqueId")}}},ru="mediaGalleryRole",nu=[m.FieldType.text,m.FieldType.number,m.FieldType.image,m.FieldType.video,m.FieldType.mediaGallery,m.FieldType.richContent],ou={[m.FieldType.text]:"text",[m.FieldType.number]:"number",[m.FieldType.image]:"image",[m.FieldType.video]:"video",[m.FieldType.mediaGallery]:"gallery",[m.FieldType.richContent]:"rich-content"},au=e=>{var t;let{recordStore:r,state:n,schema:o,connections:a,isDpItemDataset:i}=e;if(!i&&!a.length)return{collectionData:void 0};const s=Sn(n);if(!s)return{collectionData:void 0};const{id:c,displayName:l,displayField:u,fields:d}=o,p=i&&u?s[u]:void 0,f=i?1:null!=(t=(e=>{let{recordStore:t}=e;const r=ic({recordStore:t});return r?r.total:null})({recordStore:r}))?t:void 0;return{title:p,collectionData:{id:c,name:l||c,totalCount:f,fields:iu({connections:a,fields:d,currentRecord:s}),primary:i}}},iu=e=>{let{connections:t,fields:r,currentRecord:n}=e;const o=t.reduce(cu,{});return Object.entries(r).filter((e=>{let[t,r]=e;return!r.pii&&!r.isDeleted&&nu.includes(r.type)})).map((e=>{var t;let[r,a]=e;return{key:r,type:ou[a.type],label:a.displayName,connected:!(null==(t=o[r])||!t.length),value:su({key:r,field:a,currentRecord:n,connections:o[r]||[]})}}))},su=e=>{let{key:t,field:r,currentRecord:n,connections:o}=e;const{type:a}=r,i=n[t];switch(a){case m.FieldType.image:return i&&lu({src:i},o);case m.FieldType.video:return i&&uu({src:i},o);case m.FieldType.mediaGallery:return du(i,o);case m.FieldType.text:case m.FieldType.number:case m.FieldType.richContent:return i;default:throw new Error("Unsupported field type: "+a)}},cu=(e,t)=>{var r;const n=(null==t||null==(r=t.config)?void 0:r.properties)||{};return Object.values(n).map((e=>{let{fieldName:t}=e;return t})).forEach((r=>{e[r]||(e[r]=[]),e[r].push(t)})),e},lu=(e,t)=>{let{src:r}=e;const n=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===ru&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"galleryRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"imageRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));return{url:r,...pu(r),connectedToSrc:n}},uu=(e,t)=>{let{src:r,title:n,description:o}=e;const a=t.some((e=>{var t,r,n;let{role:o,config:a}=e;return o===ru&&Boolean(null==a||null==(t=a.properties)?void 0:t.items)||"videoPlayerRole"===o&&Boolean(null==a||null==(r=a.properties)?void 0:r.src)||"videoRole"===o&&Boolean(null==a||null==(n=a.properties)?void 0:n.src)}));if(!mu(r))return{thumbnailUrl:void 0,title:n,description:o,uploadDate:void 0,connectedToSrc:a};const[i,s]=r.match(/posterUri=(\w+)/)||[],[c,l]=r.match(/posterWidth=(\d+)/)||[],[u,d]=r.match(/posterHeight=(\d+)/)||[];return{thumbnailUrl:fu({uri:s,width:Number(l),height:Number(d)}),title:n,description:o,uploadDate:void 0,connectedToSrc:a}},du=function(e,t){return void 0===e&&(e=[]),e.map((e=>"image"===e.type?lu(e,t):uu(e,t)),t)},pu=e=>{if(!hu(e))return{height:void 0,width:void 0};const[t,r]=e.match(/originHeight=(\d+)/)||[],[n,o]=e.match(/originWidth=(\d+)/)||[];return{height:r?Number(r):void 0,width:o?Number(o):void 0}},fu=e=>{let{uri:t,width:r,height:n,filename:o="image.ext"}=e;return"wix:image://v1/"+t+"/"+o+"#originWidth="+r+"&originHeight="+n},hu=e=>e.startsWith("wix:image://"),mu=e=>e.startsWith("wix:video://");var gu=(e,t)=>r=>{let{shouldCollectSeoData:n,controllerConfig:o,datasetType:a,connections:i,connectionsGraph:s,isScoped:c,datasetScope:l,dataProvider:u,dependencyManager:d,seoManager:p,firePlatformEvent:f,dynamicPagesData:h,datasetId:m,fixedRecordId:g,recordStoreService:y,updatedCompIds:v,markControllerAsRendered:I,markDatasetDataFetched:w,renderingRegularControllers:E,modeIsLivePreview:_,modeIsSSR:T,useLowerCaseDynamicPageUrl:S,schemasLoading:R,listenersByEvent:b}=r;const O=i.filter((e=>!(e=>{let{role:t}=e;return Ne.includes(t)})(e)||e.config)),C=!!g,{logger:D,platform:{user:N,settings:{locale:A,env:{renderer:x}},timers:{queueMicrotask:M}}}=j,{setConnectedComponents:F,getConnectedComponents:L}=(()=>{let e;return{setConnectedComponents:t=>e=t,getConnectedComponents:()=>e}})(),U=[],{store:k,subscribe:V,onIdle:W}=Fc(D,m),G=tl(f),{fireEvent:B,register:z}=G;U.push(G.dispose);const H=new q({datasetId:Dl(m),scopedDatasetId:c?m:void 0,getState:k.getState,getSchema:function(e){return void 0===e&&(e=ee),u.getSchema(e)}}),X=H.subscribe(b);U.push(...X),k.dispatch(wr({controllerConfig:o,connections:O,isScoped:c,datasetType:a}));const{datasetIsVirtual:Y,datasetIsReal:J,datasetIsDeferred:Q,datasetIsWriteOnly:K,datasetIsRouter:Z,datasetCollectionName:ee,dynamicPageNavComponentsShouldBeLinked:te}=(re=k.getState(),{datasetIsRouter:vn(re),datasetIsMaster:In(re),datasetIsVirtual:wn(re),datasetIsReal:En(re),datasetIsDeferred:_n(re),datasetIsWriteOnly:gn(re),datasetCollectionName:cn(re),dynamicPageNavComponentsShouldBeLinked:Tn(re)});var re;const ne=ln(k.getState()),oe=un(k.getState()),ae=function(e){return void 0===e&&(e=ee),Ze.Maybe.fromNullable(u.getSchema(e))},ie=e=>{const t=ae(ee),r=u.getReferencedSchemas(ee);return t.chain((t=>Ze.Maybe.fromNullable(so(t,r)(e))))},se=((e,t,r)=>({dataBinding:Ya(e),currentUser:Xa(),userInput:$i({getConnectedComponents:t,getFieldType:r})}))((e=>d.getDependencyById(e,l)),L,ie),ce=Qi({valueResolvers:se,getConnectedComponents:()=>hn(k.getState())?L():[],getFieldType:ie,getUserFilterInitialData:()=>Vn(k.getState()),wasSetFilterCalled:(0,Ke.flow)((e=>k.getState()),Mn)}),le=(e=>{let{recordStoreService:t,getFilter:r,getSort:n,getPageSize:o,datasetId:a,filterResolver:i,getSchema:s,fixedRecordId:c}=e;return e=>{const l=o();return t.chain((t=>{if(e)return Ze.Result.fromMaybe(s().map((t=>co(e,t))),"cannot resolve referenced collection name for field "+e).map((e=>t({pageSize:l,sort:null,filter:null,datasetId:a,referencedCollectionName:e,fixedRecordId:c})));{const e=r();return Ze.Result.fromMaybe(i(e).map((e=>t({pageSize:l,sort:n(),filter:e,datasetId:a,referencedCollectionName:null,fixedRecordId:c}))),"could not resolve dynamic filter")}}))}})({recordStoreService:y,getFilter:(0,Ke.flow)((e=>k.getState()),ln),getSort:(0,Ke.flow)((e=>k.getState()),un),getPageSize:()=>tc({state:k.getState()}),datasetId:m,filterResolver:ce,getSchema:ae,fixedRecordId:g}),ue=te?(e=>{let{dataProvider:t,dynamicPagesData:r,collectionName:n,useLowerCaseDynamicPageUrl:o}=e;return{getNextDynamicPageUrl:()=>vl({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"asc",useLowerCaseDynamicPageUrl:o}),getPreviousDynamicPageUrl:()=>vl({dataProvider:t,dynamicPagesData:r,collectionName:n,directionTowardSibling:"desc",useLowerCaseDynamicPageUrl:o})}})({dataProvider:u,dynamicPagesData:h,collectionName:ee,useLowerCaseDynamicPageUrl:S}):null;let de,pe;te&&(V(yl(ue)),k.dispatch(Dc(O)));const fe=new Promise(((e,t)=>{de=e,pe=t})),me=c?void 0:()=>fe;c||z("datasetReady",de);const ge=el({store:k,recordStore:le,eventListeners:G,controllerStore:t,datasetId:m,datasetType:a,isFixedItem:C,siblingDynamicPageUrlGetter:ue,onIdle:W,dispatcher:H,onReadyAsync:me}),ye=ge(!1);U.push(y.map((e=>e.onChange(Pl(k.getState,k.dispatch)))).getOrElse((()=>{})));const{fetchingInitialData:ve,resolveUserInputDependency:Ie}=Sl({dependencyManager:d,shouldFetchInitialData:o&&!K,recordStore:le,store:k,filter:ne,sort:oe,datasetIsDeferred:Q,modeIsSSR:T,queueMicrotask:M,datasetIsReal:J,collectionId:ee,filterResolver:ce,getSchemas:()=>u.getSchemas(),schemasLoading:R,getUserFilterInitialData:()=>u.getUserFilterInitialData(m)});ve.then((()=>{w();const e=le().fold((()=>{}),(e=>e.getSeedRecords().matchWith({Empty:()=>{},Results:e=>{let{items:t}=e;return t[0]}})));e&&k.dispatch(Cc.setCurrentRecord(e,0))}));c&&!C&&d.getDependenciesByFilter(ne,l).forEach((e=>{let{masterDataset:{api:t}}=e;Nl({detailsDatasetApis:[ye],store:k,masterDatasetApi:t,controllerConfig:o,unsubscribeHandlers:U})}));n&&J&&!Q&&Promise.all([ve,R]).then((()=>{let e={};try{e=au({isDpItemDataset:Z,recordStore:le,state:k.getState(),schema:u.getSchema(ee),connections:O})}catch(e){D.log(new P("Failed to extract seo data for dataset "+m,{cause:e}))}p.submitSeoData(e)}));const we=async function(r){N.onLogin((()=>{(()=>{const e=oc({state:k.getState()}),t=le().fold((()=>!1),(t=>t.isPristine(e)));return t&&!K})()&&ye.refresh()}));const{components:n,detailsDatasetApis:i}=r(O),c=Ol({updatedCompIds:v,datasetIsReal:J,connectionsGraph:s,components:n});F(c);const l=((e,t)=>{let{datasetId:r,connectionsGraph:n,datasetIsReal:o,getDependencies:a}=t;if(!o)return e;const{isInsidePrimaryOrDetailsRepeater:i,getDetailsRepeaters:s}=tu({datasetId:r,connectionsGraph:n,masterIds:a().map((e=>e.masterDatasetId))}),c=e.filter((e=>!i(e)));return c.push(...s(e)),c})(c,{datasetId:m,datasetIsReal:J,connectionsGraph:s,getDependencies:()=>d.getDependenciesByFilter(ne)});if(Nl({detailsDatasetApis:i,masterDatasetApi:ye,dependencyManager:d,controllerConfig:o,unsubscribeHandlers:U}),J&&await R,Ie(),!fn(k.getState())||!u.hasSchema(o.dataset.collectionName))return ve.then((()=>{I(),d.resolveDependants(m),k.dispatch(Ac(!0)),B("datasetReady")})),Promise.resolve();const p=eu({components:l,context:{connections:O,recordStore:le,dispatch:k.dispatch,getState:k.getState,datasetApi:ye,eventListeners:G,dispatcher:H,getFieldType:ie,getSchema:ae,controllerFactory:e,controllerStore:t,PresetVerboseMessage:$e.with({collectionId:ee}),modeIsLivePreview:_,wixFormatter:A?ul({locale:A}):null}});V(((e,t,r,n,o,a,i,s)=>{const c=fl(e,t,r,n,o,a,i,s),l=e=>{let{from:t,to:r,hasChanged:n,hasChangedToFalse:o,hasChangedToTrue:a,hasChangedToMatch:i}=e;const s=Rn(r),l=Rn(t),u=On(r),d=Fn(r),p=[];return(i(On,(e=>e>=0&&e!==s))||a(Fn))&&p.push(c.goToRecordByIndex(l,u,d)),(n(Rn)&&l>=0||o(xn)&&0===s)&&p.push(c.notifyIndexChange(s)),p},u=e=>{let{from:t,to:r,hasChanged:n,hasChangedToMatch:o,hasChangedToTrue:a}=e;const i=Rn(r),s=Sn(r),l=Sn(t),u=[];gs(l,s)?(0,Ke.isEqual)(l,s)||(u.push(c.updateComponents(Dn(r),l)),u.push(c.fireEvent("itemValuesChanged",(0,Ke.cloneDeep)(l),(0,Ke.cloneDeep)(s)))):null==l||null==s||n(Rn)||u.push(c.updateComponents());const d=Cn(r);return o(Cn,(e=>null!=e))&&u.push(c.setFieldsInCurrentRecord(d,i,Dn(r))),a(kn)&&u.push(c.revertChanges(i,bn(r))),a(Un)&&u.push(c.removeCurrentRecord(i)),u},d=e=>{let{to:t,hasChanged:r,hasChangedToFalse:n,hasChangedToTrue:o}=e;const a=[];return r(hl)&&a.push(c.refresh(Rn(t),bn(t),gn(t))),r(dn)&&a.push(c.notifyRecordSetLoaded()),o(xn)&&a.push(c.refresh(Rn(t),bn(t),gn(t))),n(xn)&&a.push(c.notifyRecordSetLoaded()),o(Ln)&&a.push(c.updateCurrentView()),a},p=e=>{let{from:t,to:r,hasChangedToTrue:n}=e;const o=Rn(r),a=Sn(r);if(n(jn))return c.saveRecord(o,a)},f=e=>{let{from:t,to:r,hasChangedToNotNull:n}=e;const o=[];return n(Pn)&&o.push(c.newRecord(Pn(r),bn(r))),o};return e=>(0,Ke.flatten)([l,u,d,p,f].map((t=>t(e))))})(le,p,ie,G.executeHooks,m,l,B,H)),U.push(((e,t,r,n,o)=>sl(e,t,r,n,o))(k,l,D,m,le));const f=Rl(l.filter((e=>{let{role:t}=e;return![he,Te].includes(t)})));k.dispatch(Cc.setDefaultRecord(f)),K&&await k.dispatch(Cc.initWriteOnly(Y)),Q&&(p.hideAll(),T&&p.clearAll());const h=ve.then((async()=>{if(Q&&await E,!T)try{((e,t,r,n,o,a)=>{if(n)return;const i=cn(e);if(!i)return;const s=a.fold((()=>i),(e=>e.displayName)),c=pn(e),l=!!Sn(e),{logger:u,platform:{settings:{env:{editor:d}}}}=j;l&&[Wn,Gn].includes(c)&&t.find((e=>{let{role:t,config:r}=e;return Qe(t,r)}))&&u.log(new Jn({id:d?153:152,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c})),_t(pn(e),t)&&u.log(new Jn({id:d?157:156,collectionId:i,collectionName:s,datasetId:o,datasetType:r,datasetMode:c}))})(k.getState(),O,a,Y,m,ae(ee))}catch(e){D.log(new P("Failed to report dataset active BI",{cause:e}))}await p.bindAll(),J&&await(e=>Promise.all(e.getAll().map((e=>new Promise((t=>{e.staticExports.onReady(t)}))))))(t),Q&&p.showAll(),d.resolveDependants(m),k.dispatch(Ac(!0)),B("datasetReady")}));return Q?(I(),Promise.resolve()):(h.then(I),h)},Ee=ge(!0),_e=Y?we:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return D.log(new Ge("dataset/pageReady",(()=>we(...t))))};return{pageReady:$(_e,(e=>(pe(),D.logError(e,"Dataset pageReady callback failed",{datasetId:m})))),exports:e=>e.type===Ic.l.COMPONENT?Ee.inScope(e.compId,e.additionalData.itemId):Ee,staticExports:Ee,dispose:()=>{U.forEach((e=>e()))},api:ye,userFilterInitialDataPromise:ve.then((e=>{let[t,r]=e;return r}))}};var yu=(e,t)=>{const r=vc(e),n={createRealDataset:()=>o({...t,isScoped:!1}),createScopedDetailsDataset:e=>{let{datasetScope:r}=e;return o({...t,isScoped:!0,firePlatformEvent:Ke.noop,datasetId:Cl(t.datasetId,r),datasetScope:r})},createScopedDataset:e=>{let{datasetScope:r,fixedItem:n}=e;const{dataProvider:a,controllerConfig:i,dynamicPagesData:s}=t,c=(0,Ke.cloneDeep)(i),l={items:[n]};c.dataset.filter=a.createSimpleFilter("_id",n._id);const{collectionName:u}=i.dataset;return a.setCollectionData({collectionId:u,data:l}),o({...t,isScoped:!0,controllerConfig:c,firePlatformEvent:Ke.noop,dynamicPagesData:s,datasetId:Cl(t.datasetId,r),fixedRecordId:r.itemId})}},o=gu(n,r);return n};const vu=e=>Zi(e).map((e=>{let{filterExpression:{filterId:t}}=e;return t}));var Iu=a(9025);function wu(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Eu=new WeakMap;class _u{constructor(){wu(this,Eu,{writable:!0,value:void 0}),u()(this,Eu,new Map)}get datasetConfigs(){return c()(this,Eu)}}function Tu(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Su=new WeakMap,Ru=new WeakMap,bu=new WeakMap,Ou=new WeakMap,Cu=new WeakMap,Du=new WeakMap,Pu=new WeakMap;class Nu{constructor(e){let{platform:t,dataFetcher:r,warmupCache:n,staticCache:o,features:a,listenersByEvent:i,logger:s,i18n:c,global:l}=e;Tu(this,Su,{writable:!0,value:void 0}),Tu(this,Ru,{writable:!0,value:void 0}),Tu(this,bu,{writable:!0,value:void 0}),Tu(this,Ou,{writable:!0,value:void 0}),Tu(this,Cu,{writable:!0,value:void 0}),Tu(this,Du,{writable:!0,value:void 0}),Tu(this,Pu,{writable:!0,value:void 0});const d=new $n(s,l);V({platform:t,features:a,dataFetcher:r,i18n:c,appState:new _u,logger:d,errorReporting:Hn(d),breadcrumbReporting:Xn(d),verboseReporting:Yn(d)}),u()(this,Su,new ja),u()(this,Ru,n),u()(this,bu,o),u()(this,Ou,a),u()(this,Du,d),u()(this,Pu,{}),u()(this,Cu,i)}initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;try{return c()(this,Du).log(new Ge("databinding/createControllers",(()=>this._initializeDatasets({datasetConfigs:t,firePlatformEvent:r}))))}catch(e){return c()(this,Du).logError(e,"Datasets initialisation failed"),[]}}_initializeDatasets(e){let{datasetConfigs:t,firePlatformEvent:r}=e;const{platform:{settings:{mode:{name:n,csr:o,ssr:a},env:{livePreview:i,live:s}},seo:l,location:u},features:d}=j,p=ss(t),f=this._updateDatasetConfigsState(p),h=c()(this,Ou).warmupData,m=[],g=[],{resolve:y,promise:v}=new z;c()(this,Su).setSchemas({...h&&o&&c()(this,Ru).getSchemas()||{},...c()(this,bu).getSchemas()||{}});const I=c()(this,Du).log(new Ge("databinding/loadSchemas",(()=>c()(this,Su).loadSchemas(Au(p)).then((()=>h&&a&&c()(this,Ru).setSchemas(c()(this,Su).getSchemas()))))));c()(this,Su).setDatasetConfigs(p.map((e=>{let{config:{dataset:{collectionName:t}},compId:r,type:n}=e;return{collectionId:t,datasetId:r,type:n}})));const w=o&&h&&c()(this,Ru).getDataStore();w&&c()(this,Su).setStore(Wu(w));const E=c()(this,bu).getDataStore();E&&c()(this,Su).setStaticStore(Wu(E)),c()(this,Su).createInitialDataRequest(this._getInitialDataRequestConfigs(p,f));const _=p.reduce(((e,t)=>{let{compId:r,connections:n}=t;return e[r]=n.map((e=>{let{compId:t}=e;return t})),e}),{}),T=(e=>{let{datasetConfigs:t}=e;const r={},n={},o=(e,t)=>{const o=n[e];if(!o)return;const a=r[o.masterDatasetId];return a?{...o,masterDataset:t?{...a,api:a.api.inScope(t.repeaterId,t.itemId)}:a}:o};return t.forEach((e=>{let{id:t,connections:r}=e;r.forEach((e=>{let{role:r,config:o}=e;r===re&&Object.entries(o.filters).forEach((e=>{let r,[o,{fieldName:a}]=e;n[o]={id:o,fieldName:a,masterDatasetId:t,isResolved:!1,promise:new Promise((e=>r=e)),resolve:()=>{n[o].isResolved=!0,r()}}}))}))})),{resolveDependants:e=>Object.values(n).forEach((t=>{let{id:r,masterDatasetId:o}=t;e===o&&n[r].resolve()})),getDependencyResolutionPromise:e=>{const t=vu(e).flatMap((e=>n[e]&&!n[e].isResolved?[n[e].promise]:[]));return t.length>0?Promise.all(t):void 0},getDependencyById:o,getDependenciesByFilter:(e,t)=>vu(e).flatMap((e=>o(e,t)||[])),registerDataset:e=>{let{id:t,api:n,config:o}=e;r[t]={id:t,api:n,config:o}}}})({datasetConfigs:p}),S=p.some((e=>{let{type:t,dynamicPageData:r}=e;return t===Vr&&!(null==(n=null==r?void 0:r.dynamicUrl)||!n.match(/\{.+\}/));var n})),R=d.seoIntegration&&a&&s&&S,b=R?(e=>{let{seo:t,pageUrl:r}=e;const{logger:n}=j;let o;const a={title:void 0,pageUrl:r,collections:[]};return{submitSeoData:e=>{let{title:t,collectionData:r}=e;o||(t&&(a.title=t),r&&a.collections.push(r))},renderSeoTagsOnce:()=>(o||(o=t.renderSEOTags({itemType:Iu.ITEM_TYPES.WIX_DATA_PAGE_ITEM,itemData:a}).catch((e=>{n.log(new P("Failed to render seo tags",{cause:e}))}))),o)}})({seo:l,pageUrl:u.pageUrl}):null,O=p.map((e=>{let{type:t,config:s,connections:l,compId:u,livePreviewOptions:{shouldFetchData:d,compsIdsToReset:p=[]}={},dynamicPageData:f}=e;const{datasetIsRouter:y,datasetIsDeferred:E}=s.datasetStaticConfig;c()(this,Du).log(new Be({category:"createControllers",message:"warmup data contents",data:{datasetId:u,datasetType:t,mode:n,warmupData:Boolean(w)}}));const S=(e=>{let{primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,controllerConfig:a}=e;return Ze.Result.fromNullable(a,"missing controller configuration").chain((e=>{let{dataset:t}=e;return Ze.Result.fromNullable(t,"controller configuration is missing dataset object")})).chain((e=>{let{collectionName:t}=e;return Ze.Result.fromNullable(t,"dataset is not connected to a collection")})).map((e=>{const i=(0,Ke.get)(a,["dataset","includes"]),s=(0,Ke.get)(a,["dataset","nested"]),c=(0,Ke.get)(a,["dataset","cursor"]),l=(0,Ke.get)(a,["dataset","readWriteType"]),u=(0,Ke.get)(a,["dataset","uniqueFieldValues"]);return yc({primaryDatasetId:t,recordStoreCache:r,refreshStoreCache:n,dataProvider:o,mainCollectionName:e,includes:i,nestedFieldKeys:s,uniqueFieldValues:u,readWriteType:l,cursorPagingRequired:c})}))})({primaryDatasetId:u,recordStoreCache:c()(this,Pu),refreshStoreCache:d,dataProvider:c()(this,Su),controllerConfig:s}),{promise:O,resolve:C}=new z;y||E||m.push(O);const{promise:D,resolve:P}=new z;g.push(D);const N=o&&h&&c()(this,Ru).getUserFilterInitialData(u);N&&c()(this,Su).setUserFilterInitialData(u,N);const A=yu(c()(this,Du),{shouldCollectSeoData:R,seoManager:b,dependencyManager:T,controllerConfig:s,datasetType:t,connections:l,connectionsGraph:_,recordStoreService:S,dataProvider:c()(this,Su),firePlatformEvent:r(u),dynamicPagesData:y&&f?xu({dynamicPageData:f,items:c()(this,bu).getItems(),config:s,convertFromCustomFormat:Qn.PL}):void 0,datasetId:u,schemasLoading:I,listenersByEvent:c()(this,Cu),updatedCompIds:p,markControllerAsRendered:P,markDatasetDataFetched:C,renderingRegularControllers:v,modeIsLivePreview:i,modeIsSSR:a,useLowerCaseDynamicPageUrl:null==f?void 0:f.lowercase}).createRealDataset();return T.registerDataset({id:u,api:A.api,config:s}),a&&h&&A.userFilterInitialDataPromise.then((e=>{c()(this,Ru).setUserFilterInitialData(u,e)})),ku(A)}));a&&h&&m.length&&Promise.all(m).then((()=>{c()(this,Ru).setDataStore(Vu(c()(this,Su).getStore()))})),Promise.all(g).then(y);const C=()=>Promise.all(m).then(b.renderSeoTagsOnce);return R?O.map((e=>({...e,pageReady:function(){return e.pageReady(...arguments).then(C)}}))):O}_updateDatasetConfigsState(e){const{appState:t}=j;return e.reduce(((e,r)=>{let{compId:n,config:{dataset:o}}=r;const a=t.datasetConfigs.get(n);return a&&!(0,Ke.isEqual)(a,o)&&e.push(n),t.datasetConfigs.set(n,o),e}),[])}_getInitialDataRequestConfigs(e,t){return e.reduce(((e,r)=>{let{compId:n,config:{datasetStaticConfig:{sequenceType:o}},livePreviewOptions:{shouldFetchData:a}={}}=r;return o===Ga?[...e,{id:n,refresh:a||t.includes(n)}]:e}),[])}}const Au=e=>[...e.reduce(((e,t)=>{let{config:{dataset:{collectionName:r}}}=t;return r?e.add(r):e}),new Set)],xu=e=>{let{dynamicPageData:t,config:r,items:n,convertFromCustomFormat:o}=e;const{dynamicUrl:a,userDefinedFilter:i}=t,s=o(n)[0],c=(0,Ke.get)(r,"dataset.sort",[])||[],l=a&&s?(u=a,{fields:(u=ds(u)).match(cs)||[],nonFields:u.replace(cs,"").split(us).filter((e=>!!e))}).fields:[];var u;const d=Mu(c),p=(0,Ke.difference)(l,d),f=Fu([...c,...Lu(p)]),h=[...d,...p];return{dynamicUrl:a,userDefinedFilter:i,dynamicUrlPatternFieldsValues:Uu(s,h,l),sort:f,sortFields:h,patternFields:l}},Mu=e=>(0,Ke.flatten)(e.map((e=>Object.keys(e).map((e=>e))))),Fu=e=>e.reduce(((e,t)=>Object.assign(e,t)),{}),Lu=e=>e.map((e=>({[e]:"asc"}))),Uu=(e,t,r)=>{const n=r.concat(t);return r.length?(0,Ke.pick)(e,n):null},ku=e=>{let{pageReady:t,exports:r,dispose:n}=e;return{pageReady:t,exports:r,dispose:n}},ju=e=>t=>{if(t)return{...t,recordsByCollectionId:Object.entries(t.recordsByCollectionId).reduce(((t,r)=>{let[n,o]=r;return t[n]=e(o),t}),{})}},Vu=ju(Qn.ah),Wu=ju(Qn.PL),Gu=e=>{let{datasetId:t,record:r,schema:n,getSchema:o}=e;const a={"form-id":{value:t,keyName:""}},i=(0,Ke.pickBy)(n.fields,((e,t)=>((e,t)=>{const r=e.type,n=R.includes(r),o=!!e.systemField,a=["_createdDate","_updatedDate"].includes(t||e.name);return(!o||a)&&n})(e,t)&&!function(e){return!!e.isDeleted}(e)));return(0,Ke.forEach)(i,((e,n)=>{const i=function(e){let{record:t,fieldData:r,fieldName:n,getSchema:o}=e;if("reference"===r.type){const e=o(r.referencedCollection);if(!e)return;const a=ti(t[n],e.displayField);return{value:hi(a),type:e.fields[e.displayField].type}}return{value:hi(ti(t,n)),type:r.type}}({record:r,fieldData:e,fieldName:n,getSchema:o});if(!i)return;const{value:s,type:c}=i,{displayName:l,index:u}=e,d=((e,t)=>`${e}.${t}`)(t,n);a["field:"+d]={value:s,keyName:l,index:u,valueType:c}})),a};const Bu=e=>{let{automationsClientCreator:t}=e;const r=t().reportFormEventToAutomationCreator();return{afterSave:async(e,t,n)=>{let{datasetId:o,getSchema:a,getState:i}=e;const s=i(),c=a();Boolean(s.records.isForm)&&c&&await r((e=>{let{datasetId:t,getSchema:r,record:n,schema:o}=e;return{eventUTCTime:ti(n,"_updatedDate"),detailedEventPayload:Gu({datasetId:t,record:n,schema:o,getSchema:r})}})({datasetId:o,record:n,schema:c,getSchema:a}))}}};var qu=a(4126),zu=function(e,t){return zu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},zu(e,t)};function $u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}zu(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;Object.create;var Hu=a(5675),Xu=a.n(Hu);function Yu(e){return"object"===Xu()(e)}function Ju(e){return"array"===Xu()(e)}function Qu(e){return"string"===Xu()(e)}function Ku(e){return function(e){if(!Qu(e))return e;var t=e.slice(0,1).toUpperCase(),r=e.slice(1,e.length);return t+r}(Xu()(e))}function Zu(e){if(null==e||"object"!=typeof e)return e;var t=null;if(function(e){return"date"===Xu()(e)}(e))t=new Date(e.getTime());else for(var r in t=e.constructor(),e)t[r]=Zu(e[r]);return t}var ed=a(3065);a(5174);var td=function(){return"WDE0001: Collection name must be a string."},rd=function(){return"WDE0002: ItemId must be a string."},nd=function(){return"WDE0068: Item ids must be an array of strings"},od=function(e){return"WDE0069: Failed to remove items from [".concat(e,"].\nCannot remove more than 1000 items in one request")},ad=function(){return"WDE0003: FieldName must be a string."},id=function(e,t){return"WDE0004: Failed to save [".concat(e,"] into [").concat(t,"].\nItems must be JavaScript objects.")},sd=function(e){return"WDE0005: Failed to bulk save items into [".concat(e,"].\nItems must be an array of JavaScript objects and itemIds must be strings if present.")},cd=function(e){return"WDE0006: Failed to bulk save items into [".concat(e,"].\nCannot insert more than 1000 items in one request")},ld=function(){return"WDE0007: Invalid update. Updated object must have a string _id property."},ud=function(e,t,r,n){return"WDE0008: wixData.".concat(e," expects between ").concat(t," and ").concat(r," arguments, but was called with ").concat(n,".")},dd=function(e){return"WDE0018: Options must be an object with one or all of the following boolean properties: ".concat(e.join(", "),".")},pd=function(){return"WDE0019: Reference operation takes a string ID or an object with an ID to be connected."},fd=function(){return"WDE0021: Invalid reference"},hd=function(e){return"WDE0025: The ".concat(e," collection does not exist. You cannot work with a collection using the Data API before it is created in the Editor.")},md=function(e){return"WDE0026: The ".concat(e," collection was removed, so you cannot work with it. To restore its data, create a new collection with the same name.")},gd={queryInvalid:function(e,t){return"Failed to perform query on [".concat(e,"].\n").concat(t.join("\n"))},isNumber:function(e,t,r){return"WDE0032: Invalid ".concat(e," parameter [").concat(Ku(r),"]. ").concat(e," parameter must be a ").concat(t," number.")},isPositiveNumber:function(e,t){return"WDE0033: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a positive number.")},isNonNegativeNumber:function(e,t){return"WDE0034: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be a non-negative number.")},isInteger:function(e,t){return"WDE0035: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter must be an integer.")},isNonEmptyString:function(e){return"WDE0094: Invalid ".concat(e," parameter. ").concat(e," parameter must be non-empty string.")},notGreaterThan:function(e,t,r){return"WDE0036: Invalid ".concat(e," parameter [").concat(t,"]. ").concat(e," parameter cannot exceed ").concat(r,".")},invalidSkipParameter:function(e,t){return"WDE0037: Invalid query on [".concat(e,"].\nInvalid prev positioned query skip on a negative number ").concat(t,".")}},yd={arityIsZero:function(e){return"WDE0038: Invalid ".concat(e," usage. ").concat(e," does not take parameters.")},arityIsOne:function(e){return"WDE0039: Invalid ".concat(e," usage. ").concat(e," requires one parameter.")},arityIsTwo:function(e){return"WDE0040: Invalid ".concat(e," usage. ").concat(e," requires two parameters.")},arityIsThree:function(e){return"WDE0041: Invalid ".concat(e," usage. ").concat(e," requires three parameters.")},arityIsAtLeastTwo:function(e){return"WDE0042: Invalid ".concat(e," usage. ").concat(e," requires at least two parameters.")},arityIsAtLeastOne:function(e){return"WDE0043: Invalid ".concat(e," usage. ").concat(e," requires at least one parameter.")}},vd="WD_UNKNOWN_ERROR",Id="WD_VALIDATION_ERROR",wd="WD_COLLECTION_DELETED",Ed="WD_SCHEMA_DOES_NOT_EXIST";function _d(e,t){return Td(e,t)}function Td(e,t){var r=new(t&&t!==vd?Rd:Error)(e);return r.code=t,r}function Sd(e){return _d(hd(e),Ed)}function Rd(e){var t=new ed.UserCodeError(e);return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(t,Rd),t.name=Error.name,t}Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Rd.prototype=Object.create(ed.UserCodeError.prototype,{constructor:{value:Rd,enumerable:!1,writable:!0,configurable:!0}});var bd=function(){function e(){this._validations=[]}return e.prototype.arityIsZero=function(e){var t=this;return this.addValidation((function(){return 0===e.length}),(function(){return yd.arityIsZero(t.operatorName)}))},e.prototype.arityIsOne=function(e){var t=this;return this.addValidation((function(){return 1===e.length}),(function(){return yd.arityIsOne(t.operatorName)}))},e.prototype.arityIsTwo=function(e){var t=this;return this.addValidation((function(){return 2===e.length}),(function(){return yd.arityIsTwo(t.operatorName)}))},e.prototype.arityIsThree=function(e){var t=this;return this.addValidation((function(){return 3===e.length}),(function(){return yd.arityIsThree(t.operatorName)}))},e.prototype.arityIsAtLeastTwo=function(e){var t=this;return this.addValidation((function(){return e.length>=2}),(function(){return yd.arityIsAtLeastTwo(t.operatorName)}))},e.prototype.arityIsAtLeastOne=function(e){var t=this;return this.addValidation((function(){return e.length>=1}),(function(){return yd.arityIsAtLeastOne(t.operatorName)}))},e.prototype.addValidation=function(e,t){return this._validations.push({predicateFn:e,messageFn:t}),this},e}(),Od=(function(e){function t(t){var r=e.call(this)||this;return r._invalidArguments=Zu(t),r}$u(t,e),t.prototype.validateAndAggregate=function(){var e=this,t=this._validations.every((function(t){var r=t.predicateFn,n=t.messageFn;return e._appendIfInvalid(r(),n())}));return[this._invalidArguments,t]},t.prototype._appendIfInvalid=function(e,t){return!!e||(this._invalidArguments.push(t),!1)}}(bd),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $u(t,e),t.prototype.validateAndReject=function(){var e=this;return Promise.resolve().then((function(){e._validations.forEach((function(e){var t=e.predicateFn,r=e.messageFn;if(!t())throw Td(r(),Id)}))}))},t}(bd));!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}$u(t,e),t.prototype.arity=function(e,t,r,n){return this.addValidation((function(){return t.length<=n&&t.length>=r}),(function(){return ud(e,r,n,t.length)}))},t.prototype._isObject=function(e,t){return this.addValidation((function(){return Yu(e)}),(function(){return id(e,t)}))},t.prototype.item=function(e,t,r){return this._isObject(e,t).addValidation((function(){return void 0!==e._id?Qu(e._id):!r}),(function(){return ld()}))},t.prototype.items=function(e,t){return this.addValidation((function(){return Ju(e)&&e.every((function(e){return Yu(e)&&(void 0===e._id||null===e._id||Qu(e._id))}))}),(function(){return sd(t)})).addValidation((function(){return e.length<=1e3}),(function(){return cd(t)}))},t.prototype.fieldName=function(e){return this.addValidation((function(){return Qu(e)}),(function(){return ad()}))},t.prototype.itemId=function(e){return this.addValidation((function(){return Qu(e)}),(function(){return rd()}))},t.prototype.itemIds=function(e,t){return this.addValidation((function(){return Ju(e)&&e.every((function(e){return Qu(e)}))}),(function(){return nd()})).addValidation((function(){return e.length<=1e3}),(function(){return od(t)}))},t.prototype._options=function(e,t){return this.addValidation((function(){var r=Yu(e)&&t.every((function(t){return null==(r=e[t])||(n=r,"boolean"===Xu()(n));var r,n}));return null==e||r}),(function(){return dd(t)}))},t.prototype.referenceRemoveParameters=function(e){return this.addValidation((function(){return Ju(e)&&e.every(Dd)}),pd)},t.prototype.referenceParameters=function(e){return this.addValidation((function(){return Ju(e)&&e.every(Cd)}),pd)},t.prototype.referenceParameter=function(e){return this.addValidation((function(){return Cd(e)}),pd)},t.prototype.isNonEmptyString=function(e,t){return this.addValidation((function(){return"string"==typeof e&&e.length>0}),(function(){return gd.isNonEmptyString(t)}))},t.prototype.references=function(e){return this.addValidation((function(){return Ju(e)&&e.every((function(e){return Qu(e.relationshipName)&&Cd(e.left)&&Cd(e.right)}))}),fd)},t.prototype.options=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts","consistentRead"])},t.prototype.bulkInsertOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","overrideExisting"])},t.prototype.bulkUpdateOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.bulkRemoveOptions=function(e){return this._options(e,["suppressAuth","suppressHooks","showDrafts"])},t.prototype.truncateOptions=function(e){return this._options(e,["suppressAuth"])},t.prototype.collectionName=function(e){return this.addValidation((function(){return Qu(e)}),(function(){return td()}))}}(Od);function Cd(e){return Qu(e)&&""!==e||Yu(e)&&e.hasOwnProperty("_id")}function Dd(e){return Qu(e)||Yu(e)&&e.hasOwnProperty("_id")}function Pd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ad(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function xd(e){return function(e,t){return Promise.reject(_d(e,t))}(md(e),wd)}var Md=function(e){function t(e,r){Pd(this,t);var n=Nd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.setPrototypeOf(n,r.prototype),n.name=r.name,Error.captureStackTrace?Error.captureStackTrace(n,r):n.stack=new Error(e).stack,n}return Ad(t,Error),t}(),Fd=function(e){function t(e){Pd(this,t);var r=Nd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,t));return r.reason=e,r.message=e,r}return Ad(t,e),t}(Md),Ld=function(e){function t(e,r,n,o){Pd(this,t);var a=Nd(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,t));return a.status=e,a.responseText=r,a.requestId=o,a}return Ad(t,e),t}(Md),Ud=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},kd=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var Vd=function(e){return"object"===(void 0===e?"undefined":jd(e))&&e.message?e.message:"string"==typeof e?e:JSON.stringify(e)},Wd=function(e){return e.reduce((function(e,t){return Object.assign({},e,(r={},n=t.id,o=t,n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r));var r,n,o}),{})},Gd=function(e,t){return e.endsWith(t)?e.substring(0,e.length-t.length):e},Bd=function(){function e(t,r,n,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(e){return e=Gd(e,"/"),Gd(e,"/v1/schemas")}(o&&o.baseUrl||"https://cloud-data.wix-code.com");this.signedInstance=r,this.gridAppId=n,this.mutate=function(e,r,n){return t[e](i+r,n,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)},this.retrieve=function(e){return t.get(i+e,a._setHeaders()).then((function(e){return e.data})).catch(a._handleError)}}return kd(e,null,[{key:"FailedRequestException",get:function(){return Fd}},{key:"UnsuccessfulResponseException",get:function(){return Ld}}]),kd(e,[{key:"wrapWithDefaultOptions",value:function(e){return Object.assign({},e,{appId:this.gridAppId})}},{key:"formRequestUrl",value:function(e){return"/v1/schemas?"+qu.stringify(e)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1},r=this.wrapWithDefaultOptions({includeDeleted:!0,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(r){var n=Ud(r.schemas,1)[0];return n&&n.isDeleted&&!t.includeDeletedCollections?xd(e):n||Promise.reject(Sd(e))}))}},{key:"bulkGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{includeDeletedCollections:!1,referencedCollectionsDepth:0},r=this.wrapWithDefaultOptions({depth:t.referencedCollectionsDepth||0,includeDeleted:t.includeDeletedCollections||!1,schemaIds:e});return this.retrieve(this.formRequestUrl(r)).then((function(e){var t=e.schemas;return Wd(t)}))}},{key:"list",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{includeDeletedCollections:!1},t=this.wrapWithDefaultOptions({schemaIds:[],depth:0,includeDeleted:e.includeDeletedCollections||!1});return this.retrieve(this.formRequestUrl(t)).then((function(e){var t=e.schemas;return Wd(t)}))}},{key:"save",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,schema:t});return this.mutate("post","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"setIsDeletedFlag",value:function(e,t){var r=this.wrapWithDefaultOptions({schemaId:e,partialSchema:{isDeleted:t}});return this.mutate("patch","/v1/schemas",r).then((function(e){return e.schemas}))}},{key:"remove",value:function(e){return this.setIsDeletedFlag(e,!0)}},{key:"restore",value:function(e){return this.setIsDeletedFlag(e,!1)}},{key:"_setHeaders",value:function(){return{headers:{authorization:this.signedInstance}}}},{key:"_handleError",value:function(e){if(!e.response)return Promise.reject(new Fd(Vd(e)));var t=e.response,r=t.headers["x-wix-request-id"];return Promise.reject(new Ld(t.status,t.data,Vd(t.data),r))}}]),e}(),qd=Bd;const zd={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},$d="fit",Hd="fill",Xd="fill_focal",Yd="crop",Jd="legacy_crop",Qd="legacy_fill",Kd="center",Zd="top",ep="top_left",tp="top_right",rp="bottom",np="bottom_left",op="bottom_right",ap="left",ip="right",sp={[Kd]:{x:.5,y:.5},[ep]:{x:0,y:0},[tp]:{x:1,y:.5},[Zd]:{x:.5,y:0},[np]:{x:0,y:1},[op]:{x:1,y:1},[rp]:{x:.5,y:1},[ip]:{x:1,y:.5},[ap]:{x:0,y:.5}},cp={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},lp="img",up={AUTO:"auto",CLASSIC:"classic",SUPER:"super"},dp=1,pp=2,fp={radius:"0.66",amount:"1.00",threshold:"0.01"},hp=25e6,mp=[1.5,2,4],gp={HIGH:{size:196e4,quality:90,maxUpscale:1},MEDIUM:{size:36e4,quality:85,maxUpscale:1},LOW:{size:16e4,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},yp="HIGH",vp="MEDIUM",Ip="LOW",wp="TINY",Ep="contrast",_p="brightness",Tp="saturation",Sp="hue",Rp="blur",bp="jpg",Op="jpeg",Cp="jpe",Dp="png",Pp="webp",Np="gif",Ap="unrecognized",xp={isMobile:!1};function Mp(){if("undefined"!=typeof window&&"undefined"!=typeof navigator){const t=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e=t&&r,xp["isMobile"]=e}var e}function Fp(e,...t){return function(...r){const n=r[r.length-1]||{},o=[e[0]];return t.forEach((function(t,a){const i=Number.isInteger(t)?r[t]:n[t];o.push(i,e[a+1])})),o.join("")}}function Lp(e){return e[e.length-1]}const Up=[Dp,Op,bp,Cp,"wix_ico_mp","wix_mp"],kp=[Op,bp,Cp];function jp(e){return function(e){return Up.includes(Bp(e))}(e)&&!function(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}(e)}const Vp=["/","\\","?","<",">","|","\u201c",":",'"'].map(encodeURIComponent),Wp=["\\.","\\*"];function Gp(e){return function(e){return kp.includes(Bp(e))}(e)?bp:function(e){return Bp(e)===Dp}(e)?Dp:function(e){return Bp(e)===Pp}(e)?Pp:Ap}function Bp(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function qp(e,t,r,n,o){let a;return a=o===Hd?function(e,t,r,n){return Math.max(r/e,n/t)}(e,t,r,n):o===$d?function(e,t,r,n){return Math.min(r/e,n/t)}(e,t,r,n):1,a}function zp(e,t,r,n,o,a){e=e||n.width,t=t||n.height;const{scaleFactor:i,width:s,height:c}=function(e,t,r,n,o){let a,i=r,s=n;if(a=qp(e,t,r,n,o),o===$d&&(i=e*a,s=t*a),i&&s&&i*s>hp){const r=Math.sqrt(hp/(i*s));i*=r,s*=r,a=qp(e,t,i,s,o)}return{scaleFactor:a,width:i,height:s}}(e,t,n.width*o,n.height*o,r);return function(e,t,r,n,o,a,i){const{optimizedScaleFactor:s,upscaleMethodValue:c,forceUSM:l}=function(e,t,r,n){if("auto"===n)return function(e,t){const r=Yp(e,t);return{optimizedScaleFactor:gp[r].maxUpscale,upscaleMethodValue:dp,forceUSM:!1}}(e,t);if("super"===n)return function(e){return{optimizedScaleFactor:Lp(mp),upscaleMethodValue:pp,forceUSM:!(mp.includes(e)||e>Lp(mp))}}(r);return function(e,t){const r=Yp(e,t);return{optimizedScaleFactor:gp[r].maxUpscale,upscaleMethodValue:dp,forceUSM:!1}}(e,t)}(e,t,a,o);let u=r,d=n;if(a<=s)return{width:u,height:d,scaleFactor:a,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!1};switch(i){case Hd:u=r*(s/a),d=n*(s/a);break;case $d:u=e*s,d=t*s}return{width:u,height:d,scaleFactor:s,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!0}}(e,t,s,c,a,i,r)}function $p(e,t,r,n){const o=Xp(r)||function(e=Kd){return sp[e]}(n);return{x:Math.max(0,Math.min(e.width-t.width,o.x*e.width-t.width/2)),y:Math.max(0,Math.min(e.height-t.height,o.y*e.height-t.height/2)),width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}}function Hp(e){return e.alignment&&cp[e.alignment]||cp[Kd]}function Xp(e){let t;return!e||"number"!=typeof e.x||isNaN(e.x)||"number"!=typeof e.y||isNaN(e.y)||(t={x:Jp(Math.max(0,Math.min(100,e.x))/100,2),y:Jp(Math.max(0,Math.min(100,e.y))/100,2)}),t}function Yp(e,t){const r=e*t;return r>gp[yp].size?yp:r>gp[vp].size?vp:r>gp[Ip].size?Ip:wp}function Jp(e,t){const r=Math.pow(10,t||0);return(e*r/r).toFixed(t)}function Qp(e){return e&&e.upscaleMethod&&up[e.upscaleMethod.toUpperCase()]||up.AUTO}function Kp(){return xp["isMobile"]}function Zp(e,t,r){let n;switch(t.crop&&(n=function(e,t){const r=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),n=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return r&&n&&(e.width!==r||e.height!==n)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:r,height:n}:null}(t,t.crop),n&&(e.src.width=n.width,e.src.height=n.height,e.src.isCropped=!0,e.parts.push(tf(n)))),e.fittingType){case zd.SCALE_TO_FIT:case zd.LEGACY_FIT_WIDTH:case zd.LEGACY_FIT_HEIGHT:case zd.LEGACY_FULL:case zd.FIT_AND_TILE:case zd.LEGACY_BG_FIT_AND_TILE:case zd.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case zd.LEGACY_BG_FIT_AND_TILE_VERTICAL:case zd.LEGACY_BG_NORMAL:e.parts.push(ef(e,r));break;case zd.SCALE_TO_FILL:e.parts.push(function(e,t){const r=zp(e.src.width,e.src.height,Hd,t,e.devicePixelRatio,e.upscaleMethod),n=Xp(e.focalPoint);return{transformType:n?Xd:Hd,width:Math.round(r.width),height:Math.round(r.height),alignment:Hp(t),focalPointX:n&&n.x,focalPointY:n&&n.y,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}(e,r));break;case zd.STRETCH:e.parts.push(function(e,t){const r=qp(e.src.width,e.src.height,t.width,t.height,Hd),n=Object.assign({},t);return n.width=e.src.width*r,n.height=e.src.height*r,ef(e,n)}(e,r));break;case zd.TILE_HORIZONTAL:case zd.TILE_VERTICAL:case zd.TILE:case zd.LEGACY_ORIGINAL_SIZE:case zd.ORIGINAL_SIZE:n=$p(e.src,r,e.focalPoint,r.alignment),e.src.isCropped?(Object.assign(e.parts[0],n),e.src.width=n.width,e.src.height=n.height):e.parts.push(tf(n));break;case zd.LEGACY_STRIP_TILE_HORIZONTAL:case zd.LEGACY_STRIP_TILE_VERTICAL:case zd.LEGACY_STRIP_TILE:case zd.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(function(e){return{transformType:Jd,width:Math.round(e.width),height:Math.round(e.height),alignment:Hp(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case zd.LEGACY_STRIP_SCALE_TO_FIT:case zd.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(function(e){return{transformType:$d,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r));break;case zd.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(function(e){return{transformType:Qd,width:Math.round(e.width),height:Math.round(e.height),alignment:Hp(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}(r))}}function ef(e,t){const r=zp(e.src.width,e.src.height,$d,t,e.devicePixelRatio,e.upscaleMethod);return{transformType:Hd,width:Math.round(r.width),height:Math.round(r.height),alignment:cp.center,upscale:r.scaleFactor>1,forceUSM:r.forceUSM,scaleFactor:r.scaleFactor,cssUpscaleNeeded:r.cssUpscaleNeeded,upscaleMethodValue:r.upscaleMethodValue}}function tf(e){return{transformType:Yd,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function rf(e,t){var r;t=t||{},e.quality=function(e,t){const r=e.fileType===Dp,n=e.fileType===bp,o=n||r;if(o){const n=Lp(e.parts),o=(a=n.width,i=n.height,gp[Yp(a,i)].quality);let s=t.quality&&t.quality>=5&&t.quality<=90?t.quality:o;return s=r?s+5:s,s}var a,i;return 0}(e,t),e.progressive=function(e){return!1!==e.progressive}(t),e.watermark=function(e){return e.watermark}(t),e.autoEncode=null===(r=t.autoEncode)||void 0===r||r,e.unsharpMask=function(e,t){var r,n,o;if(function(e){const t="number"==typeof(e=e||{}).radius&&!isNaN(e.radius)&&e.radius>=.1&&e.radius<=500,r="number"==typeof e.amount&&!isNaN(e.amount)&&e.amount>=0&&e.amount<=10,n="number"==typeof e.threshold&&!isNaN(e.threshold)&&e.threshold>=0&&e.threshold<=255;return t&&r&&n}(t.unsharpMask))return{radius:Jp(null===(r=t.unsharpMask)||void 0===r?void 0:r.radius,2),amount:Jp(null===(n=t.unsharpMask)||void 0===n?void 0:n.amount,2),threshold:Jp(null===(o=t.unsharpMask)||void 0===o?void 0:o.threshold,2)};if(("number"!=typeof(a=(a=t.unsharpMask)||{}).radius||isNaN(a.radius)||0!==a.radius||"number"!=typeof a.amount||isNaN(a.amount)||0!==a.amount||"number"!=typeof a.threshold||isNaN(a.threshold)||0!==a.threshold)&&function(e){const t=Lp(e.parts);return!(t.scaleFactor>=1)||t.forceUSM}(e))return fp;var a;return}(e,t),e.filters=function(e){const t=e.filters||{},r={};nf(t[Ep],-100,100)&&(r[Ep]=t[Ep]);nf(t[_p],-100,100)&&(r[_p]=t[_p]);nf(t[Tp],-100,100)&&(r[Tp]=t[Tp]);nf(t[Sp],-180,180)&&(r[Sp]=t[Sp]);nf(t[Rp],0,100)&&(r[Rp]=t[Rp]);return r}(t)}function nf(e,t,r){return"number"==typeof e&&!isNaN(e)&&0!==e&&e>=t&&e<=r}function of(e,t,r,n){const o=function(e){var t;return null!==(t=null==e?void 0:e.isSEOBot)&&void 0!==t&&t}(n),a=Gp(t.id),i=function(e,t){const r=/\.([^.]*)$/,n=new RegExp(`(${Vp.concat(Wp).join("|")})`,"g");if(t&&t.length){let e=t;const o=t.match(r);return o&&Up.includes(o[1])&&(e=t.replace(r,"")),encodeURIComponent(e).replace(n,"_")}const o=e.match(/\/(.*?)$/);return(o?o[1]:e).replace(r,"")}(t.id,t.name),s=o?1:function(e){return Math.min(e.pixelAspectRatio||1,2)}(r),c=Bp(t.id),l=c,u=jp(t.id),d={fileName:i,fileExtension:c,fileType:a,fittingType:e,preferredExtension:l,src:{id:t.id,width:t.width,height:t.height,isCropped:!1},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},parts:[],devicePixelRatio:s,quality:0,upscaleMethod:Qp(n),progressive:!0,watermark:"",unsharpMask:{},filters:{},transformed:u};return u&&(Zp(d,t,r),rf(d,n)),d}const af=Fp`fit/w_${"width"},h_${"height"}`,sf=Fp`fill/w_${"width"},h_${"height"},al_${"alignment"}`,cf=Fp`fill/w_${"width"},h_${"height"},fp_${"focalPointX"}_${"focalPointY"}`,lf=Fp`crop/x_${"x"},y_${"y"},w_${"width"},h_${"height"}`,uf=Fp`crop/w_${"width"},h_${"height"},al_${"alignment"}`,df=Fp`fill/w_${"width"},h_${"height"},al_${"alignment"}`,pf=Fp`,lg_${"upscaleMethodValue"}`,ff=Fp`,q_${"quality"}`,hf=Fp`,usm_${"radius"}_${"amount"}_${"threshold"}`,mf=Fp`,bl`,gf=Fp`,wm_${"watermark"}`,yf={[Ep]:Fp`,con_${"contrast"}`,[_p]:Fp`,br_${"brightness"}`,[Tp]:Fp`,sat_${"saturation"}`,[Sp]:Fp`,hue_${"hue"}`,[Rp]:Fp`,blur_${"blur"}`},vf=Fp`,enc_auto`;function If(e,t,r,n={},o){return jp(t.id)?function(e){const t=[];e.parts.forEach((e=>{switch(e.transformType){case Yd:t.push(lf(e));break;case Jd:t.push(uf(e));break;case Qd:let r=df(e);e.upscale&&(r+=pf(e)),t.push(r);break;case $d:let n=af(e);e.upscale&&(n+=pf(e)),t.push(n);break;case Hd:let o=sf(e);e.upscale&&(o+=pf(e)),t.push(o);break;case Xd:let a=cf(e);e.upscale&&(a+=pf(e)),t.push(a)}}));let r=t.join("/");return e.quality&&(r+=ff(e)),e.unsharpMask&&(r+=hf(e.unsharpMask)),e.progressive||(r+=mf(e)),e.watermark&&(r+=gf(e)),e.filters&&(r+=Object.keys(e.filters).map((t=>yf[t](e.filters))).join("")),e.autoEncode&&e.fileType!==Np&&(r+=vf(e)),`${e.src.id}/v1/${r}/${e.fileName}.${e.preferredExtension}`}(o=o||of(e,t,r,n)):t.id}const wf={[Kd]:"50% 50%",[ep]:"0% 0%",[tp]:"100% 0%",[Zd]:"50% 0%",[np]:"0% 100%",[op]:"100% 100%",[rp]:"50% 100%",[ip]:"100% 50%",[ap]:"0% 50%"};Object.entries(wf).reduce(((e,[t,r])=>(e[r]=t,e)),{});function Ef(e,t,r,n){if(function(e,t,r){return r&&t&&!function(e){return!e||!e.trim()||"none"===e.toLowerCase()}(t.id)&&Object.values(zd).includes(e)}(e,t,r)){const o=function(e,t,r){const n=Object.assign({},r),o=Kp();switch(e){case zd.LEGACY_BG_FIT_AND_TILE:case zd.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case zd.LEGACY_BG_FIT_AND_TILE_VERTICAL:case zd.LEGACY_BG_NORMAL:const e=o?1e3:1920,r=o?1e3:1920;n.width=Math.min(e,t.width),n.height=Math.min(r,Math.round(n.width/(t.width/t.height))),n.pixelAspectRatio=1}return n}(e,t,r);return{uri:If(e,t,o,n||{},of(e,t,o,n))}}return{uri:""}}const _f=/^media\//i,Tf="undefined"!=typeof window?window.devicePixelRatio:1,Sf=(e,t)=>{const r=t&&t.baseHostURL;return r?`${r}${e}`:(e=>_f.test(e)?`https://static.wixstatic.com/${e}`:`https://static.wixstatic.com/media/${e}`)(e)};Mp(),Mp();const Rf={getScaleToFitImageURL:function(e,t,r,n,o,a){const i=Ef(zd.SCALE_TO_FIT,{id:e,width:t,height:r,name:a&&a.name},{width:n,height:o,htmlTag:lp,alignment:Kd,pixelAspectRatio:Tf},a);return Sf(i.uri,a)},getScaleToFillImageURL:function(e,t,r,n,o,a){const i=Ef(zd.SCALE_TO_FILL,{id:e,width:t,height:r,name:a&&a.name,focalPoint:{x:a&&a.focalPoint&&a.focalPoint.x,y:a&&a.focalPoint&&a.focalPoint.y}},{width:n,height:o,htmlTag:lp,alignment:Kd,pixelAspectRatio:Tf},a);return Sf(i.uri,a)},getCropImageURL:function(e,t,r,n,o,a,i,s,c,l){const u=Ef(zd.SCALE_TO_FILL,{id:e,width:t,height:r,name:l&&l.name,crop:{x:n,y:o,width:a,height:i}},{width:s,height:c,htmlTag:lp,alignment:Kd,pixelAspectRatio:Tf},l);return Sf(u.uri,l)}};function bf(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Of=new WeakMap,Cf=new WeakMap,Df=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,Af=new WeakMap,xf=new WeakMap;class Mf{constructor(e){let{platformUtils:t,wixSdk:r,bi:n,tpaActionImplementations:o,devMode:a,verbose:i}=e;bf(this,Of,{writable:!0,value:void 0}),bf(this,Cf,{writable:!0,value:void 0}),bf(this,Df,{writable:!0,value:void 0}),bf(this,Pf,{writable:!0,value:void 0}),bf(this,Nf,{writable:!0,value:void 0}),bf(this,Af,{writable:!0,value:void 0}),bf(this,xf,{writable:!0,value:void 0}),u()(this,Of,this._getSettings({wixSdk:r,bi:n,devMode:a,verbose:i})),u()(this,Cf,this._getUser(r.user)),u()(this,Df,this._getLocation(r.location,n)),u()(this,Pf,this._getUtils(t)),u()(this,Nf,this._getTimers(r)),u()(this,Af,(async e=>{let{currentItem:t,action:n}=e;const a=o[n];await a({wixSdk:r,currentItem:t})})),u()(this,xf,this._getSeo(r))}get settings(){return c()(this,Of)}get user(){return c()(this,Cf)}get location(){return c()(this,Df)}get utils(){return c()(this,Pf)}get timers(){return c()(this,Nf)}get executeTpaAction(){return c()(this,Af)}get seo(){return c()(this,xf)}_getSettings(e){let{wixSdk:{window:{viewMode:t,rendering:{env:r},browserLocale:n},site:{regionalSettings:o=n}},bi:{metaSiteId:a,viewerName:i},devMode:s,verbose:c}=e;return{metaSiteId:a,locale:o,mode:{name:r,dev:s,verbose:c,ssr:"backend"===r,csr:"backend"!==r},env:{name:t,live:"Site"===t,preview:"Preview"===t,livePreview:"Editor"===t,editor:"Preview"===t||"Editor"===t,renderer:i}}}_getUser(e){return{get id(){return e.currentUser.id},get loggedIn(){return e.currentUser.loggedIn},onLogin:e.onLogin}}_getLocation(e,t){let{baseUrl:r,url:n,to:o}=e,{pageId:a}=t;return{pageId:a,pageUrl:n,baseUrl:r,navigateTo:o}}_getUtils(e){let{links:t,mediaItemUtils:r}=e;return{links:t,media:{...r,getScaleToFillImageURL:Rf.getScaleToFillImageURL}}}_getTimers(e){var t,r;return{queueMicrotask:(null==(t=e.environment)||null==(r=t.timers)?void 0:r.queueMicrotask)||queueMicrotask}}_getSeo(e){return{renderSEOTags:e.seo.renderSEOTags}}}var Ff=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0627\u0644\u0643\u0644"}'),Lf=a.t(Ff,2),Uf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0438\u0447\u043a\u0438"}'),kf=a.t(Uf,2),jf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tot"}'),Vf=a.t(jf,2),Wf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161e"}'),Gf=a.t(Wf,2),Bf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),qf=a.t(Bf,2),zf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),$f=a.t(zf,2),Hf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u038c\u03bb\u03b1"}'),Xf=a.t(Hf,2),Yf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"All"}'),Jf=a.t(Yf,2),Qf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todo"}'),Kf=a.t(Qf,2),Zf=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tout"}'),eh=a.t(Zf,2),th=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u05d4\u05db\u05dc"}'),rh=a.t(th,2),nh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0938\u092d\u0940"}'),oh=a.t(nh,2),ah=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\xd6sszes"}'),ih=a.t(ah,2),sh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}'),ch=a.t(sh,2),lh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Tutti"}'),uh=a.t(lh,2),dh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u3059\u3079\u3066"}'),ph=a.t(dh,2),fh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\uc804\uccb4"}'),hh=a.t(fh,2),mh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Viskas"}'),gh=a.t(mh,2),yh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Semua"}'),vh=a.t(yh,2),Ih=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),wh=a.t(Ih,2),Eh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alle"}'),_h=a.t(Eh,2),Th=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Wszystkie"}'),Sh=a.t(Th,2),Rh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Todos"}'),bh=a.t(Rh,2),Oh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Toate"}'),Ch=a.t(Oh,2),Dh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0412\u0441\u0435"}'),Ph=a.t(Dh,2),Nh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"V\u0161etky"}'),Ah=a.t(Nh,2),xh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Vse"}'),Mh=a.t(xh,2),Fh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Alla"}'),Lh=a.t(Fh,2),Uh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14"}'),kh=a.t(Uh,2),jh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Lahat"}'),Vh=a.t(jh,2),Wh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"Hepsi"}'),Gh=a.t(Wh,2),Bh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u0423\u0441\u0456"}'),qh=a.t(Bh,2),zh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"T\u1ea5t c\u1ea3"}'),$h=a.t(zh,2),Hh=JSON.parse('{"USER_INPUT_FILTER_OPTION_RESET_ALL":"\u6240\u6709"}');const Xh={ar:Lf,bg:kf,ca:Vf,cs:Gf,da:qf,de:$f,el:Xf,en:Jf,es:Kf,fr:eh,he:rh,hi:oh,hu:ih,id:ch,it:uh,ja:ph,ko:hh,lt:gh,ms:vh,nl:wh,no:_h,pl:Sh,pt:bh,ro:Ch,ru:Ph,sk:Ah,sl:Mh,sv:Lh,th:kh,tl:Vh,tr:Gh,uk:qh,vi:$h,zh:a.t(Hh,2)},Yh=Xh.en;function Jh(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}var Qh=new WeakMap,Kh=new WeakMap,Zh=new WeakMap,em=new WeakMap,tm=new WeakMap,rm=new WeakMap,nm=new WeakMap;const{initAppForPage:om,createControllers:am}=new class{constructor(e){var t=this;let{verbose:r=!1,wixDataSchemasForItTests:n,automationsClientCreator:a=C,tpaActionImplementations:i=p}=void 0===e?{}:e;return o()(this,"initAppForPage",(function(e,r,n,o){let{bi:a={},monitoring:{createMonitor:i},fedOpsLoggerFactory:s,biLoggerFactory:l,essentials:{httpClient:d,experiments:p}}=void 0===o?{}:o;try{const o=new Mf({platformUtils:r,wixSdk:n,bi:a,tpaActionImplementations:c()(t,nm),devMode:!1,verbose:c()(t,em)}),{settings:f}=o,{instance:m,appData:{gridAppId:g}}=e,{data:y,window:{warmupData:v,getRouterData:I},location:{baseUrl:w,protocol:E},site:{language:_}}=n;u()(t,Zh,I()),u()(t,Kh,new wa({fedops:{factory:s,hooks:{start:e=>{let{name:r}=e;return c()(t,Kh).log(new Be({category:"interaction start",message:"interaction "+r+" started"}))},end:e=>{let{name:r,duration:n}=e;return c()(t,Kh).log(new Be({category:"interaction end",message:"interaction "+r+" ended after "+n+" ms"}))}}},bi:{factory:l},monitor:{factory:i},verbose:{factory:()=>({log:function(){var e;return((null==(e=n.telemetry)?void 0:e.console)||console).verbose(...arguments)}})},console:{factory:()=>{var e;return(null==(e=n.telemetry)?void 0:e.console)||console}},settings:f,global:self})),c()(t,Kh).log(new Ge("databinding/initAppForPage",Ge.types.START));const T=(e=>{var t;const r=null!=(t=Xh[e])?t:Yh;return{t:e=>{var t;return null!=(t=null==r?void 0:r[e])?t:e}}})(_),S=new qo({experiments:p,settings:f}),R=S.fes?new Zn({httpClient:d,getRequestParams:()=>({instance:m,gridAppId:g})}):new Do({wixData:y,wixDataSchemas:c()(t,tm)||new qd(d,m,g,{baseUrl:f.env.editor?void 0:E+"://"+h()(w).hostname+"/_api/cloud-data/v1/schemas"})}),b=new Uo(v),O=new Bo(c()(t,Zh)),C=Bu({automationsClientCreator:()=>c()(t,rm).call(t,{httpClient:d})});return u()(t,Qh,new Nu({platform:o,dataFetcher:R,warmupCache:b,staticCache:O,features:S,listenersByEvent:C,logger:c()(t,Kh),i18n:T,global:self})),c()(t,Kh).log(new Ge("databinding/initAppForPage",Ge.types.END)),Promise.resolve()}catch(e){return c()(t,Kh)&&c()(t,Kh).log(new P("App initialisation failed",{cause:e})),Promise.reject(e)}})),o()(this,"createControllers",(e=>{if(!e.length)return[];const t=(r=e,n=c()(this,Zh),r.map((e=>{let{compId:t,config:{dataset:{collectionName:r,filter:o,sort:a,includes:i,nested:s,pageSize:c,readWriteType:l,deferred:u,cursor:d}={}}={},type:p,connections:f,livePreviewOptions:{shouldFetchData:h,compsIdsToReset:m=[]}={}}=e;const g={id:t,type:p,collectionId:r,filter:o,sort:a,pageSize:c,readWriteType:l,includes:i,nested:s,deferred:u,connections:f,dataIsInvalidated:h,updatedCompIds:m,cursor:d};return p===Vr&&n?((e,t)=>{const{readWriteType:r}=e,{config:{dataset:{collectionName:n,filter:o,sort:a,includes:i,pageSize:s,lowercase:c}},dynamicUrl:l,userDefinedFilter:u}=t;return{...e,collectionId:n,filter:o,sort:a,includes:i,pageSize:s,readWriteType:r,dynamicPageData:{lowercase:c,dynamicUrl:l,userDefinedFilter:u}}})(g,n):g})));var r,n;const o=e.reduce(((e,t)=>{let{$w:r,compId:n}=t;return e[n]=r.fireEvent,e}),{});return c()(this,Qh).initializeDatasets({datasetConfigs:t,firePlatformEvent:e=>o[e]}).map((e=>({...e,pageReady:t=>e.pageReady($l(t))})))})),Jh(this,Qh,{writable:!0,value:void 0}),Jh(this,Kh,{writable:!0,value:void 0}),Jh(this,Zh,{writable:!0,value:void 0}),Jh(this,em,{writable:!0,value:void 0}),Jh(this,tm,{writable:!0,value:void 0}),Jh(this,rm,{writable:!0,value:void 0}),Jh(this,nm,{writable:!0,value:void 0}),u()(this,tm,n),u()(this,rm,a),u()(this,em,r),u()(this,nm,i),{initAppForPage:this.initAppForPage,createControllers:this.createControllers}}}}(),i}()}));
//# sourceMappingURL=app.js.map